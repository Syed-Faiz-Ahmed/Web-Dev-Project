[{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\App.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useState' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"useState"},"fix":{"range":[0,32],"text":""},"desc":"Remove unused variable 'useState'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'reactLogo' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"reactLogo"},"fix":{"range":[41,56],"text":""},"desc":"Remove unused variable 'reactLogo'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'viteLogo' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"viteLogo"},"fix":{"range":[85,99],"text":""},"desc":"Remove unused variable 'viteLogo'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'initPresence' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":52,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"initPresence"},"fix":{"range":[2302,2350],"text":""},"desc":"Remove unused variable 'initPresence'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react'\r\nimport reactLogo from './assets/react.svg'\r\nimport viteLogo from '/vite.svg'\r\nimport './App.css'\r\n\r\nimport { Routes, Route, Navigate } from 'react-router-dom'\r\nimport ProtectedRoute from './components/auth/ProtectedRoute'\r\nimport Recognition from './pages/Recognition'\r\nimport Layout from './components/layout/Layout'\r\nimport EmployeesPage from './pages/EmployeesPage'\r\nimport ArchivedUsers from './pages/ArchivedUsers'\r\nimport Chat from './pages/Chat'\r\nimport Home from './pages/Home'\r\nimport SignUp from './pages/SignUp'\r\nimport Dashboard1 from './pages/Dashboard1'\r\nimport ProfessionalEventsPage from './pages/ProfessionalEventsPage'\r\nimport Feed from './pages/Feed'\r\nimport Profile from './pages/profile/Profile'\r\nimport ProfileView from './components/Profile/ProfileView'\r\nimport Promotion from './pages/Promotion'\r\nimport Redemption from './pages/Redemption'\r\nimport LogPage from './pages/LogPage'\r\nimport Settings from './pages/Settings'\r\nimport ProfileFeed from './pages/profile/ProfileFeed'\r\nimport ProfileUploads from './pages/profile/ProfileUploads'\r\nimport ProfileLanguages from './pages/profile/ProfileLanguages'\r\nimport ProfileLocation from './pages/profile/ProfileLocation'\r\nimport ProfileFiles from './pages/profile/ProfileFiles'\r\nimport ProfileDisplay from './pages/profile/ProfileDisplay'\r\nimport ProfileDeleted from './pages/profile/ProfileDeleted'\r\nimport ProfileClearHistory from './pages/profile/ProfileClearHistory'\r\nimport ProfileExit from './pages/profile/ProfileExit'\r\nimport ProfileReferrals from './pages/profile/ProfileReferrals'\r\nimport CookiesPolicy from './pages/CookiesPolicy'\r\nimport PrivacyPolicy from './pages/PrivacyPolicy'\r\nimport Terms from './pages/Terms'\r\nimport Contact from './pages/settings/Contact'\r\nimport Feedback from './pages/settings/Feedback'\r\nimport RateApp from './pages/RateApp'\r\nimport RecruitmentLayout from \"./pages/recruitment/RecruitmentLayout\";\r\nimport TasksAdmin from './pages/admin/Tasks'\r\nimport ProfileTasks from './pages/profile/ProfileTasks'\r\nimport Applications from \"./pages/recruitment/Applications\";\r\nimport Interviews from \"./pages/recruitment/Interviews\";\r\nimport Offers from \"./pages/recruitment/Offers\";\r\nimport RedemptionPage from './pages/Redeem'\r\n\r\n\r\n\r\n\r\nimport { useEffect } from 'react';\r\nimport { initPresence } from './utils/presence';\r\n\r\nfunction App() {\r\nuseEffect(() => {\r\n    const savedTheme = localStorage.getItem('theme');\r\n    if (savedTheme === 'dark') {\r\n      document.documentElement.classList.add('dark');\r\n    } else {\r\n      document.documentElement.classList.remove('dark');\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <Routes>\r\n          <Route path='/' element={<Navigate to=\"/login\" replace />} />\r\n          <Route path=\"/home\" element={<Home />} />\r\n          <Route path=\"/login\" element={<LogPage />} />\r\n          <Route path=\"/Signup\" element={<SignUp />} />\r\n          <Route path=\"/dashboard\" element={<ProtectedRoute><Layout><Dashboard1 /></Layout></ProtectedRoute>} />\r\n          <Route path=\"/profile\" element={<ProtectedRoute><Layout><Profile /></Layout></ProtectedRoute>} />\r\n          <Route path=\"/profile/:id\" element={<ProtectedRoute><Layout><ProfileView /></Layout></ProtectedRoute>} />\r\n          <Route path=\"/event\" element={<ProtectedRoute><Layout><ProfessionalEventsPage /></Layout></ProtectedRoute>} />\r\n          <Route path=\"/recognition\" element={<ProtectedRoute><Layout><Recognition /></Layout></ProtectedRoute>} />\r\n          <Route path=\"/feed\" element={<ProtectedRoute><Layout><Feed /></Layout></ProtectedRoute>} />\r\n          <Route path=\"/promotion\" element={<ProtectedRoute><Layout><Promotion /></Layout></ProtectedRoute>} />\r\n          <Route path=\"/redemption\" element={<ProtectedRoute><Layout><RedemptionPage /></Layout></ProtectedRoute>} />\r\n          <Route path='/employees' element={<ProtectedRoute><Layout><EmployeesPage /></Layout></ProtectedRoute>} />\r\n          <Route path='/archived-users' element={<ProtectedRoute><Layout><ArchivedUsers /></Layout></ProtectedRoute>} />\r\n          <Route path='/chat' element={<ProtectedRoute><Layout><Chat /></Layout></ProtectedRoute>} />\r\n          <Route path='/settings' element={<ProtectedRoute><Layout><Settings /></Layout></ProtectedRoute>} />\r\n          <Route path='/settings/rate' element={<ProtectedRoute><Layout><RateApp /></Layout></ProtectedRoute>} />\r\n          <Route path='/settings/privacy' element={<ProtectedRoute><Layout><PrivacyPolicy /></Layout></ProtectedRoute>} />\r\n          <Route path='/settings/terms' element={<ProtectedRoute><Layout><Terms /></Layout></ProtectedRoute>} />\r\n          <Route path='/settings/cookies' element={<ProtectedRoute><Layout><CookiesPolicy /></Layout></ProtectedRoute>} />\r\n          <Route path='/settings/contact' element={<ProtectedRoute><Layout><Contact /></Layout></ProtectedRoute>} />\r\n          <Route path='/settings/feedback' element={<ProtectedRoute><Layout><Feedback /></Layout></ProtectedRoute>} />\r\n\r\n          <Route path='/profile/feed' element={<ProtectedRoute><Layout><ProfileFeed /></Layout></ProtectedRoute>} />\r\n          <Route path='/profile/uploads' element={<ProtectedRoute><Layout><ProfileUploads /></Layout></ProtectedRoute>} />\r\n          <Route path='/profile/languages' element={<ProtectedRoute><Layout><ProfileLanguages /></Layout></ProtectedRoute>} />\r\n          <Route path='/profile/location' element={<ProtectedRoute><Layout><ProfileLocation /></Layout></ProtectedRoute>} />\r\n          <Route path='/profile/files' element={<ProtectedRoute><Layout><ProfileFiles /></Layout></ProtectedRoute>} />\r\n          <Route path='/profile/display' element={<ProtectedRoute><Layout><ProfileDisplay /></Layout></ProtectedRoute>} />\r\n          <Route path='/profile/deleted' element={<ProtectedRoute><Layout><ProfileDeleted /></Layout></ProtectedRoute>} />\r\n          <Route path='/profile/clear-history' element={<ProtectedRoute><Layout><ProfileClearHistory /></Layout></ProtectedRoute>} />\r\n          <Route path='/profile/exit' element={<ProtectedRoute><Layout><ProfileExit /></Layout></ProtectedRoute>} />\r\n          <Route path='/profile/referrals' element={<ProtectedRoute><Layout><ProfileReferrals /></Layout></ProtectedRoute>} />\r\n\r\n          <Route path=\"/recruitment/*\" element={<ProtectedRoute><Layout><RecruitmentLayout /></Layout></ProtectedRoute>} />\r\n          <Route path=\"/admin/tasks\" element={<ProtectedRoute><Layout><TasksAdmin /></Layout></ProtectedRoute>} />\r\n          <Route path=\"/profile/tasks\" element={<ProtectedRoute><Layout><ProfileTasks /></Layout></ProtectedRoute>} />\r\n        </Routes>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Dashboard1\\AddMeetingModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Dashboard1\\Emp_Composition.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Dashboard1\\EmployeesStatistics.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'mounted' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":15,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"mounted"},"fix":{"range":[269,276],"text":""},"desc":"Remove unused variable 'mounted'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  CartesianGrid,\r\n} from \"recharts\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function HiringStatsChart() {\r\n  const [mounted, setMounted] = useState(false);\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\r\n      const baseUrl = import.meta.env.VITE_API_BASE || 'http://localhost:3000';\r\n      const token = localStorage.getItem('token');\r\n      const res = await axios.get(`${baseUrl}/api/dashboard/stats`, {\r\n        headers: { Authorization: token ? `Bearer ${token}` : '' }\r\n      });\r\n\r\n      if (res.data?.success && Array.isArray(res.data.data)) {\r\n        const rows = res.data.data;\r\n        const mappedData = months.map(m => {\r\n          const item = rows.find(r => String(r.month) === m) || {};\r\n          const hires = Number(item.hires || 0);\r\n          const attrition = Number(item.attrition || 0);\r\n          const job_applied = Number(item.job_applied || 0);\r\n          return {\r\n            month: m,\r\n            hires,\r\n            attrition,\r\n            job_applied,\r\n            growth: hires - attrition\r\n          };\r\n        });\r\n        setData(mappedData);\r\n      } else {\r\n        // No data or unexpected shape: initialize zeroed months\r\n        const zeroData = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'].map(m => ({ month: m, hires:0, attrition:0, job_applied:0, growth:0 }));\r\n        setData(zeroData);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch dashboard stats\", err);\r\n      const zeroData = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'].map(m => ({ month: m, hires:0, attrition:0, job_applied:0, growth:0 }));\r\n      setData(zeroData);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full h-[400px] bg-white p-6 rounded-xl border border-gray-100 shadow-sm\">\r\n      <div className=\"mb-6 flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-lg font-bold text-gray-900\">Monthly Hiring & Resignations</h2>\r\n          <p className=\"text-sm text-gray-500\">Overview of employee movement and recruitment activity</p>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <div className=\"text-xs text-gray-500\">Resigned (YTD)</div>\r\n          <div className=\"text-xl font-bold text-red-600\">{data.reduce((s, d) => s + (d.attrition || 0), 0)}</div>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"p-6 text-center text-gray-500\">Loading dashboard stats‚Ä¶</div>\r\n      ) : (() => {\r\n        const hasData = data && data.some(d => d.hires || d.attrition || d.job_applied);\r\n        if (!hasData) {\r\n          return <div className=\"p-6 text-center text-gray-500\">No hiring data available for the current year.</div>;\r\n        }\r\n        return (\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <LineChart data={data}>\r\n              <CartesianGrid stroke=\"#E6E6E6\" strokeDasharray=\"3 3\" />\r\n\r\n              <XAxis\r\n                dataKey=\"month\"\r\n                axisLine={false}\r\n                tickLine={false}\r\n                tick={{ fill: '#6b7280', fontSize: 12 }}\r\n                dy={10}\r\n              />\r\n              <YAxis\r\n                axisLine={false}\r\n                tickLine={false}\r\n                tick={{ fill: '#6b7280', fontSize: 12 }}\r\n              />\r\n\r\n              <Tooltip\r\n                contentStyle={{ backgroundColor: '#fff', borderRadius: '8px', border: '1px solid #e5e7eb', boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }}\r\n                itemStyle={{ fontSize: '12px' }}\r\n              />\r\n\r\n              <Legend\r\n                wrapperStyle={{ paddingTop: '30px', paddingBottom: '10px' }}\r\n                iconType=\"circle\"\r\n                align=\"center\"\r\n                verticalAlign=\"bottom\"\r\n              />\r\n\r\n              <Line\r\n                type=\"monotone\"\r\n                dataKey=\"hires\"\r\n                stroke=\"#2563eb\" // Blue-600\r\n                strokeWidth={3}\r\n                dot={false}\r\n                activeDot={{ r: 6 }}\r\n                name=\"New Hires\"\r\n              />\r\n\r\n              <Line\r\n                type=\"monotone\"\r\n                dataKey=\"attrition\"\r\n                stroke=\"#ef4444\" // Red-500\r\n                strokeWidth={3}\r\n                dot={false}\r\n                activeDot={{ r: 6 }}\r\n                name=\"Resigned\"\r\n              />\r\n\r\n              <Line\r\n                type=\"monotone\"\r\n                dataKey=\"job_applied\"\r\n                stroke=\"#f59e0b\" // Amber-500\r\n                strokeWidth={2}\r\n                dot={false}\r\n                strokeDasharray=\"4 4\"\r\n                activeDot={{ r: 4 }}\r\n                name=\"Applications\"\r\n              />\r\n\r\n              <Line\r\n                type=\"monotone\"\r\n                dataKey=\"growth\"\r\n                stroke=\"#10b981\" // Green-500\r\n                strokeWidth={3}\r\n                dot={false}\r\n                activeDot={{ r: 6 }}\r\n                name=\"Net Growth\"\r\n              />\r\n\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        );\r\n      })()}\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Dashboard1\\MeetingsUI.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[116,155],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchMeetings` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  22 |     }\n  23 |\n> 24 |     fetchMeetings();\n     |     ^^^^^^^^^^^^^ `fetchMeetings` accessed before it is declared\n  25 |\n  26 |     // 2. THE \"LISTENER\" (Optimized)\n  27 |     const checkTheme = () => {\n\n  48 |   }, []);\n  49 |\n> 50 |   const fetchMeetings = () => {\n     |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 51 |     const token = localStorage.getItem(\"token\");\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 52 |     if (!token) { setMeetings([]); setLoading(false); return; }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 53 |     fetch(\"http://localhost:3000/api/meetings\", { headers: { Authorization: `Bearer ${token}` } })\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 54 |       .then((res) => res.json())\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 55 |       .then((data) => setMeetings(Array.isArray(data) ? data : []))\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 56 |       .catch((err) => console.error(err))\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 57 |       .finally(() => setLoading(false));\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 58 |   };\n     | ^^^^^ `fetchMeetings` is declared here\n  59 |\n  60 |   const handleOpenAdd = () => { setSelectedMeeting(null); setShowModal(true); };\n  61 |   const handleOpenEdit = (m) => { if (isAdmin) { setSelectedMeeting(m); setShowModal(true); } };","line":24,"column":5,"nodeType":null,"endLine":24,"endColumn":18}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \"react\";\r\nimport { Plus, Edit2, Trash2, Calendar } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\nimport MeetingModal from \"./AddMeetingModal\";\r\n\r\nexport default function MeetingsUI() {\r\n  const [meetings, setMeetings] = useState([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedMeeting, setSelectedMeeting] = useState(null);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  \r\n  // 1. State tracks if dark mode is active\r\n  const [isDarkMode, setIsDarkMode] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // --- User Role Logic ---\r\n    const userStr = localStorage.getItem(\"user\");\r\n    if (userStr) {\r\n      const user = JSON.parse(userStr);\r\n      setIsAdmin(user.role==='Admin');\r\n    }\r\n\r\n    fetchMeetings();\r\n\r\n    // 2. THE \"LISTENER\" (Optimized)\r\n    const checkTheme = () => {\r\n      const isDark = \r\n        localStorage.getItem(\"theme\") === \"dark\" || \r\n        document.documentElement.classList.contains(\"dark\");\r\n      setIsDarkMode(isDark);\r\n    };\r\n\r\n    // Run once on mount\r\n    checkTheme();\r\n\r\n    // Create an observer to watch for class changes on the <html> tag\r\n    const observer = new MutationObserver(() => {\r\n      checkTheme();\r\n    });\r\n    \r\n    observer.observe(document.documentElement, {\r\n      attributes: true,\r\n      attributeFilter: [\"class\"],\r\n    });\r\n\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  const fetchMeetings = () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) { setMeetings([]); setLoading(false); return; }\r\n    fetch(\"http://localhost:3000/api/meetings\", { headers: { Authorization: `Bearer ${token}` } })\r\n      .then((res) => res.json())\r\n      .then((data) => setMeetings(Array.isArray(data) ? data : []))\r\n      .catch((err) => console.error(err))\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  const handleOpenAdd = () => { setSelectedMeeting(null); setShowModal(true); };\r\n  const handleOpenEdit = (m) => { if (isAdmin) { setSelectedMeeting(m); setShowModal(true); } };\r\n  \r\n  const handleDeleteDirectly = async (id, e) => {\r\n    e.stopPropagation();\r\n    if (!window.confirm(\"Are you sure?\")) return;\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const res = await fetch(`http://localhost:3000/api/meetings/${id}`, { method: \"DELETE\", headers: { Authorization: `Bearer ${token}` }});\r\n      if (res.ok) setMeetings((prev) => prev.filter((m) => m.id !== id));\r\n    } catch (err) { console.error(err); }\r\n  };\r\n\r\n  const handleMeetingSaved = (saved) => {\r\n    setMeetings((prev) => {\r\n      const exists = prev.find((m) => m.id === saved.id);\r\n      return exists ? prev.map((m) => (m.id === saved.id ? saved : m)) : [...prev, saved];\r\n    });\r\n  };\r\n\r\n  const handleMeetingDeleted = (id) => setMeetings((prev) => prev.filter((m) => m.id !== id));\r\n\r\n  const formatMeeting = (m) => {\r\n    const dateObj = new Date(m.meeting_date);\r\n    return {\r\n      ...m,\r\n      fullDate: dateObj.toLocaleDateString(\"en-US\", { weekday: 'short', month: 'short', day: 'numeric' }),\r\n      timeDisplay: `${m.start_time} ‚Äì ${m.end_time}`,\r\n    };\r\n  };\r\n\r\n  return (\r\n    // 3. THE WRAPPER: Applies 'dark' class if state is true\r\n    <div className={`w-full h-full ${isDarkMode ? \"dark\" : \"\"}`}>\r\n      \r\n      {/* ‚úÖ FIX: Replaced [.dark_&] with in-[.dark] \r\n         This means \"If inside a .dark container, use this style\"\r\n      */}\r\n      <div className=\"w-full h-full flex flex-col min-h-[300px] bg-white in-[.dark]:bg-gray-900 p-6 rounded-xl shadow-md transition-colors duration-200\">\r\n        \r\n        {/* Header */}\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h2 className=\"text-xl font-bold text-gray-800 in-[.dark]:text-blue-400 flex items-center gap-2\">\r\n            <Calendar className=\"w-5 h-5\" />\r\n            Scheduled Meetings\r\n          </h2>\r\n          {isAdmin && (\r\n            <button\r\n              onClick={handleOpenAdd}\r\n              className=\"flex items-center gap-1 bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md text-sm font-medium transition-colors\"\r\n            >\r\n              <Plus size={16} />\r\n              Add Meeting\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Grid Layout */}\r\n        <div className=\"flex-1 overflow-y-auto pr-2 custom-scrollbar\">\r\n          {loading && <p className=\"text-sm text-gray-400\">Loading meetings...</p>}\r\n          {!loading && meetings.length === 0 && (\r\n            <p className=\"text-sm text-gray-400\">No meetings scheduled</p>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {!loading &&\r\n              meetings.map((raw, idx) => {\r\n                const m = formatMeeting(raw);\r\n                return (\r\n                  <motion.div\r\n                    key={m.id}\r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: 0.1 * idx }}\r\n                    className=\"relative bg-white in-[.dark]:bg-gray-800 border border-gray-200 in-[.dark]:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-all group\"\r\n                  >\r\n                    \r\n                    {/* Admin Actions */}\r\n                    {isAdmin && (\r\n                      <div className=\"absolute top-3 right-3 flex gap-2\">\r\n                        <button\r\n                          onClick={() => handleOpenEdit(raw)}\r\n                          className=\"p-1 text-gray-400 hover:text-blue-500 transition-colors\"\r\n                        >\r\n                          <Edit2 size={16} />\r\n                        </button>\r\n                        <button\r\n                          onClick={(e) => handleDeleteDirectly(m.id, e)}\r\n                          className=\"p-1 text-gray-400 hover:text-red-500 transition-colors\"\r\n                        >\r\n                          <Trash2 size={16} />\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Title Text */}\r\n                    <h4 className=\"text-gray-900 in-[.dark]:text-gray-100 font-semibold text-lg pr-12 truncate\">\r\n                      {m.title}\r\n                    </h4>\r\n\r\n                    {/* Date & Time Text */}\r\n                    <div className=\"mt-1 flex flex-col\">\r\n                        <span className=\"text-xs font-medium text-blue-600 in-[.dark]:text-blue-400 uppercase tracking-wide\">\r\n                          {m.fullDate}\r\n                        </span>\r\n                        <p className=\"text-gray-500 in-[.dark]:text-gray-400 text-sm\">\r\n                          {m.timeDisplay}\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Join Button */}\r\n                    <button className=\"\r\n                      mt-4 px-4 py-2 rounded-md w-full\r\n                      bg-[#2C50AB] hover:bg-[#3b62c7]\r\n                      text-white text-sm font-medium transition-colors\r\n                    \">\r\n                      Join\r\n                    </button>\r\n                  </motion.div>\r\n                );\r\n              })}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"mt-6 flex items-center justify-between pt-4 border-t border-gray-100 in-[.dark]:border-gray-700\">\r\n          <div className=\"text-xs text-gray-400\">Last synced just now</div>\r\n          <button onClick={fetchMeetings} className=\"bg-blue-600 text-white px-4 py-1.5 rounded-md text-xs font-medium hover:bg-blue-700 transition-colors\">\r\n            Sync\r\n          </button>\r\n        </div>\r\n\r\n        <MeetingModal\r\n          isOpen={showModal}\r\n          onClose={() => setShowModal(false)}\r\n          meetingToEdit={selectedMeeting}\r\n          onMeetingSaved={handleMeetingSaved}\r\n          onMeetingDeleted={handleMeetingDeleted}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Dashboard1\\StatsCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Employee\\AddEmployeeModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Employee\\Ecard.jsx","messages":[{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":29,"column":53,"nodeType":"BlockStatement","messageId":"unexpected","endLine":29,"endColumn":55,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[924,924],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \"react\";\r\nimport { Mail, Phone, MoreVertical } from \"lucide-react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Ecard = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n          setUsers([]);\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        const res = await fetch(\"http://localhost:3000/api/users\", {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Authorization\": `Bearer ${token}`\r\n          },\r\n        });\r\n        if (!res.ok) {\r\n          let errBody = null;\r\n          try { errBody = await res.json(); } catch {}\r\n          if (res.status === 401) {\r\n            if (errBody && errBody.message === \"Token expired\") {\r\n              alert(\"Session expired. Please log in again.\");\r\n            }\r\n            localStorage.removeItem(\"token\");\r\n            localStorage.removeItem(\"user\");\r\n            window.location.href = \"/login\";\r\n            return;\r\n          }\r\n          setUsers([]);\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        const data = await res.json();\r\n        setUsers(data.users || data);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch users\", err);\r\n        setUsers([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const formatDate = (d) => {\r\n    if (!d) return \"N/A\";\r\n    try {\r\n      return new Date(d).toLocaleDateString();\r\n    } catch {\r\n      return String(d).slice(0, 10);\r\n    }\r\n  };\r\n\r\n  const defaultAvatar = \"/pexels-olly-927022.jpg\";\r\n\r\n  if (loading) return <p>Loading employees...</p>;\r\n\r\n  return (\r\n    <div className=\"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-6\">\r\n      {users.map((u) => (\r\n        <div key={u.id} className=\"bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-300 p-5 flex flex-col h-full\">\r\n          <div className=\"flex justify-between items-start mb-4\">\r\n            <span className={`px-2.5 py-0.5 rounded-full text-[11px] font-bold tracking-wide ${u.status === \"ACTIVE\" ? \"bg-green-50 text-green-700\" : u.status === \"DEACTIVE\" ? \"bg-red-50 text-red-700\" : \"bg-blue-50 text-blue-700\"}`}>\r\n              {u.status || \"ACTIVE\"}\r\n            </span>\r\n            <button className=\"text-gray-400 hover:text-gray-600\">\r\n              <MoreVertical size={16} />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col items-center text-center mb-6\">\r\n            <div className=\"w-16 h-16 rounded-full overflow-hidden mb-3 border border-gray-100\">\r\n              <img src={u.profile_picture ? (u.profile_picture.startsWith('http') ? u.profile_picture : `http://localhost:3000${u.profile_picture}`) : defaultAvatar} alt={u.fullname} className=\"w-full h-full object-cover\" />\r\n            </div>\r\n            <h3 className=\"font-bold text-gray-900 text-lg\">{u.fullname}</h3>\r\n            <p className=\"text-sm text-gray-500 font-medium\">{u.job_title || u.designation || \"-\"}</p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4 mb-6 border-t border-b border-gray-50 py-4\">\r\n            <div className=\"text-center border-r border-gray-50\">\r\n              <p className=\"text-[10px] text-gray-400 uppercase font-bold tracking-wider mb-1\">Department</p>\r\n              <p className=\"text-sm font-semibold text-gray-800\">{u.department || \"-\"}</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <p className=\"text-[10px] text-gray-400 uppercase font-bold tracking-wider mb-1\">Joined</p>\r\n              <p className=\"text-sm font-semibold text-gray-800\">{formatDate(u.date_of_joining || u.created_at)}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-3 mb-6 flex-1\">\r\n            <a href={`mailto:${u.email}`} className=\"flex items-center gap-3 text-sm text-gray-600 hover:text-blue-600 transition-colors p-2 rounded-lg hover:bg-gray-50\">\r\n              <Mail size={16} className=\"text-gray-400\" />\r\n              <span className=\"truncate\">{u.email}</span>\r\n            </a>\r\n            <a href={`tel:${u.phone || \"\"}`} className=\"flex items-center gap-3 text-sm text-gray-600 hover:text-blue-600 transition-colors p-2 rounded-lg hover:bg-gray-50\">\r\n              <Phone size={16} className=\"text-gray-400\" />\r\n              <span className=\"truncate\">{u.phone || \"-\"}</span>\r\n            </a>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-3 mt-auto\">\r\n            <button onClick={() => navigate(`/profile/${u.id}`)} className=\"w-full py-2 px-4 bg-white border border-gray-200 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 hover:border-gray-300 transition-all shadow-sm\">\r\n              View Profile\r\n            </button>\r\n            <button onClick={() => navigate(`/chat?userId=${u.id}`)} className=\"w-full py-2 px-4 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-all shadow-sm\">\r\n              Message\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Ecard;","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Feed\\CreateAppreciation.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Feed\\FeedPage1.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'axios' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"axios"},"fix":{"range":[254,265],"text":""},"desc":"Remove unused variable 'axios'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":146,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":146,"endColumn":88},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":146,"column":90,"nodeType":"BlockStatement","messageId":"unexpected","endLine":146,"endColumn":92,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[5220,5220],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":206,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":206,"endColumn":88},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":206,"column":90,"nodeType":"BlockStatement","messageId":"unexpected","endLine":206,"endColumn":92,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[7952,7952],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":208,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":208,"endColumn":88},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":208,"column":90,"nodeType":"BlockStatement","messageId":"unexpected","endLine":208,"endColumn":92,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[8080,8080],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport {\r\n    createAppreciation,\r\n    addComment,\r\n    getAllUsers,\r\n    getAllAppreciations,\r\n    getComments,\r\n    toggleLike,\r\n    deleteAppreciation\r\n} from '../../services/appreciationService';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { getAllEvents } from '../../services/event.service';\r\n\r\nconst FeedPage1 = ({ onNavigateBack }) => {\r\n    // State for the \"Give Points\" interaction\r\n    const [showGivePointsModal, setShowGivePointsModal] = useState(false);\r\n    const [users, setUsers] = useState([]);\r\n    const [appreciations, setAppreciations] = useState([]);\r\n    const [givePointsData, setGivePointsData] = useState({\r\n        recipient_id: '',\r\n        recipient_email: '',\r\n        title: 'Appreciation',\r\n        category: 'Hard Work',\r\n        message: '',\r\n        points: 0,\r\n        emoji: 'üëè'\r\n    });\r\n\r\n    // Helper to refresh feed\r\n    const fetchFeed = async () => {\r\n        try {\r\n            const response = await getAllAppreciations();\r\n            if (response && response.data) {\r\n                setAppreciations(response.data);\r\n            } else if (Array.isArray(response)) {\r\n                setAppreciations(response);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch appreciations\", error);\r\n        }\r\n    };\r\n\r\n    // Fetch initial data\r\n    const [userPoints, setUserPoints] = useState(0);\r\n\r\n    const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchUsers = async () => {\r\n            try {\r\n                const response = await getAllUsers();\r\n                if (response && response.users) {\r\n                    setUsers(response.users);\r\n                } else if (Array.isArray(response)) {\r\n                    setUsers(response);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Failed to fetch users\", error);\r\n            }\r\n        };\r\n\r\n        const fetchUserPoints = async () => {\r\n            try {\r\n                const u = JSON.parse(localStorage.getItem('user') || '{}');\r\n                if (!u || !u.id) return;\r\n                const token = localStorage.getItem('token');\r\n                const res = await fetch(`${import.meta.env.VITE_API_BASE || 'http://localhost:3000'}/api/users/${u.id}`, { headers: { Authorization: token ? `Bearer ${token}` : '' } });\r\n                if (!res.ok) return;\r\n                const data = await res.json();\r\n                setUserPoints(data.user?.points || 0);\r\n                // update local user copy\r\n                if (data.user) {\r\n                    localStorage.setItem('user', JSON.stringify(data.user));\r\n                    setIsAdmin(data.user.role === 'Admin');\r\n                }\r\n            } catch (err) {\r\n                console.error('Failed to fetch user points', err);\r\n            }\r\n        };\r\n\r\n        fetchUsers();\r\n        fetchFeed();\r\n        fetchUserPoints();\r\n\r\n        // listen for activity updates to refresh points\r\n        const onActivity = () => fetchUserPoints();\r\n        window.addEventListener('activity:updated', onActivity);\r\n        return () => window.removeEventListener('activity:updated', onActivity);\r\n    }, []);\r\n\r\n    // Events for feed (upcoming/past)\r\n    const [events, setEvents] = useState([]);\r\n    const [eventsLoading, setEventsLoading] = useState(false);\r\n\r\n    const getEventCategory = (eventDate) => {\r\n      const today = new Date();\r\n      today.setHours(0,0,0,0);\r\n      const eventDateObj = new Date(eventDate);\r\n      eventDateObj.setHours(0,0,0,0);\r\n      return eventDateObj >= today ? 'upcoming' : 'past';\r\n    };\r\n\r\n    useEffect(() => {\r\n      const fetchEvents = async () => {\r\n        try {\r\n          setEventsLoading(true);\r\n          const res = await getAllEvents();\r\n          const ev = Array.isArray(res) ? res : (res.events || res);\r\n          setEvents(ev || []);\r\n        } catch (e) {\r\n          console.error('Failed to fetch events', e);\r\n        } finally {\r\n          setEventsLoading(false);\r\n        }\r\n      };\r\n      fetchEvents();\r\n\r\n      const onEventsUpdated = () => fetchEvents();\r\n      window.addEventListener('events:updated', onEventsUpdated);\r\n      window.addEventListener('activity:updated', onEventsUpdated);\r\n      return () => {\r\n        window.removeEventListener('events:updated', onEventsUpdated);\r\n        window.removeEventListener('activity:updated', onEventsUpdated);\r\n      };\r\n    }, []);\r\n\r\n    const handleGivePoints = () => {\r\n        setShowGivePointsModal(true);\r\n    };\r\n\r\n    const handleLike = async (id) => {\r\n        try {\r\n            await toggleLike(id);\r\n            fetchFeed(); // Refresh to show updated like count and state\r\n        } catch (error) {\r\n            console.error(\"Failed to toggle like\", error);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        if (!window.confirm(\"Are you sure you want to delete this appreciation?\")) return;\r\n        try {\r\n            await deleteAppreciation(id);\r\n            fetchFeed(); // Refresh to remove deleted item\r\n            try { window.dispatchEvent(new CustomEvent('activity:updated')); } catch (e) {}\r\n        } catch (error) {\r\n            console.error(\"Failed to delete appreciation\", error);\r\n            alert(\"Failed to delete. You might not have permission.\");\r\n        }\r\n    };\r\n\r\n    const submitPoints = async () => {\r\n        try {\r\n            if (!givePointsData.recipient_id || !givePointsData.message || (givePointsData.points <= 0 && givePointsData.category !== 'Appreciation')) {\r\n                // Relaxed validation: points can be 0 if it's just an appreciation, but frontend \"Give Points\" implies points.\r\n                // If the user wants just \"Appreciation\", we might need a separate mode. For now, enforcing points.\r\n                if (!givePointsData.points) {\r\n                    alert(\"Please enter points amount.\");\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Check balance (admins can send unlimited points)\r\n            if (parseInt(givePointsData.points, 10) <= 0) {\r\n                alert('Please enter a positive points amount');\r\n                return;\r\n            }\r\n            if (!isAdmin && parseInt(givePointsData.points, 10) > userPoints) {\r\n                alert('Insufficient points to send');\r\n                return;\r\n            }\r\n\r\n            // Call backend API\r\n            const resp = await createAppreciation({\r\n                recipient_id: parseInt(givePointsData.recipient_id),\r\n                title: givePointsData.title,\r\n                category: givePointsData.category,\r\n                message: givePointsData.message,\r\n                points: parseInt(givePointsData.points),\r\n                emoji: givePointsData.emoji\r\n            });\r\n\r\n            // If transfer info present, update user points\r\n            if (resp && resp.transfer && resp.transfer.sender) {\r\n                const newPoints = resp.transfer.sender.points || 0;\r\n                setUserPoints(newPoints);\r\n                const localUser = JSON.parse(localStorage.getItem('user') || '{}');\r\n                localStorage.setItem('user', JSON.stringify({ ...localUser, points: newPoints }));\r\n            }\r\n\r\n            alert(`Successfully sent ${givePointsData.points} points!`);\r\n            setShowGivePointsModal(false);\r\n            setGivePointsData({\r\n                recipient_id: '',\r\n                recipient_email: '',\r\n                title: 'Appreciation',\r\n                category: 'Hard Work',\r\n                message: '',\r\n                points: 0,\r\n                emoji: 'üëè'\r\n            });\r\n            // Refresh feed to show new card\r\n            fetchFeed();\r\n            // Notify other pages to refresh points and leaderboard\r\n            try { window.dispatchEvent(new CustomEvent('activity:updated')); } catch (e) {}\r\n            // Notify other pages\r\n            try { window.dispatchEvent(new CustomEvent('activity:updated')); } catch (e) {}\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert('Failed to send points: ' + (error.message || JSON.stringify(error)));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-4 sm:p-8\">\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <div>\r\n                        <button\r\n                            onClick={onNavigateBack}\r\n                            className=\"text-gray-600 hover:text-gray-800 mb-2\"\r\n                        >\r\n                            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n                            </svg>\r\n                        </button>\r\n                        <h1 className=\"text-xl font-bold text-[#266ECD]\">Give Points & Appreciate</h1>\r\n                        <p className=\"text-gray-600\">Recognize your colleagues' hard work.</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={handleGivePoints}\r\n                        className=\"bg-[#266ECD] text-white px-6 py-2 rounded-xl font-bold shadow-lg hover:bg-blue-700 transition-all flex items-center gap-2\"\r\n                    >\r\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\r\n                        </svg>\r\n                        Give Points\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    {/* Main Feed Column */}\r\n                    <div className=\"lg:col-span-2 space-y-6\">\r\n                        {/* Give Points Banner */}\r\n                        <div className=\"flex flex-col items-center justify-center py-8 bg-white rounded-xl shadow-sm border border-gray-100\">\r\n                            <h2 className=\"text-xl font-bold text-gray-900 mb-2\">Send Appreciation</h2>\r\n                            <p className=\"text-gray-500 mb-4 text-center max-w-md text-sm\">\r\n                                Share points and a message to recognize someone's contribution.\r\n                            </p>\r\n                            <button\r\n                                onClick={handleGivePoints}\r\n                                className=\"bg-[#266ECD] text-white px-6 py-2 rounded-xl font-bold shadow-lg hover:bg-blue-700 hover:scale-105 transition-all flex items-center gap-2\"\r\n                            >\r\n                                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\r\n                                </svg>\r\n                                Give Points\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Dynamic Feed */}\r\n                        <div className=\"space-y-6\">\r\n                            {appreciations.filter(a => a.points > 0).length === 0 ? (\r\n                                <div className=\"text-center py-12 bg-white rounded-xl border border-gray-100 shadow-sm\">\r\n                                    <p className=\"text-gray-500\">No points awarded yet. Be the first to give points!</p>\r\n                                </div>\r\n                            ) : (\r\n                                appreciations\r\n                                    .filter(appreciation => appreciation.points > 0)\r\n                                    .map((appreciation) => (\r\n                                        <PointsCard\r\n                                            key={appreciation.id}\r\n                                            appreciation={appreciation}\r\n                                            onLike={() => handleLike(appreciation.id)}\r\n                                            onDelete={() => handleDelete(appreciation.id)}\r\n                                        />\r\n                                    ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right Sidebar (Restored) */}\r\n                    <div className=\"space-y-6\">\r\n                        {/* New Point Alert */}\r\n                        <div className=\"bg-white rounded-2xl shadow-md p-6\">\r\n                            <h3 className=\"text-lg font-bold text-[#266ECD] mb-4\">Your Points</h3>\r\n                            <div className=\"flex items-center gap-3 mb-4\">\r\n                                <div className=\"text-5xl font-bold text-[#266ECD]\">{userPoints?.toLocaleString() || 0}</div>\r\n                                <div className=\"w-10 h-10 rounded-full bg-[#266ECD] flex items-center justify-center\">\r\n                                    <svg className=\"w-6 h-6 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                                    </svg>\r\n                                </div>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-600 mb-4\">Reward points balance</p>\r\n                            <button className=\"w-full bg-[#266ECD] text-white px-6 py-2.5 rounded-xl font-bold hover:bg-opacity-90 transition-all shadow-lg\">\r\n                                <Link to=\"/redemption\">View Redemption Center</Link>\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Upcoming Training Session */}\r\n                        <div className=\"bg-white rounded-2xl shadow-md p-6\">\r\n                            <h3 className=\"text-lg font-bold text-[#266ECD] mb-4\">Don't Miss Out! Upcoming Training Session</h3>\r\n                            <div className=\"space-y-2 mb-5\">\r\n                                <p className=\"text-sm text-gray-700\">\r\n                                    <span className=\"font-bold\">Date:</span> 29 Oct\r\n                                </p>\r\n                                <p className=\"text-sm text-gray-700\">\r\n                                    <span className=\"font-bold\">Time:</span> 9:00 AM - 12:00 PM\r\n                                </p>\r\n                            </div>\r\n                            <button className=\"w-full bg-[#266ECD] text-white px-6 py-2.5 rounded-xl font-bold hover:bg-opacity-90 transition-all shadow-lg\">\r\n                                Register\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Upcoming Events (dynamic) */}\r\n                        <div className=\"bg-white rounded-2xl shadow-md p-6\">\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <h3 className=\"font-bold text-gray-900 flex items-center gap-2\">\r\n                                    <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                        <path fillRule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\" clipRule=\"evenodd\" />\r\n                                    </svg>\r\n                                    Upcoming Events\r\n                                </h3>\r\n                            </div>\r\n                            <div className=\"space-y-4\">\r\n                                {eventsLoading ? (\r\n                                  <p className=\"text-sm text-gray-500\">Loading events...</p>\r\n                                ) : events.filter(e => getEventCategory(e.event_date) === 'upcoming').length === 0 ? (\r\n                                  <p className=\"text-sm text-gray-500\">No upcoming events</p>\r\n                                ) : (\r\n                                  events.filter(e => getEventCategory(e.event_date) === 'upcoming')\r\n                                    .sort((a,b) => new Date(a.event_date) - new Date(b.event_date))\r\n                                    .slice(0,3)\r\n                                    .map(ev => (\r\n                                      <div className=\"flex justify-between items-start\" key={ev.id}>\r\n                                        <div>\r\n                                          <p className=\"text-sm font-semibold text-gray-900\">{ev.title}</p>\r\n                                          <p className=\"text-xs text-gray-500\">{ev.start_time || ''}{ev.end_time ? ` - ${ev.end_time}` : ''}</p>\r\n                                        </div>\r\n                                        <span className=\"text-sm font-bold text-gray-900\">{`${ev.attendee_count ?? 0} attending`}</span>\r\n                                      </div>\r\n                                    ))\r\n                                )}\r\n                                <Link to=\"/event\" className=\"text-[#266ECD] text-sm font-semibold hover:underline\">More...</Link>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Give Points Modal */}\r\n            {showGivePointsModal && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-white rounded-2xl w-full max-w-lg p-6 relative animate-in fade-in zoom-in duration-200\">\r\n                        <button\r\n                            onClick={() => setShowGivePointsModal(false)}\r\n                            className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600\"\r\n                        >\r\n                            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                            </svg>\r\n                        </button>\r\n                        <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Give Points</h2>\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">To</label>\r\n                                <select\r\n                                    className=\"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#266ECD] outline-none\"\r\n                                    value={givePointsData.recipient_id}\r\n                                    onChange={e => setGivePointsData({ ...givePointsData, recipient_id: e.target.value })}\r\n                                >\r\n                                    <option value=\"\">Select a colleague...</option>\r\n                                    {users.map(user => (\r\n                                        <option key={user.id} value={user.id}>\r\n                                            {user.fullname} ({user.email})\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Points</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    className=\"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#266ECD] outline-none\"\r\n                                    placeholder=\"e.g., 100\"\r\n                                    value={givePointsData.points}\r\n                                    onChange={e => setGivePointsData({ ...givePointsData, points: e.target.value })}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Message</label>\r\n                                <textarea\r\n                                    className=\"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#266ECD] outline-none h-24 resize-none\"\r\n                                    placeholder=\"Write your appreciation...\"\r\n                                    value={givePointsData.message}\r\n                                    onChange={e => setGivePointsData({ ...givePointsData, message: e.target.value })}\r\n                                />\r\n                            </div>\r\n                            <button\r\n                                onClick={submitPoints}\r\n                                disabled={!givePointsData.recipient_id || !givePointsData.points || (!isAdmin && (parseInt(givePointsData.points || 0, 10) > userPoints))}\r\n                                className={`w-full py-3 rounded-xl font-bold transition shadow-lg ${(!givePointsData.recipient_id || !givePointsData.points || (!isAdmin && (parseInt(givePointsData.points || 0, 10) > userPoints))) ? 'bg-gray-300 text-gray-600 cursor-not-allowed' : 'bg-[#266ECD] text-white hover:bg-opacity-90'}`}\r\n                            >\r\n                                {(!isAdmin && parseInt(givePointsData.points || 0, 10) > userPoints) ? 'Insufficient points' : 'Send Points'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Subcomponents ---\r\n\r\n// 1. Points Card (Visually distinct for points transactions)\r\nconst PointsCard = ({ appreciation, onLike, onDelete }) => {\r\n    return (\r\n        <div className=\"bg-white rounded-xl shadow-md overflow-hidden border-2 border-orange-100\">\r\n            <div className=\"p-6\">\r\n                <div className=\"flex justify-between items-start mb-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-12 h-12 rounded-full bg-gradient-to-r from-orange-400 to-red-500 text-white flex items-center justify-center font-bold text-xl\">\r\n                            {appreciation.points}\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-lg font-bold text-gray-900\">\r\n                                <span className=\"text-[#266ECD]\">{appreciation.sender_name}</span>\r\n                                <span className=\"font-normal text-gray-500 mx-2\">rewarded</span>\r\n                                <span className=\"text-[#266ECD]\">{appreciation.recipient_name}</span>\r\n                            </p>\r\n                            <p className=\"text-sm text-gray-500\">{new Date(appreciation.created_at).toLocaleDateString()}</p>\r\n                        </div>\r\n                    </div>\r\n                    {/* Delete Button - visible to the sender or Admin */}\r\n                    {(() => {\r\n                        const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\r\n                        if (currentUser && currentUser.id && (currentUser.id === appreciation.sender_id || currentUser.role === 'Admin')) {\r\n                            return (\r\n                                <button\r\n                                    onClick={onDelete}\r\n                                    className=\"text-gray-400 hover:text-red-500 transition-colors p-1\"\r\n                                    title=\"Delete Post\"\r\n                                >\r\n                                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                    </svg>\r\n                                </button>\r\n                            );\r\n                        }\r\n                        return null;\r\n                    })()} \r\n                </div>\r\n\r\n                <div className=\"bg-orange-50 p-4 rounded-xl border border-orange-100\">\r\n                    <p className=\"text-gray-800 font-medium italic\">\"{appreciation.message}\"</p>\r\n                    <div className=\"mt-3 flex gap-2\">\r\n                        <span className=\"text-xs font-bold text-orange-600 bg-orange-100 px-2 py-1 rounded-full uppercase tracking-wide\">\r\n                            {appreciation.category}\r\n                        </span>\r\n                        <span>{appreciation.emoji}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Action Bar */}\r\n                <div className=\"flex items-center gap-6 mt-4 pt-4 border-t border-orange-50\">\r\n                    <button\r\n                        onClick={onLike}\r\n                        className={`flex items-center gap-2 transition-colors ${appreciation.user_liked ? 'text-red-500' : 'text-gray-500 hover:text-red-500'}`}\r\n                    >\r\n                        <svg className={`w-6 h-6 ${appreciation.user_liked ? 'fill-current' : 'fill-none stroke-current'}`} viewBox=\"0 0 24 24\" strokeWidth={2}>\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\r\n                        </svg>\r\n                        <span className=\"text-sm font-medium\">{appreciation.likes_count || 0} Likes</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <CommentSection appreciation={appreciation} />\r\n        </div>\r\n    );\r\n};\r\n\r\n// 2. Appreciation Card (Simpler visual style for general recognition)\r\nconst AppreciationCard = ({ appreciation }) => {\r\n    return (\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n            <div className=\"flex items-start gap-4 mb-4\">\r\n                <div className=\"w-10 h-10 rounded-full bg-blue-100 text-[#266ECD] flex items-center justify-center font-bold\">\r\n                    {appreciation.sender_name ? appreciation.sender_name[0] : 'A'}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                    <p className=\"text-gray-900\">\r\n                        <span className=\"font-bold text-[#266ECD]\">{appreciation.sender_name}</span> appreciated <span className=\"font-bold text-[#266ECD]\">{appreciation.recipient_name}</span>\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">{new Date(appreciation.created_at).toLocaleDateString()}</p>\r\n                    <p className=\"mt-2 text-gray-800\">{appreciation.message}</p>\r\n                    <div className=\"mt-2 flex gap-2\">\r\n                        <span className=\"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded\">#{appreciation.category}</span>\r\n                        <span>{appreciation.emoji}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <CommentSection appreciation={appreciation} />\r\n        </div>\r\n    );\r\n};\r\n\r\n// Shared Comment Section\r\nconst CommentSection = ({ appreciation }) => {\r\n    const [comments, setComments] = useState([]);\r\n    const [showComments, setShowComments] = useState(false);\r\n    const [newComment, setNewComment] = useState('');\r\n\r\n    const fetchComments = async () => {\r\n        try {\r\n            const response = await getComments(appreciation.id);\r\n            if (response && response.data) setComments(response.data);\r\n            else if (Array.isArray(response)) setComments(response);\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    const toggle = () => {\r\n        if (!showComments) fetchComments();\r\n        setShowComments(!showComments);\r\n    };\r\n\r\n    const post = async () => {\r\n        if (!newComment.trim()) return;\r\n        try {\r\n            await addComment(appreciation.id, newComment);\r\n            setNewComment('');\r\n            fetchComments(); // Refresh comments\r\n        } catch (error) {\r\n            console.error(\"Failed to post comment\", error);\r\n            alert(\"Failed to post comment\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"border-t border-gray-100 px-6 py-2\">\r\n            <div className=\"flex gap-4\">\r\n                <button onClick={toggle} className=\"text-sm text-gray-500 font-medium hover:text-[#266ECD]\">\r\n                    Comments ({appreciation.comments_count || 0})\r\n                </button>\r\n            </div>\r\n            {showComments && (\r\n                <div className=\"mt-4 space-y-4 pb-4\">\r\n                    {comments.map(c => (\r\n                        <div key={c.id} className=\"bg-gray-50 p-3 rounded-lg text-sm\">\r\n                            <span className=\"font-bold text-gray-900\">{c.user_name}</span>: {c.comment}\r\n                        </div>\r\n                    ))}\r\n                    <div className=\"flex gap-2\">\r\n                        <input\r\n                            className=\"flex-1 border rounded px-3 py-1 text-sm outline-none focus:border-[#266ECD]\"\r\n                            placeholder=\"Add a comment...\"\r\n                            value={newComment}\r\n                            onChange={e => setNewComment(e.target.value)}\r\n                        />\r\n                        <button onClick={post} className=\"text-[#266ECD] font-bold text-sm\">Post</button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FeedPage1;","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Feed\\FeedPage2.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":163,"column":91,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":92},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":163,"column":94,"nodeType":"BlockStatement","messageId":"unexpected","endLine":163,"endColumn":96,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[6470,6470],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport {\r\n    getAllAppreciations,\r\n    toggleLike,\r\n    deleteAppreciation,\r\n    addComment,\r\n    getComments\r\n} from '../../services/appreciationService';\r\n// Ensure you have created this file in src/services/meetingService.js\r\nimport { getUpcomingMeetings } from '../../services/meetingService';\r\nimport { Link } from 'react-router-dom';\r\nimport { getAllEvents } from '../../services/event.service';\r\nimport Promotion from '../../pages/Promotion';\r\n\r\nconst FeedPage2 = ({ onNavigateToPage2, onNavigateToPage3, onNavigateToCreateForm }) => {\r\n    const [appreciations, setAppreciations] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [commentInputs, setCommentInputs] = useState({});\r\n    const [showComments, setShowComments] = useState({});\r\n    const [comments, setComments] = useState({});\r\n    const [meetings, setMeetings] = useState([]);\r\n    const [isAdmin, setIsAdmin] = useState(false);\r\n    const [userPoints, setUserPoints] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const userStr = localStorage.getItem(\"user\");\r\n        if (userStr) {\r\n            const user = JSON.parse(userStr);\r\n            setIsAdmin(user.role === 'Admin');\r\n        }\r\n        fetchAppreciations();\r\n        fetchMeetings();\r\n\r\n        const fetchUserPoints = async () => {\r\n            try {\r\n                const u = JSON.parse(localStorage.getItem('user') || '{}');\r\n                if (!u || !u.id) return;\r\n                const token = localStorage.getItem('token');\r\n                const res = await fetch(`${import.meta.env.VITE_API_BASE || 'http://localhost:3000'}/api/users/${u.id}`, { headers: { Authorization: token ? `Bearer ${token}` : '' } });\r\n                if (!res.ok) return;\r\n                const data = await res.json();\r\n                setUserPoints(data.user?.points || 0);\r\n                if (data.user) {\r\n                    localStorage.setItem('user', JSON.stringify(data.user));\r\n                }\r\n            } catch (err) {\r\n                console.error('Failed to fetch user points', err);\r\n            }\r\n        };\r\n\r\n        fetchUserPoints();\r\n        const onActivity = () => fetchUserPoints();\r\n        window.addEventListener('activity:updated', onActivity);\r\n        return () => window.removeEventListener('activity:updated', onActivity);\r\n    }, []);\r\n\r\n    const fetchAppreciations = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await getAllAppreciations('feed');\r\n            if (response.success) {\r\n                setAppreciations(response.data);\r\n            }\r\n        } catch (err) {\r\n            setError('Failed to load appreciations');\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchMeetings = async () => {\r\n        try {\r\n            const res = await getUpcomingMeetings();\r\n\r\n            const meetingsData =\r\n                res?.data?.data ||\r\n                res?.data ||\r\n                res?.meetings ||\r\n                [];\r\n\r\n            if (Array.isArray(meetingsData)) {\r\n                // 1. Get today's date\r\n                const today = new Date();\r\n                today.setHours(0, 0, 0, 0);\r\n\r\n                // 2. Filter: Keep only future/today meetings\r\n                const upcomingOnly = meetingsData.filter((meeting) => {\r\n                    const meetingDate = new Date(meeting.meeting_date);\r\n                    // Reset meeting time to midnight for accurate date comparison\r\n                    meetingDate.setHours(0, 0, 0, 0);\r\n                    return meetingDate >= today;\r\n                });\r\n\r\n                // 3. Sort: Compare Date AND Time\r\n                upcomingOnly.sort((a, b) => {\r\n                    // Create Date objects for sorting\r\n                    const dateA = new Date(a.meeting_date);\r\n                    const dateB = new Date(b.meeting_date);\r\n\r\n                    // If dates are different, sort by date\r\n                    if (dateA.getTime() !== dateB.getTime()) {\r\n                        return dateA - dateB;\r\n                    }\r\n\r\n                    // If dates are the same, compare times (HH:MM:SS)\r\n                    // We treat the time strings like \"11:00:00\" vs \"19:00:00\"\r\n                    if (a.start_time < b.start_time) return -1;\r\n                    if (a.start_time > b.start_time) return 1;\r\n                    return 0;\r\n                });\r\n\r\n                // 4. Update state with the nearest meeting at index 0\r\n                setMeetings(upcomingOnly);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to load meetings:', err);\r\n        }\r\n    };\r\n\r\n    // Events for feed\r\n    const [events, setEvents] = useState([]);\r\n    const [eventsLoading, setEventsLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchEvents = async () => {\r\n            try {\r\n                setEventsLoading(true);\r\n                const res = await getAllEvents();\r\n                const ev = Array.isArray(res) ? res : (res.events || res);\r\n                setEvents(ev || []);\r\n            } catch (err) {\r\n                console.error('Failed to fetch events', err);\r\n            } finally {\r\n                setEventsLoading(false);\r\n            }\r\n        };\r\n        fetchEvents();\r\n        const onEventsUpdated = () => fetchEvents();\r\n        window.addEventListener('events:updated', onEventsUpdated);\r\n        window.addEventListener('activity:updated', onEventsUpdated);\r\n        return () => {\r\n            window.removeEventListener('events:updated', onEventsUpdated);\r\n            window.removeEventListener('activity:updated', onEventsUpdated);\r\n        };\r\n    }, []);\r\n\r\n    const handleLike = async (appreciationId) => {\r\n        try {\r\n            await toggleLike(appreciationId);\r\n            fetchAppreciations();\r\n        } catch (err) {\r\n            console.error('Error toggling like:', err);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (appreciationId) => {\r\n        if (window.confirm('Are you sure you want to delete this appreciation?')) {\r\n            try {\r\n                await deleteAppreciation(appreciationId);\r\n                setAppreciations(prev => prev.filter(a => a.id !== appreciationId));\r\n                try { window.dispatchEvent(new CustomEvent('activity:updated')); } catch (e) {}\r\n            } catch (err) {\r\n                alert('Failed to delete appreciation. You can only delete your own posts.');\r\n                console.error(err);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleCommentChange = (appreciationId, value) => {\r\n        setCommentInputs(prev => ({\r\n            ...prev,\r\n            [appreciationId]: value\r\n        }));\r\n    };\r\n\r\n    const handleAddComment = async (appreciationId) => {\r\n        const commentText = commentInputs[appreciationId];\r\n        if (!commentText || commentText.trim() === '') return;\r\n\r\n        try {\r\n            await addComment(appreciationId, commentText);\r\n            setCommentInputs(prev => ({\r\n                ...prev,\r\n                [appreciationId]: ''\r\n            }));\r\n            fetchAppreciations();\r\n            if (showComments[appreciationId]) {\r\n                fetchComments(appreciationId);\r\n            }\r\n        } catch (err) {\r\n            alert('Failed to add comment');\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    const toggleCommentsView = async (appreciationId) => {\r\n        const isCurrentlyShown = showComments[appreciationId];\r\n\r\n        setShowComments(prev => ({\r\n            ...prev,\r\n            [appreciationId]: !isCurrentlyShown\r\n        }));\r\n\r\n        if (!isCurrentlyShown) {\r\n            fetchComments(appreciationId);\r\n        }\r\n    };\r\n\r\n    const fetchComments = async (appreciationId) => {\r\n        try {\r\n            const response = await getComments(appreciationId);\r\n            if (response.success) {\r\n                setComments(prev => ({\r\n                    ...prev,\r\n                    [appreciationId]: response.data\r\n                }));\r\n            }\r\n        } catch (err) {\r\n            console.error('Error fetching comments:', err);\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        if (!dateString) return '';\r\n        const date = new Date(dateString);\r\n        return date.toLocaleDateString('en-US', { month: '2-digit', day: '2-digit', year: 'numeric' });\r\n    };\r\n\r\n    const formatTime = (dateString) => {\r\n        if (!dateString) return '';\r\n        const date = new Date(dateString);\r\n        return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-4 sm:p-8\">\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <div>\r\n                        <h1 className=\"text-xl font-bold text-[#266ECD]\">Feed</h1>\r\n                        <p className=\"text-sm text-gray-500 mt-1\">Stay Connected and Informed: Your Hub for Updates and Interaction</p>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3\">\r\n                        {(\r\n                            <button\r\n                                onClick={onNavigateToCreateForm}\r\n                                className=\"flex items-center gap-2 bg-[#266ECD] text-white px-4 py-2 rounded-lg font-semibold hover:bg-opacity-90 transition-all shadow-md\"\r\n                            >\r\n                                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n                                </svg>\r\n                                <span>New</span>\r\n                            </button>\r\n                        )}\r\n                        <button\r\n                            onClick={fetchAppreciations}\r\n                            className=\"text-red-500 hover:text-red-600\"\r\n                        >\r\n                            <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                <path fillRule=\"evenodd\" d=\"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z\" clipRule=\"evenodd\" />\r\n                            </svg>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    {/* Main Content */}\r\n                    <div className=\"lg:col-span-2 space-y-6\">\r\n                        {/* Tabs */}\r\n                        <div className=\"flex gap-8 border-b-2 border-gray-200\">\r\n                            <button\r\n                                onClick={onNavigateToPage3}\r\n                                className=\"pb-3 text-gray-900 font-semibold border-b-4 border-[#266ECD] -mb-0.5\"\r\n                            >\r\n                                Employee of the Month\r\n                            </button>\r\n                            <button className=\"pb-3 text-gray-500 hover:text-gray-900 font-medium\">\r\n                                <Link to=\"/promotion\">Promotions</Link>\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Loading State */}\r\n                        {loading && (\r\n                            <div className=\"text-center py-12\">\r\n                                <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#266ECD]\"></div>\r\n                                <p className=\"mt-4 text-gray-600\">Loading appreciations...</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Error State */}\r\n                        {error && (\r\n                            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Appreciations List */}\r\n                        {!loading && !error && appreciations.length === 0 && (\r\n                            <div className=\"bg-white rounded-2xl shadow-md p-12 text-center\">\r\n                                <p className=\"text-gray-500 text-lg\">No appreciations yet. Be the first to create one!</p>\r\n                                {isAdmin && (\r\n                                    <button\r\n                                        onClick={onNavigateToCreateForm}\r\n                                        className=\"mt-4 bg-[#266ECD] text-white px-6 py-2 rounded-lg font-semibold hover:bg-opacity-90\"\r\n                                    >\r\n                                        Create Appreciation\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                        {!loading && appreciations.map((appreciation) => (\r\n                            <div key={appreciation.id} className=\"bg-white rounded-2xl shadow-md overflow-hidden\">\r\n                                <div className=\"p-6\">\r\n                                    <div className=\"flex items-start justify-between mb-4\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"w-12 h-12 rounded-full bg-linear-to-br from-blue-400 to-indigo-500 flex items-center justify-center text-white font-bold\">\r\n                                                {appreciation.sender_name?.charAt(0) || 'U'}\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"font-bold text-gray-900\">{appreciation.sender_name}</p>\r\n                                                <p className=\"text-sm text-gray-500\">{appreciation.sender_email}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <span className=\"bg-purple-100 text-purple-700 px-4 py-1.5 rounded-full text-sm font-bold flex items-center gap-1\">\r\n                                                APPRECIATED üéâ\r\n                                            </span>\r\n                                            <div className=\"w-12 h-12 rounded-full bg-linear-to-br from-orange-400 to-red-500 flex items-center justify-center text-white font-bold\">\r\n                                                {appreciation.recipient_name?.charAt(0) || 'U'}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center gap-3 mb-5\">\r\n                                        <span className=\"text-sm text-gray-600\">to</span>\r\n                                        <div className=\"w-10 h-10 rounded-full bg-linear-to-br from-orange-400 to-red-500 flex items-center justify-center text-white font-bold\">\r\n                                            {appreciation.recipient_name?.charAt(0) || 'U'}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-bold text-gray-900\">{appreciation.recipient_name}</p>\r\n                                            <p className=\"text-sm text-gray-500\">{appreciation.recipient_email}</p>\r\n                                        </div>\r\n                                        <div className=\"ml-auto flex items-center gap-3 text-sm text-gray-500\">\r\n                                            <span>{formatDate(appreciation.created_at)}</span>\r\n                                            <span>{formatTime(appreciation.created_at)}</span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"bg-white border border-gray-200 rounded-2xl p-6 mb-5 shadow-md\">\r\n                                        <div className=\"flex items-start gap-3 mb-3\">\r\n                                            <span className=\"text-3xl\">{appreciation.emoji}</span>\r\n                                            <h3 className=\"text-xl font-bold text-teal-900\">{appreciation.title}</h3>\r\n                                        </div>\r\n                                        <div className=\"mb-4\">\r\n                                            <span className=\"bg-teal-200 text-teal-900 px-4 py-1.5 rounded-full text-sm font-bold\">\r\n                                                {appreciation.category}\r\n                                            </span>\r\n                                        </div>\r\n                                        <p className=\"text-gray-700 text-sm leading-relaxed\">\r\n                                            {appreciation.message}\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center gap-6\">\r\n                                        <button\r\n                                            onClick={() => handleLike(appreciation.id)}\r\n                                            className={`flex items-center gap-2 ${appreciation.user_liked\r\n                                                ? 'text-purple-700'\r\n                                                : 'text-gray-500 hover:text-purple-700'\r\n                                                }`}\r\n                                        >\r\n                                            <svg className=\"w-6 h-6 fill-current\" viewBox=\"0 0 20 20\">\r\n                                                <path d=\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\" />\r\n                                            </svg>\r\n                                            <span className=\"font-bold text-base\">{appreciation.likes_count || 0}</span>\r\n                                        </button>\r\n                                        <div className=\"flex items-center gap-3 text-sm text-gray-500\">\r\n                                            {appreciation.points > 0 && (\r\n                                                <span className=\"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-semibold\">+{appreciation.points} pts</span>\r\n                                            )}\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => toggleCommentsView(appreciation.id)}\r\n                                            className=\"flex items-center gap-2 text-gray-500 hover:text-gray-700\"\r\n                                        >\r\n                                            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\r\n                                            </svg>\r\n                                            <span className=\"font-medium\">{appreciation.comments_count || 0}</span>\r\n                                        </button>\r\n                                        {(() => {\r\n                                            const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\r\n                                            if (currentUser && currentUser.id && (currentUser.id === appreciation.sender_id || currentUser.role === 'Admin')) {\r\n                                                return (\r\n                                                    <button\r\n                                                        onClick={() => handleDelete(appreciation.id)}\r\n                                                        className=\"ml-auto text-red-500 hover:text-red-700\"\r\n                                                        title=\"Delete appreciation\"\r\n                                                    >\r\n                                                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                                        </svg>\r\n                                                    </button>\r\n                                                );\r\n                                            }\r\n                                            return null;\r\n                                        })()} \r\n                                    </div>\r\n\r\n                                    {/* Comments Section */}\r\n                                    {showComments[appreciation.id] && (\r\n                                        <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n                                            <h4 className=\"font-bold text-gray-900 mb-4\">Comments</h4>\r\n\r\n                                            {/* Comment Input */}\r\n                                            <div className=\"flex gap-2 mb-4\">\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={commentInputs[appreciation.id] || ''}\r\n                                                    onChange={(e) => handleCommentChange(appreciation.id, e.target.value)}\r\n                                                    onKeyPress={(e) => {\r\n                                                        if (e.key === 'Enter') {\r\n                                                            handleAddComment(appreciation.id);\r\n                                                        }\r\n                                                    }}\r\n                                                    placeholder=\"Add a comment...\"\r\n                                                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#266ECD] focus:border-transparent outline-none\"\r\n                                                />\r\n                                                <button\r\n                                                    onClick={() => handleAddComment(appreciation.id)}\r\n                                                    className=\"bg-[#266ECD] text-white px-4 py-2 rounded-lg font-semibold hover:bg-opacity-90\"\r\n                                                >\r\n                                                    Post\r\n                                                </button>\r\n                                            </div>\r\n\r\n                                            {/* Comments List */}\r\n                                            <div className=\"space-y-3\">\r\n                                                {comments[appreciation.id]?.map((comment) => (\r\n                                                    <div key={comment.id} className=\"bg-gray-50 rounded-lg p-3\">\r\n                                                        <div className=\"flex items-start justify-between\">\r\n                                                            <div>\r\n                                                                <p className=\"font-semibold text-sm text-gray-900\">{comment.user_name}</p>\r\n                                                                <p className=\"text-sm text-gray-700 mt-1\">{comment.comment}</p>\r\n                                                                <p className=\"text-xs text-gray-500 mt-1\">\r\n                                                                    {formatDate(comment.created_at)} at {formatTime(comment.created_at)}\r\n                                                                </p>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                ))}\r\n                                                {(!comments[appreciation.id] || comments[appreciation.id].length === 0) && (\r\n                                                    <p className=\"text-sm text-gray-500 text-center py-4\">No comments yet. Be the first to comment!</p>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Right Sidebar */}\r\n                    <div className=\"space-y-6\">\r\n                        {/* New Point Alert */}\r\n                        <div className=\"bg-white rounded-2xl shadow-md p-6\">\r\n                            <h3 className=\"text-lg font-bold text-[#266ECD] mb-4\">New Point Alert!</h3>\r\n                            <div className=\"flex items-center gap-3 mb-4\">\r\n                                <div className=\"text-5xl font-bold text-[#266ECD]\">{userPoints?.toLocaleString() || 0}</div>\r\n                                <div className=\"w-10 h-10 rounded-full bg-[#266ECD] flex items-center justify-center\">\r\n                                    <svg className=\"w-6 h-6 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                                    </svg>\r\n                                </div>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-600 mb-4\">Reward points balance</p>\r\n                            <button\r\n                                onClick={onNavigateToPage2}\r\n                                className=\"w-full bg-[#266ECD] text-white px-6 py-2.5 rounded-xl font-bold hover:bg-opacity-90 transition-all shadow-lg\"\r\n                            >\r\n                                Attempt\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Don't Miss Out! Upcoming Training Session */}\r\n                        <div className=\"bg-white rounded-2xl shadow-md p-6\">\r\n                            <h3 className=\"text-lg font-bold text-[#266ECD] mb-4\">\r\n                                Don't Miss Out! Upcoming Training Session\r\n                            </h3>\r\n\r\n                            {/* Check if we have at least one meeting */}\r\n                            {meetings.length > 0 ? (\r\n                                <div className=\"space-y-2 mb-5\">\r\n                                    {/* We only render meetings[0] -> The single nearest meeting */}\r\n                                    <p className=\"text-sm font-semibold text-gray-900\">\r\n                                        {meetings[0].title}\r\n                                    </p>\r\n                                    <p className=\"text-sm text-gray-700\">\r\n                                        <span className=\"font-bold\">Date:</span>{\" \"}\r\n                                        {meetings[0].meeting_date ? new Date(meetings[0].meeting_date).toLocaleDateString() : 'TBA'}\r\n                                    </p>\r\n                                    <p className=\"text-sm text-gray-700\">\r\n                                        <span className=\"font-bold\">Time:</span>{\" \"}\r\n                                        {meetings[0].start_time} - {meetings[0].end_time}\r\n                                    </p>\r\n                                </div>\r\n                            ) : (\r\n                                <p className=\"text-sm text-gray-500 mb-5\">No upcoming meetings</p>\r\n                            )}\r\n\r\n                            <button className=\"w-full bg-[#266ECD] text-white px-6 py-2.5 rounded-xl font-bold\">\r\n                                Register\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Upcoming Events (dynamic) */}\r\n                        <div className=\"bg-white rounded-2xl shadow-md p-6\">\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <h3 className=\"font-bold text-gray-900 flex items-center gap-2\">\r\n                                    <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                        <path fillRule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\" clipRule=\"evenodd\" />\r\n                                    </svg>\r\n                                    Upcoming Events\r\n                                </h3>\r\n                            </div>\r\n                            <div className=\"space-y-4\">\r\n                                {eventsLoading ? (\r\n                                    <p className=\"text-sm text-gray-500\">Loading events...</p>\r\n                                ) : events.filter(e => new Date(e.event_date) >= new Date().setHours(0,0,0)).length === 0 ? (\r\n                                    <p className=\"text-sm text-gray-500\">No upcoming events</p>\r\n                                ) : (\r\n                                    events\r\n                                        .filter(e => new Date(e.event_date) >= new Date().setHours(0,0,0))\r\n                                        .sort((a,b) => new Date(a.event_date) - new Date(b.event_date))\r\n                                        .slice(0,4)\r\n                                        .map(ev => (\r\n                                            <div key={ev.id} className=\"flex justify-between items-start\">\r\n                                                <div>\r\n                                                    <p className=\"text-sm font-semibold text-gray-900\">{ev.title}</p>\r\n                                                    <p className=\"text-xs text-gray-500\">{ev.start_time || ''}{ev.end_time ? ` - ${ev.end_time}` : ''}</p>\r\n                                                </div>\r\n                                                <span className=\"text-sm font-bold text-gray-900\">{`${ev.attendee_count ?? 0} attending`}</span>\r\n                                            </div>\r\n                                        ))\r\n                                )}\r\n                                <Link to=\"/event\" className=\"text-[#266ECD] text-sm font-semibold hover:underline\">More...</Link>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FeedPage2;","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Feed\\FeedPage3.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":12,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[628,633],"text":""},"desc":"Remove unused variable 'error'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport * as employeeOfMonthService from '../../services/employeeOfMonthService';\r\nimport { Calendar, Clock, Trophy, Users, Plus, X, Trash2, Award, ChevronRight, ArrowLeft } from 'lucide-react';\r\nimport { getAllEvents } from '../../services/event.service';\r\nimport { Link, useNavigate } from 'react-router-dom'\r\n\r\nconst FeedPage3 = ({ onNavigateBack }) => {\r\n    const [employeeData, setEmployeeData] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [users, setUsers] = useState([]);\r\n    const [error, setError] = useState(null);\r\n\r\n    const [isAdmin, setIsAdmin] = useState(false);\r\n    const [userPoints, setUserPoints] = useState(0);\r\n\r\n    // Form state\r\n    const [formData, setFormData] = useState({\r\n        userId: '',\r\n        description: '',\r\n        month: '',\r\n        teamMembers: [{ userId: '', role: '' }]\r\n    });\r\n\r\n    // Fetch user points and refresh on activity updates\r\n    useEffect(() => {\r\n        const fetchUserPoints = async () => {\r\n            try {\r\n                const u = JSON.parse(localStorage.getItem('user') || '{}');\r\n                if (!u || !u.id) return;\r\n                const token = localStorage.getItem('token');\r\n                const res = await fetch(`${import.meta.env.VITE_API_BASE || 'http://localhost:3000'}/api/users/${u.id}`, { headers: { Authorization: token ? `Bearer ${token}` : '' } });\r\n                if (!res.ok) return;\r\n                const data = await res.json();\r\n                setUserPoints(data.user?.points || 0);\r\n                if (data.user) localStorage.setItem('user', JSON.stringify(data.user));\r\n            } catch (err) {\r\n                console.error('Failed to fetch user points', err);\r\n            }\r\n        };\r\n        fetchUserPoints();\r\n        const onActivity = () => fetchUserPoints();\r\n        window.addEventListener('activity:updated', onActivity);\r\n        return () => window.removeEventListener('activity:updated', onActivity);\r\n    }, []);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const handleBack = () => {\r\n        if (onNavigateBack && typeof onNavigateBack === 'function') onNavigateBack();\r\n        navigate(-1);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const userStr = localStorage.getItem(\"user\");\r\n        if (userStr) {\r\n            const user = JSON.parse(userStr);\r\n            setIsAdmin(user.role === 'Admin');\r\n        }\r\n        fetchEmployeeOfMonth();\r\n    }, []);\r\n\r\n    const fetchEmployeeOfMonth = async () => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            const response = await employeeOfMonthService.getCurrentEmployeeOfMonth();\r\n            if (response.success) {\r\n                setEmployeeData(response.data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching employee of the month:', error);\r\n            setError('Failed to load employee of the month');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            setError(null);\r\n            console.log('Fetching users...');\r\n            const response = await employeeOfMonthService.getAllUsers();\r\n            if (response.success) {\r\n                setUsers(response.users || []);\r\n            } else {\r\n                setUsers([]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching users:', error);\r\n            setUsers([]);\r\n        }\r\n    };\r\n\r\n    const handleOpenModal = async () => {\r\n        setShowModal(true);\r\n        await fetchUsers();\r\n    };\r\n\r\n    // Events for feed\r\n    const [events, setEvents] = useState([]);\r\n    const [eventsLoading, setEventsLoading] = useState(false);\r\n\r\n    const getEventCategory = (eventDate) => {\r\n        const today = new Date();\r\n        today.setHours(0,0,0,0);\r\n        const eventDateObj = new Date(eventDate);\r\n        eventDateObj.setHours(0,0,0,0);\r\n        return eventDateObj >= today ? 'upcoming' : 'past';\r\n    };\r\n\r\n    useEffect(() => {\r\n        const fetchEvents = async () => {\r\n            try {\r\n                setEventsLoading(true);\r\n                const res = await getAllEvents();\r\n                const ev = Array.isArray(res) ? res : (res.events || res);\r\n                setEvents(ev || []);\r\n            } catch (err) {\r\n                console.error('Failed to fetch events', err);\r\n            } finally {\r\n                setEventsLoading(false);\r\n            }\r\n        };\r\n        fetchEvents();\r\n        const onEventsUpdated = () => fetchEvents();\r\n        window.addEventListener('events:updated', onEventsUpdated);\r\n        window.addEventListener('activity:updated', onEventsUpdated);\r\n        return () => {\r\n            window.removeEventListener('events:updated', onEventsUpdated);\r\n            window.removeEventListener('activity:updated', onEventsUpdated);\r\n        };\r\n    }, []);\r\n\r\n    const handleCloseModal = () => {\r\n        setShowModal(false);\r\n        setFormData({\r\n            userId: '',\r\n            description: '',\r\n            month: '',\r\n            teamMembers: [{ userId: '', role: '' }]\r\n        });\r\n    };\r\n\r\n    const handleAddTeamMember = () => {\r\n        setFormData({\r\n            ...formData,\r\n            teamMembers: [...formData.teamMembers, { userId: '', role: '' }]\r\n        });\r\n    };\r\n\r\n    const handleRemoveTeamMember = (index) => {\r\n        const newTeamMembers = formData.teamMembers.filter((_, i) => i !== index);\r\n        setFormData({\r\n            ...formData,\r\n            teamMembers: newTeamMembers\r\n        });\r\n    };\r\n\r\n    const handleTeamMemberChange = (index, field, value) => {\r\n        const newTeamMembers = [...formData.teamMembers];\r\n        newTeamMembers[index][field] = value;\r\n        setFormData({\r\n            ...formData,\r\n            teamMembers: newTeamMembers\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const teamMembers = formData.teamMembers.filter(\r\n                member => member.userId && member.role\r\n            );\r\n\r\n            await employeeOfMonthService.createEmployeeOfMonth(\r\n                parseInt(formData.userId),\r\n                formData.description,\r\n                formData.month,\r\n                teamMembers.map(member => ({\r\n                    userId: parseInt(member.userId),\r\n                    role: member.role\r\n                }))\r\n            );\r\n\r\n            handleCloseModal();\r\n            fetchEmployeeOfMonth();\r\n        } catch (error) {\r\n            console.error('Error creating employee of the month:', error);\r\n            alert('Failed to create employee of the month');\r\n        }\r\n    };\r\n\r\n    const handleDeleteTeamMember = async (teamMemberId) => {\r\n        if (window.confirm('Are you sure you want to remove this team member?')) {\r\n            try {\r\n                await employeeOfMonthService.deleteTeamMember(teamMemberId);\r\n                fetchEmployeeOfMonth();\r\n            } catch (error) {\r\n                console.error('Error deleting team member:', error);\r\n                alert('Failed to delete team member');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDeleteEmployeeOfMonth = async () => {\r\n        if (window.confirm('Are you sure you want to delete the Employee of the Month? This will remove the entire entry and team.')) {\r\n            try {\r\n                await employeeOfMonthService.deleteEmployeeOfMonth(employeeData.id);\r\n                setEmployeeData(null);\r\n            } catch (error) {\r\n                console.error('Error deleting employee of the month:', error);\r\n                alert('Failed to delete employee of the month');\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6 sm:p-10 max-w-[1600px] mx-auto min-h-screen\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between mb-10\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <button onClick={handleBack} className=\"text-gray-500 hover:text-gray-700 p-2 rounded-lg\" aria-label=\"Go back\">\r\n                        <ArrowLeft size={20} />\r\n                    </button>\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold text-[#020839] tracking-tight\">Feed & Recognition</h1>\r\n                        <p className=\"text-gray-500 mt-1\">Celebrate success and stay updated with the team.</p>\r\n                    </div>\r\n                </div>\r\n                {isAdmin && (\r\n                    <button\r\n                        onClick={handleOpenModal}\r\n                        className=\"bg-orange-500 text-white px-6 py-2.5 rounded-xl font-semibold hover:bg-orange-600 transition-all shadow-sm flex items-center gap-2\"\r\n                    >\r\n                        <Plus size={20} />\r\n                        Add New\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-8\">\r\n                {/* Main Content */}\r\n                <div className=\"xl:col-span-2 space-y-8\">\r\n                    {loading ? (\r\n                        <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center\">\r\n                            <div className=\"w-10 h-10 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n                            <p className=\"text-gray-500 font-medium\">Loading recognitions...</p>\r\n                        </div>\r\n                    ) : employeeData ? (\r\n                        <>\r\n                            {/* Employee of the Month Card */}\r\n                            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-8 relative overflow-hidden group\">\r\n                                <div className=\"absolute top-0 left-0 w-full h-2 bg-linear-to-r from-[#020839] to-orange-500\"></div>\r\n\r\n                                {/* Header */}\r\n                                <div className=\"flex justify-between items-start mb-8 z-10 relative\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"bg-orange-100 p-2.5 rounded-lg text-orange-600\">\r\n                                            <Trophy size={24} />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h2 className=\"text-lg font-bold text-[#020839]\">Employee of the Month</h2>\r\n                                            <p className=\"text-sm text-gray-400 font-medium uppercase tracking-wider\">{employeeData.month}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    {isAdmin && (\r\n                                    <button\r\n                                        onClick={handleDeleteEmployeeOfMonth}\r\n                                        className=\"text-gray-400 hover:text-red-500 p-2 rounded-lg hover:bg-red-50 transition-colors\"\r\n                                        title=\"Delete Entry\"\r\n                                    >\r\n                                        <Trash2 size={18} />\r\n                                    </button>\r\n                                    )}  \r\n                                </div>\r\n\r\n                                {/* Featured Employee Content */}\r\n                                <div className=\"flex flex-col items-center justify-center text-center\">\r\n                                    <div className=\"relative mb-6\">\r\n                                        <div className=\"w-40 h-40 rounded-full overflow-hidden border-4 border-white shadow-lg ring-4 ring-orange-50\">\r\n                                            <img\r\n                                                src={`https://i.pravatar.cc/200?u=${employeeData.user_email}`}\r\n                                                alt={employeeData.user_name}\r\n                                                className=\"w-full h-full object-cover\"\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"absolute -bottom-2 -right-2 bg-orange-500 text-white w-10 h-10 rounded-full flex items-center justify-center shadow-lg border-2 border-white\">\r\n                                            <Award size={20} />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <h3 className=\"text-2xl font-bold text-[#020839] mb-2\">{employeeData.user_name}</h3>\r\n\r\n                                    <div className=\"max-w-xl mx-auto mt-4 px-6 py-4 bg-gray-50 rounded-xl border border-gray-100 relative\">\r\n                                        <div className=\"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 bg-gray-50 border-t border-l border-gray-100 transform rotate-45\"></div>\r\n                                        <p className=\"text-gray-600 leading-relaxed italic\">\r\n                                            \"{employeeData.description}\"\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Team Section */}\r\n                            {employeeData.team && employeeData.team.length > 0 && (\r\n                                <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-8\">\r\n                                    <div className=\"flex items-center gap-2 mb-6\">\r\n                                        <Users size={20} className=\"text-[#020839]\" />\r\n                                        <h3 className=\"text-lg font-bold text-[#020839]\">Key Contributors</h3>\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-2 md:grid-cols-3 gap-6\">\r\n                                        {employeeData.team.map((member) => (\r\n                                            <div key={member.id} className=\"relative group bg-gray-50 rounded-xl p-4 border border-gray-100 hover:border-orange-200 transition-colors\">\r\n                                                {isAdmin && (\r\n                                                <button\r\n                                                    onClick={() => handleDeleteTeamMember(member.id)}\r\n                                                    className=\"absolute top-2 right-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                                >\r\n                                                    <X size={14} />\r\n                                                </button>\r\n                                                )} \r\n\r\n                                                <div className=\"flex items-center gap-4\">\r\n                                                    <img\r\n                                                        src={`https://i.pravatar.cc/150?u=${member.user_email}`}\r\n                                                        alt={member.user_name}\r\n                                                        className=\"w-12 h-12 rounded-full object-cover border-2 border-white shadow-sm\"\r\n                                                    />\r\n                                                    <div className=\"min-w-0\">\r\n                                                        <h4 className=\"font-bold text-[#020839] text-sm truncate\">{member.user_name}</h4>\r\n                                                        <p className=\"text-orange-600 text-xs font-medium truncate\">{member.role}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    ) : (\r\n                        <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center\">\r\n                            <div className=\"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                                <Trophy size={32} className=\"text-gray-300\" />\r\n                            </div>\r\n                            <h3 className=\"text-xl font-bold text-[#020839] mb-2\">No Recognition Yet</h3>\r\n                            <p className=\"text-gray-500 mb-8 max-w-sm mx-auto\">Start celebrating your team's success by adding the first Employee of the Month.</p>\r\n                            {isAdmin ? (\r\n                                <button\r\n                                    onClick={handleOpenModal}\r\n                                    className=\"bg-[#020839] text-white px-6 py-2.5 rounded-xl font-semibold hover:bg-opacity-90 transition-all shadow-sm\"\r\n                                >\r\n                                    Recognize Someone\r\n                                </button>\r\n                            ) : (\r\n                                <p className=\"text-sm text-gray-500\">Only admins can create Employee of the Month entries. Contact your administrator if you need to recognize someone.</p>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Right Sidebar */}\r\n                <div className=\"space-y-6\">\r\n                    {/* Points Card */}\r\n                    <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                            <h3 className=\"text-sm font-bold text-gray-500 uppercase tracking-wider\">Reward Points</h3>\r\n                            <div className=\"bg-orange-100 text-orange-700 text-xs font-bold px-2 py-1 rounded-md\">NEW</div>\r\n                        </div>\r\n                        <div className=\"flex items-end gap-2 mb-4\">\r\n                            <span className=\"text-4xl font-bold text-[#020839]\">{userPoints?.toLocaleString() || 0}</span>\r\n                            <span className=\"text-sm text-gray-400 font-medium mb-1\">pts available</span>\r\n                        </div>\r\n                        <Link to=\"/redemption\" className=\"w-full block bg-[#020839] text-white py-2.5 rounded-lg text-sm font-semibold hover:bg-opacity-90 transition-all text-center\">\r\n                            Redeem Rewards\r\n                        </Link>\r\n                    </div>\r\n\r\n                    {/* Upcoming Events (dynamic) */}\r\n                    <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n                        <div className=\"flex items-center gap-2 mb-6 border-b border-gray-100 pb-4\">\r\n                            <Calendar size={18} className=\"text-orange-500\" />\r\n                            <h3 className=\"font-bold text-[#020839]\">Upcoming Events</h3>\r\n                        </div>\r\n                        <div className=\"space-y-4\">\r\n                            {eventsLoading ? (\r\n                                <p className=\"text-sm text-gray-500\">Loading events...</p>\r\n                            ) : events.filter(e => getEventCategory(e.event_date) === 'upcoming').length === 0 ? (\r\n                                <p className=\"text-sm text-gray-500\">No upcoming events</p>\r\n                            ) : (\r\n                                events\r\n                                    .filter(e => getEventCategory(e.event_date) === 'upcoming')\r\n                                    .sort((a,b) => new Date(a.event_date) - new Date(b.event_date))\r\n                                    .slice(0,3)\r\n                                    .map((ev, idx) => (\r\n                                        <div key={ev.id || idx} className=\"flex items-start gap-3 group cursor-pointer\">\r\n                                            <div className=\"flex flex-col items-center\">\r\n                                                <div className={`w-2 h-2 rounded-full ${idx===0? 'bg-blue-500' : idx===1 ? 'bg-orange-500' : 'bg-purple-500'} mt-1.5`}></div>\r\n                                                {idx !== 2 && <div className=\"w-0.5 h-full bg-gray-100 my-1\"></div>}\r\n                                            </div>\r\n                                            <div className=\"flex-1 pb-2\">\r\n                                                <div className=\"flex justify-between items-start mb-1\">\r\n                                                    <p className=\"text-sm font-semibold text-gray-900 group-hover:text-orange-600 transition-colors\">{ev.title}</p>\r\n                                                    <span className=\"text-xs font-bold text-gray-400 bg-gray-50 px-1.5 py-0.5 rounded\">{`${ev.attendee_count ?? 0} attending`}</span>\r\n                                                </div>\r\n                                                <p className=\"text-xs text-gray-500 flex items-center gap-1\">\r\n                                                    <Clock size={10} />\r\n                                                    {ev.start_time || ''}{ev.end_time ? ` - ${ev.end_time}` : ''}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                            )}\r\n                        </div>\r\n                        <Link to=\"/event\" className=\"w-full mt-4 text-xs font-bold text-gray-400 hover:text-[#020839] flex items-center justify-center gap-1 uppercase tracking-wide transition-colors\">\r\n                            View Events <ChevronRight size={12} />\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Modal */}\r\n            {showModal && (\r\n                <div className=\"fixed inset-0 bg-[#020839]/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn\">\r\n                    <div className=\"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-100\">\r\n                        <div className=\"p-8\">\r\n                            <div className=\"flex justify-between items-center mb-6\">\r\n                                <h2 className=\"text-2xl font-bold text-[#020839]\">Add Recognition</h2>\r\n                                <button\r\n                                    onClick={handleCloseModal}\r\n                                    className=\"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-50 transition\"\r\n                                >\r\n                                    <X size={24} />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                                {/* Employee Selection */}\r\n                                <div>\r\n                                    <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\">Core Info</h3>\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                        <div>\r\n                                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Select Employee</label>\r\n                                            <div className=\"relative\">\r\n                                                <select\r\n                                                    value={formData.userId}\r\n                                                    onChange={(e) => setFormData({ ...formData, userId: e.target.value })}\r\n                                                    className=\"w-full pl-4 pr-10 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 appearance-none bg-white font-medium text-gray-700 transition-all\"\r\n                                                    required\r\n                                                >\r\n                                                    <option value=\"\">Choose...</option>\r\n                                                    {users.map((user) => (\r\n                                                        <option key={user.id} value={user.id}>\r\n                                                            {user.fullname}\r\n                                                        </option>\r\n                                                    ))}\r\n                                                </select>\r\n                                                <ChevronRight className=\"absolute right-3 top-3 text-gray-400 rotate-90 w-4 h-4 pointer-events-none\" />\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Month</label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={formData.month}\r\n                                                onChange={(e) => setFormData({ ...formData, month: e.target.value })}\r\n                                                placeholder=\"e.g. December 2025\"\r\n                                                className=\"w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 font-medium text-gray-700 transition-all\"\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Description</label>\r\n                                    <textarea\r\n                                        value={formData.description}\r\n                                        onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                                        placeholder=\"Why does this employee deserve recognition?\"\r\n                                        className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 min-h-[120px] resize-none transition-all\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n\r\n                                {/* Team Members */}\r\n                                <div>\r\n                                    <div className=\"flex justify-between items-center mb-4\">\r\n                                        <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider\">Team Recognition</h3>\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={handleAddTeamMember}\r\n                                            className=\"text-orange-600 text-sm font-semibold hover:text-orange-700 flex items-center gap-1\"\r\n                                        >\r\n                                            <Plus size={16} /> Add Member\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-3\">\r\n                                        {formData.teamMembers.map((member, index) => (\r\n                                            <div key={index} className=\"flex gap-4 items-start bg-gray-50 p-4 rounded-xl border border-gray-100\">\r\n                                                <div className=\"flex-1 grid grid-cols-2 gap-4\">\r\n                                                    <div>\r\n                                                        <label className=\"block text-xs font-semibold text-gray-500 mb-1\">Member</label>\r\n                                                        <select\r\n                                                            value={member.userId}\r\n                                                            onChange={(e) => handleTeamMemberChange(index, 'userId', e.target.value)}\r\n                                                            className=\"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-orange-500 bg-white\"\r\n                                                        >\r\n                                                            <option value=\"\">Select...</option>\r\n                                                            {users.map((user) => (\r\n                                                                <option key={user.id} value={user.id}>{user.fullname}</option>\r\n                                                            ))}\r\n                                                        </select>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <label className=\"block text-xs font-semibold text-gray-500 mb-1\">Role</label>\r\n                                                        <input\r\n                                                            type=\"text\"\r\n                                                            value={member.role}\r\n                                                            onChange={(e) => handleTeamMemberChange(index, 'role', e.target.value)}\r\n                                                            className=\"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-orange-500\"\r\n                                                            placeholder=\"Role in project\"\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                                {formData.teamMembers.length > 1 && (\r\n                                                    <button\r\n                                                        type=\"button\"\r\n                                                        onClick={() => handleRemoveTeamMember(index)}\r\n                                                        className=\"mt-6 text-gray-400 hover:text-red-500\"\r\n                                                    >\r\n                                                        <Trash2 size={16} />\r\n                                                    </button>\r\n                                                )}\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Footer Actions */}\r\n                                <div className=\"flex gap-4 pt-4 border-t border-gray-100\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={handleCloseModal}\r\n                                        className=\"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-100 transition-all\"\r\n                                    >\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        className=\"flex-1 px-6 py-2.5 bg-[#020839] text-white rounded-xl font-bold hover:bg-opacity-90 transition-all shadow-lg shadow-blue-900/20\"\r\n                                    >\r\n                                        Save Recognition\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FeedPage3;","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Profile\\EditProfilePage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":7,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"navigate"},"fix":{"range":[233,264],"text":""},"desc":"Remove unused variable 'navigate'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { Pencil, Camera, Trash2, User } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst EditProfilePage = ({ onCancel, onSave }) => {\r\n    const navigate = useNavigate();\r\n    const [storedUser, setStoredUser] = useState(() => {\r\n        try { return JSON.parse(localStorage.getItem('user') || 'null'); } catch { return null; }\r\n    });\r\n\r\n    const [firstName, setFirstName] = useState('');\r\n    const [lastName, setLastName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [designation, setDesignation] = useState('');\r\n    const [gender, setGender] = useState('');\r\n    const [saving, setSaving] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n    const [success, setSuccess] = useState(\"\");\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n    const [previewUrl, setPreviewUrl] = useState(null);\r\n    const [isRemovingPhoto, setIsRemovingPhoto] = useState(false);\r\n\r\n    const fileInputRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const fullname = storedUser?.fullname || '';\r\n        const parts = fullname.split(' ');\r\n        setFirstName(parts[0] || '');\r\n        setLastName(parts.slice(1).join(' ') || '');\r\n        setEmail(storedUser?.email || '');\r\n        setDesignation(storedUser?.designation || '');\r\n        setGender(storedUser?.gender || '');\r\n        // Use profile_picture if available, otherwise null\r\n        setPreviewUrl(storedUser?.profile_picture || null);\r\n    }, [storedUser]);\r\n\r\n    // ensure inputs are focusable\r\n    const firstNameRef = useRef(null);\r\n    useEffect(() => {\r\n        if (firstNameRef.current) {\r\n            firstNameRef.current.focus();\r\n        }\r\n        const onStorage = (e) => {\r\n            if (e.key === 'user') {\r\n                try { setStoredUser(JSON.parse(e.newValue)); } catch { setStoredUser(null); }\r\n            }\r\n        };\r\n        window.addEventListener('storage', onStorage);\r\n        return () => window.removeEventListener('storage', onStorage);\r\n    }, []);\r\n\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setSelectedFile(file);\r\n            setIsRemovingPhoto(false);\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setPreviewUrl(reader.result);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const handleRemovePhoto = (e) => {\r\n        e.stopPropagation();\r\n        setSelectedFile(null);\r\n        setPreviewUrl(null); // Clear preview to show default icon\r\n        setIsRemovingPhoto(true);\r\n        // Clear file input so same file can be selected again if user changes mind immediately\r\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        setSaving(true);\r\n        setError(\"\");\r\n        setSuccess(\"\");\r\n        const token = localStorage.getItem('token');\r\n        if (!token) {\r\n            setError('You must be logged in to update your profile.');\r\n            setSaving(false);\r\n            return;\r\n        }\r\n        const id = storedUser?.id;\r\n        const fullname = `${firstName} ${lastName} `.trim();\r\n\r\n        const formData = new FormData();\r\n        formData.append('fullname', fullname);\r\n        formData.append('email', email);\r\n        formData.append('designation', designation);\r\n        formData.append('gender', gender || 'Not Specified');\r\n\r\n        if (isRemovingPhoto) {\r\n            formData.append('profile_picture', \"\"); // Send empty string to remove it\r\n        } else if (selectedFile) {\r\n            formData.append('profile_picture', selectedFile);\r\n        }\r\n\r\n        try {\r\n            // Note: When using FormData, do NOT set Content-Type header manually, let browser set it with boundary\r\n            const res = await fetch(`http://localhost:3000/api/users/${id}`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                },\r\n                body: formData\r\n            });\r\n\r\n            const data = await res.json();\r\n            if (!res.ok) {\r\n                setError(data.message || 'Update failed');\r\n                return;\r\n            }\r\n\r\n            // update localStorage and navigate back to profile\r\n            // Ensure we merge existing user data with updates to keep other fields valid\r\n            const newUser = { ...storedUser, ...data.user };\r\n            localStorage.setItem('user', JSON.stringify(newUser));\r\n\r\n            // Dispatch event so Sidebar updates immediately\r\n            window.dispatchEvent(new Event(\"user-updated\"));\r\n\r\n            if (onSave) onSave(newUser);\r\n            setSuccess('Profile updated successfully');\r\n\r\n            // reflect change immediately\r\n            setTimeout(() => window.location.href = '/profile', 800);\r\n        } catch (err) {\r\n            console.error('Update error:', err);\r\n            setError(err.message || 'Failed to update profile');\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-4 sm:p-8 max-w-4xl mx-auto relative z-10\">\r\n            <h1 className=\"text-3xl font-bold text-gray-900 border-b-2 border-gray-900 inline-block mb-12 pb-1\">Edit Profile</h1>\r\n\r\n            <div className=\"flex flex-col items-center mb-12\">\r\n                <div className=\"relative group cursor-pointer\" onClick={() => fileInputRef.current?.click()}>\r\n                    <div className=\"w-32 h-32 rounded-full overflow-hidden bg-gray-200 border-4 border-white shadow-lg relative flex items-center justify-center\">\r\n                        {previewUrl ? (\r\n                            <img src={previewUrl} alt=\"avatar\" className=\"w-full h-full object-cover\" />\r\n                        ) : (\r\n                            <User size={64} className=\"text-gray-400\" />\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Overlay for hover effect */}\r\n                    <div className=\"absolute inset-0 bg-black bg-opacity-30 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                        <Camera className=\"text-white w-8 h-8\" />\r\n                    </div>\r\n\r\n                    <div className=\"absolute bottom-0 right-0 bg-[#266ECD] p-2 rounded-full border-2 border-white text-white z-10\">\r\n                        <Pencil size={16} />\r\n                    </div>\r\n\r\n                    {/* Delete Button */}\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={handleRemovePhoto}\r\n                        className=\"absolute top-0 right-0 bg-red-500 p-2 rounded-full border-2 border-white text-white hover:bg-red-600 transition z-20\"\r\n                        title=\"Remove photo\"\r\n                    >\r\n                        <Trash2 size={16} />\r\n                    </button>\r\n                </div>\r\n                <input\r\n                    type=\"file\"\r\n                    ref={fileInputRef}\r\n                    onChange={handleFileChange}\r\n                    className=\"hidden\"\r\n                    accept=\"image/*\"\r\n                />\r\n\r\n                <h2 className=\"text-xl font-bold text-gray-900 mt-4\">{firstName} {lastName}</h2>\r\n            </div>\r\n\r\n            <div className=\"space-y-6\">\r\n                <h3 className=\"text-lg font-bold text-gray-900 mb-2\">Details</h3>\r\n\r\n                <div className=\"space-y-4\">\r\n                    <div>\r\n                        <label className=\"block text-xs text-gray-500 mb-1\">First Name</label>\r\n                        <input ref={firstNameRef} value={firstName} onChange={(e) => setFirstName(e.target.value)} type=\"text\" className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#266ECD] focus:border-transparent\" />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-xs text-gray-500 mb-1\">Last Name</label>\r\n                        <input value={lastName} onChange={(e) => setLastName(e.target.value)} type=\"text\" className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#266ECD] focus:border-transparent\" />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-xs text-gray-500 mb-1\">Email</label>\r\n                        <input value={email} onChange={(e) => setEmail(e.target.value)} type=\"email\" className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#266ECD] focus:border-transparent\" />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-xs text-gray-500 mb-1\">Designation</label>\r\n                        <select value={designation} onChange={(e) => setDesignation(e.target.value)} className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#266ECD] focus:border-transparent\">\r\n                            <option value=\"\">Select designation</option>\r\n                            <option value=\"HR\">HR</option>\r\n                            <option value=\"Developer\">Developer</option>\r\n                            <option value=\"Manager\">Manager</option>\r\n                            <option value=\"Designer\">Designer</option>\r\n                            <option value=\"Intern\">Intern</option>\r\n                            <option value=\"Other\">Other</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-xs text-gray-500 mb-1\">Gender</label>\r\n                        <select value={gender} onChange={(e) => setGender(e.target.value)} className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#266ECD] focus:border-transparent\">\r\n                            <option value=\"\">Prefer not to say</option>\r\n                            <option value=\"Male\">Male</option>\r\n                            <option value=\"Female\">Female</option>\r\n                            <option value=\"Other\">Other</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    {error && <p className=\"text-red-500 text-sm mb-2\">{error}</p>}\r\n                    {success && <p className=\"text-green-600 text-sm mb-2\">{success}</p>}\r\n                </div>\r\n                <div className=\"flex justify-center gap-4 mt-6 pt-4\">\r\n                    <button onClick={onCancel} className=\"px-8 py-2.5 rounded-full bg-gray-400 text-white font-bold hover:bg-gray-500 transition\">Cancel</button>\r\n                    <button onClick={handleSave} disabled={saving} className=\"px-8 py-2.5 rounded-full bg-[#0066FF] text-white font-bold hover:bg-blue-600 transition\">{saving ? 'Saving...' : 'Save'}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EditProfilePage;\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Profile\\ProfilePage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\Profile\\ProfileView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\auth\\ProtectedRoute.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\layout\\Layout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\layout\\Sidebar.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":14,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'email' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":26,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"email"},"fix":{"range":[729,761],"text":""},"desc":"Remove unused variable 'email'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":84,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link, useLocation } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { User } from \"lucide-react\";\r\n\r\nfunction Sidebar() {\r\n  const location = useLocation();\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const loadUser = () => {\r\n      try {\r\n        const u = JSON.parse(localStorage.getItem(\"user\") || \"null\");\r\n        setUser(u);\r\n      } catch (e) {\r\n        setUser(null);\r\n      }\r\n    };\r\n    loadUser();\r\n\r\n    window.addEventListener(\"user-updated\", loadUser);\r\n    return () => window.removeEventListener(\"user-updated\", loadUser);\r\n  }, []);\r\n\r\n  const fullname = user?.fullname || \"Mariya\";\r\n  const designation = user?.designation || \"HR Manager\";\r\n  const email = user?.email || \"\";\r\n  const avatarSrc = user?.profile_picture;\r\n\r\n  const [taskStats, setTaskStats] = useState({ completed: 0, remaining: 0, overdue: 0, total: 0 });\r\n  const [loadingTasks, setLoadingTasks] = useState(false);\r\n\r\n  const menuItems = [\r\n    { name: \"Dashboard\", path: \"/dashboard\" },\r\n    { name: \"Chat\", path: \"/chat\" },\r\n    { name: \"Employees\", path: \"/employees\" },\r\n    { name: \"Feed\", path: \"/feed\" },\r\n    { name: \"Recognition\", path: \"/recognition\" },\r\n    { name: \"Event\", path: \"/event\" },\r\n    { name: \"Recruitment\", path: \"/recruitment\" },\r\n    { name: \"Profile\", path: \"/profile\" },\r\n    { name: \"Settings\", path: \"/settings\" },\r\n  ];\r\n\r\n  // Determine the tasks link destination based on user role\r\n  const tasksLink = user && user.role === 'Admin' ? '/admin/tasks' : '/profile/tasks';\r\n  const tasksActive = location.pathname.startsWith('/admin/tasks') || location.pathname.startsWith('/profile/tasks');\r\n\r\n  // Load tasks summary\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    (async () => {\r\n      try {\r\n        const { getTasks } = await import('../../services/taskService.js');\r\n        setLoadingTasks(true);\r\n        const res = await getTasks();\r\n        if (!isMounted) return;\r\n        const data = res.data || [];\r\n        const now = new Date();\r\n        const completed = data.filter(t => t.status === 'completed').length;\r\n        const remaining = data.filter(t => t.status !== 'completed').length;\r\n        const overdue = data.filter(t => t.due_date && new Date(t.due_date) < now && t.status !== 'completed').length;\r\n        setTaskStats({ completed, remaining, overdue, total: data.length });\r\n      } catch (err) {\r\n        console.warn('Failed to load task stats', err);\r\n        setTaskStats({ completed: 0, remaining: 0, overdue: 0, total: 0 });\r\n      } finally {\r\n        setLoadingTasks(false);\r\n      }\r\n    })();\r\n\r\n    const onUserUpdated = () => {\r\n      // recalc when user changes\r\n      (async () => {\r\n        try {\r\n          const { getTasks } = await import('../../services/taskService.js');\r\n          setLoadingTasks(true);\r\n          const res = await getTasks();\r\n          const data = res.data || [];\r\n          const now = new Date();\r\n          const completed = data.filter(t => t.status === 'completed').length;\r\n          const remaining = data.filter(t => t.status !== 'completed').length;\r\n          const overdue = data.filter(t => t.due_date && new Date(t.due_date) < now && t.status !== 'completed').length;\r\n          setTaskStats({ completed, remaining, overdue, total: data.length });\r\n        } catch (err) {\r\n          setTaskStats({ completed: 0, remaining: 0, overdue: 0, total: 0 });\r\n        } finally {\r\n          setLoadingTasks(false);\r\n        }\r\n      })();\r\n    };\r\n\r\n    window.addEventListener('user-updated', onUserUpdated);\r\n    window.addEventListener('tasks-updated', onUserUpdated);\r\n    return () => { isMounted = false; window.removeEventListener('user-updated', onUserUpdated); window.removeEventListener('tasks-updated', onUserUpdated); };\r\n  }, []);\r\n\r\n  return (\r\n    <aside className=\"w-64 h-screen fixed left-0 top-0 bg-[#020839] text-white p-6\">\r\n\r\n      {/* LOGO */}\r\n      <h1 className=\"text-3xl font-bold mb-8 tracking-wide\">HRMS</h1>\r\n\r\n      {/* PROFILE */}\r\n      <div className=\"flex items-center gap-3 mb-10\">\r\n        {avatarSrc ? (\r\n          <img\r\n            src={avatarSrc}\r\n            className=\"w-14 h-14 rounded-full object-cover border-2 border-white/20\"\r\n            alt={fullname}\r\n          />\r\n        ) : (\r\n          <div className=\"w-14 h-14 rounded-full bg-white/10 flex items-center justify-center text-white/80 border-2 border-white/20\">\r\n            <User size={24} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"min-w-0\">\r\n          <p className=\"font-semibold truncate max-w-[140px]\">{fullname}</p>\r\n          <p className=\"text-sm opacity-70 capitalize truncate max-w-[140px]\">{designation}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* MENU */}\r\n      <ul className=\"flex flex-col gap-2\">\r\n        {menuItems.map((item) => {\r\n          const isActive = location.pathname === item.path;\r\n          return (\r\n            <li key={item.name}>\r\n              <Link\r\n                to={item.path}\r\n                className={`block px-4 py-2 rounded-lg font-medium ${isActive\r\n                  ? \"bg-white text-[#020839]\"\r\n                  : \"text-white hover:bg-[#1e276d]\"\r\n                  }`}\r\n              >\r\n                {item.name}\r\n              </Link>\r\n            </li>\r\n          );\r\n        })}\r\n\r\n        {/* Tasks (role-aware): users => /profile/tasks, admins => /admin/tasks */}\r\n        <li>\r\n          <Link\r\n            to={tasksLink}\r\n            className={`block px-4 py-2 rounded-lg font-medium ${tasksActive\r\n              ? \"bg-white text-[#020839]\"\r\n              : \"text-white hover:bg-[#1e276d]\"\r\n              }`}\r\n          >\r\n            <div className=\"flex items-center justify-between\">\r\n              <span>Tasks</span>\r\n              <div className=\"flex items-center gap-2\">\r\n                {loadingTasks ? (\r\n                  <div className=\"w-4 h-4 border-2 border-t-transparent rounded-full animate-spin\" />\r\n                ) : (\r\n                  <>\r\n                    {taskStats.overdue > 0 && (\r\n                      <span className=\"text-xs bg-red-600 text-white rounded-full px-2 py-0.5\">{taskStats.overdue}</span>\r\n                    )}\r\n                    {taskStats.remaining > 0 && (\r\n                      <span className=\"text-xs bg-white text-[#020839] rounded-full px-2 py-0.5\">{taskStats.remaining}</span>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n    </aside>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\recognition\\RecentRecognition.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\ui\\Button.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\ui\\Card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\ui\\EmptyState.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\ui\\Skeleton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\components\\ui\\Table.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\ArchivedUsers.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\Chat.jsx","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":46,"column":29,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":46,"endColumn":30,"suggestions":[{"messageId":"removeEscape","fix":{"range":[2093,2094],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[2093,2093],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":84,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'requestedUserId'. Either include it or remove the dependency array.","line":179,"column":6,"nodeType":"ArrayExpression","endLine":179,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [requestedUserId]","fix":{"range":[7001,7003],"text":"[requestedUserId]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has an unnecessary dependency: 'socket'. Either exclude it or remove the dependency array. Outer scope values like 'socket' aren't valid dependencies because mutating them doesn't re-render the component.","line":411,"column":4,"nodeType":"ArrayExpression","endLine":411,"endColumn":61,"suggestions":[{"desc":"Update the dependencies array to be: [selectedChat, currentUser, allUsers, formatTime]","fix":{"range":[15220,15277],"text":"[selectedChat, currentUser, allUsers, formatTime]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":502,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":502,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":516,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":516,"endColumn":17}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\r\nimport io from \"socket.io-client\";\r\nimport axios from \"axios\";\r\nimport { Search, MoreVertical, Send, Phone, Video, Info, ArrowLeft, Clock, Check, CheckCheck, Trash2, Edit2, MoreHorizontal } from \"lucide-react\";\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport { useSearchParams } from 'react-router-dom';\r\n\r\nconst socket = io.connect(\"http://localhost:3000\");\r\n\r\nconst Chat = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const requestedUserId = searchParams.get('userId');\r\n\r\n  const [recentChats, setRecentChats] = useState([]); // Recent conversations\r\n  const [allUsers, setAllUsers] = useState([]); // All users for search\r\n  const [displayedContacts, setDisplayedContacts] = useState([]); // What is actually shown\r\n  const [searchQuery, setSearchQuery] = useState(\"\"); // Search input state\r\n  const [loading, setLoading] = useState(true); // Loading state\r\n  const [onlineUserIds, setOnlineUserIds] = useState(new Set()); // Track online users\r\n\r\n  // User & Selection State\r\n  const [selectedChat, setSelectedChat] = useState(null);\r\n  const [inputMessage, setInputMessage] = useState('')\r\n  const [chatListOpen, setChatListOpen] = useState(true)\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n\r\n  // Helper: robust time formatting (handles ISO and DB strings and converts to local time)\r\n  const formatTime = (isoOrDate) => {\r\n    try {\r\n      if (!isoOrDate) return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n\r\n      // If it's already a Date instance, use it\r\n      if (isoOrDate instanceof Date) {\r\n        return isoOrDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n      }\r\n\r\n      let s = String(isoOrDate).trim();\r\n\r\n      // If it is a simple 'HH:MM AM/PM' string coming from client, return as-is (but normalized)\r\n      if (/^\\d{1,2}:\\d{2}\\s?(AM|PM)$/i.test(s)) {\r\n        // Make sure to uppercase AM/PM and pad hour\r\n        return s.toUpperCase();\r\n      }\r\n\r\n      // Detect ISO with timezone or offset\r\n      const hasTZ = /[Zz]|[+\\-]\\d{2}:?\\d{2}/.test(s);\r\n      const hasT = s.includes('T');\r\n\r\n      let d;\r\n\r\n      // DB common formats:\r\n      // 1) 'YYYY-MM-DD HH:mm:ss' -> treat as local time (no timezone)\r\n      // 2) 'YYYY-MM-DDTHH:mm:ss' (no TZ) -> treat as local time\r\n      // 3) ISO with Z or offset -> use Date(s)\r\n\r\n      const dbSpaceFormat = /^\\d{4}-\\d{2}-\\d{2}\\s+\\d{2}:\\d{2}(:\\d{2})?/;\r\n      const isoNoTZ = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}(:\\d{2})?$/;\r\n\r\n      if (hasTZ) {\r\n        d = new Date(s);\r\n      } else if (dbSpaceFormat.test(s) || isoNoTZ.test(s)) {\r\n        // Parse as local time exactly (do not append Z)\r\n        // Extract components\r\n        const parts = s.replace('T', ' ').split(' ');\r\n        const dateParts = parts[0].split('-');\r\n        const timeParts = (parts[1] || '').split(':');\r\n        const year = parseInt(dateParts[0], 10);\r\n        const month = parseInt(dateParts[1], 10) - 1;\r\n        const day = parseInt(dateParts[2], 10);\r\n        const hour = parseInt(timeParts[0] || '0', 10);\r\n        const minute = parseInt(timeParts[1] || '0', 10);\r\n        const second = parseInt(timeParts[2] || '0', 10);\r\n        d = new Date(year, month, day, hour, minute, second);\r\n      } else if (hasT) {\r\n        // fallback parse\r\n        d = new Date(s);\r\n      } else {\r\n        // For any other string, fallback to Date\r\n        d = new Date(s);\r\n      }\r\n\r\n      if (isNaN(d.getTime())) return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n      return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n    } catch (e) {\r\n      return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n    }\r\n  };\r\n\r\n  // Conversation state\r\n  const [conversation, setConversation] = useState([]);\r\n\r\n  // --- 1. INITIAL DATA FETCHING ---\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const userStr = localStorage.getItem('user');\r\n\r\n        // Parse User\r\n        let currentUserId = null;\r\n        if (userStr) {\r\n          const parsed = JSON.parse(userStr);\r\n          setCurrentUser(parsed);\r\n          currentUserId = parsed.id;\r\n        }\r\n\r\n        if (!token || !currentUserId) {\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Notify server we are online\r\n        socket.emit(\"user_connected\", currentUserId);\r\n\r\n        const config = { headers: { Authorization: `Bearer ${token}` } };\r\n\r\n        // A. Fetch Recent Chats (Primary List)\r\n        try {\r\n          const recentRes = await axios.get(`http://localhost:3000/api/chats/${currentUserId}`, config);\r\n          const recent = recentRes.data.map(user => ({\r\n            id: user.id,\r\n            name: user.name,\r\n            role: user.role,\r\n            message: user.message,\r\n            time: user.time ? formatTime(user.time) : \"\",\r\n            avatar: user.name ? user.name.charAt(0).toUpperCase() : \"?\",\r\n            unread: false, // You might want real unread count from DB later\r\n            isRecent: true\r\n          }));\r\n          setRecentChats(recent);\r\n          if (recent.length > 0) setSelectedChat(recent[0].id);\r\n        } catch (error) {\r\n          console.error(\"Error fetching recent chats:\", error);\r\n        }\r\n\r\n        // B. Fetch All Users (Directory for Search)\r\n        try {\r\n          const usersRes = await axios.get(\"http://localhost:3000/api/users\", config);\r\n          const all = (usersRes.data.users || [])\r\n            .filter(u => u.id !== currentUserId)\r\n            .map(user => ({\r\n              id: user.id,\r\n              name: user.fullname,\r\n              role: user.email,\r\n              message: \"Start a new conversation\",\r\n              time: \"\",\r\n              avatar: user.fullname ? user.fullname.charAt(0).toUpperCase() : \"?\",\r\n              unread: false,\r\n              isRecent: false\r\n            }));\r\n          setAllUsers(all);\r\n          // If page was opened with ?userId=... select that chat automatically\r\n          if (requestedUserId) {\r\n            setSelectedChat(requestedUserId);\r\n            setChatListOpen(false);\r\n          }\r\n        } catch (err) {\r\n          if (err.response && err.response.status === 401) {\r\n            if (err.response.data && err.response.data.message === \"Token expired\") {\r\n              alert(\"Session expired. Please log in again.\");\r\n            }\r\n            // Token invalid/expired - force logout\r\n            localStorage.removeItem('token');\r\n            localStorage.removeItem('user');\r\n            window.location.href = '/login';\r\n            return;\r\n          }\r\n          console.error(\"Error fetching users for chat:\", err);\r\n        }\r\n\r\n      } catch (err) {\r\n        console.error(\"Failed to load chat data\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  // --- 2. ONLINE PRESENCE LISTENER & RECONNECTION ---\r\n  useEffect(() => {\r\n    // 1. Listen for the list of online users\r\n    const handleOnlineUsers = (userIds) => {\r\n      // Force all IDs to strings for consistent checking\r\n      const idSet = new Set(userIds.map(id => String(id)));\r\n      setOnlineUserIds(idSet);\r\n    };\r\n\r\n    socket.on(\"online_users\", handleOnlineUsers);\r\n\r\n    // 2. Handle Reconnection (Important if server restarts)\r\n    const handleConnect = () => {\r\n      if (currentUser && currentUser.id) {\r\n        console.log(\"Reconnected to server, sending identity:\", currentUser.id);\r\n        socket.emit(\"user_connected\", currentUser.id);\r\n      }\r\n    };\r\n\r\n    socket.on(\"connect\", handleConnect);\r\n\r\n    // 3. Emit immediately if we already have a user and socket is connected\r\n    if (currentUser && currentUser.id && socket.connected) {\r\n      socket.emit(\"user_connected\", currentUser.id);\r\n    }\r\n\r\n    return () => {\r\n      socket.off(\"online_users\", handleOnlineUsers);\r\n      socket.off(\"connect\", handleConnect);\r\n    };\r\n  }, [currentUser]); // Re-run if user changes\r\n\r\n  // --- 3. FILTERING & DISPLAY LOGIC ---\r\n  useEffect(() => {\r\n    let sourceList = [];\r\n\r\n    if (!searchQuery.trim()) {\r\n      // Default View: Show Recent Chats ONLY\r\n      // If no recent chats, show directory (UX choice)\r\n      sourceList = recentChats.length > 0 ? recentChats : allUsers;\r\n    } else {\r\n      // Search View: Search across ALL users (Directory)\r\n      sourceList = allUsers;\r\n    }\r\n\r\n    // Apply presence status to whatever list we are showing\r\n    const listWithStatus = sourceList.map(contact => ({\r\n      ...contact,\r\n      status: onlineUserIds.has(String(contact.id)) ? \"online\" : \"offline\"\r\n    }));\r\n\r\n    // Filter by Query if it exists\r\n    if (searchQuery.trim()) {\r\n      const lowerQuery = searchQuery.toLowerCase();\r\n      const filtered = listWithStatus.filter(c =>\r\n        (c.name && c.name.toLowerCase().includes(lowerQuery)) ||\r\n        (c.role && c.role.toLowerCase().includes(lowerQuery))\r\n      );\r\n      setDisplayedContacts(filtered);\r\n    } else {\r\n      setDisplayedContacts(listWithStatus);\r\n    }\r\n\r\n  }, [searchQuery, recentChats, allUsers, onlineUserIds]);\r\n\r\n  // If a chat was requested via query param but that user is not in our lists, fetch them\r\n  useEffect(() => {\r\n    const addRequestedUser = async () => {\r\n      if (!requestedUserId) return;\r\n      const exists = allUsers.find(u => String(u.id) === String(requestedUserId)) || recentChats.find(r => String(r.id) === String(requestedUserId));\r\n      if (exists) return;\r\n\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) return;\r\n        const res = await fetch(`http://localhost:3000/api/users/${requestedUserId}`, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        if (!res.ok) return;\r\n        const data = await res.json();\r\n        const u = data.user;\r\n        if (u) {\r\n          setAllUsers(prev => [...prev, { id: u.id, name: u.fullname, role: u.email, message: 'Start a new conversation', time: '', avatar: u.fullname ? u.fullname.charAt(0).toUpperCase() : '?' }]);\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to fetch requested chat user', err);\r\n      }\r\n    };\r\n    addRequestedUser();\r\n  }, [requestedUserId, allUsers, recentChats]);\r\n\r\n\r\n  // --- 4. REAL-TIME MESSAGING LOGIC ---\r\n  useEffect(() => {\r\n    const fetchHistory = async () => {\r\n      if (!selectedChat || !currentUser) return;\r\n\r\n      // Mark local as read\r\n      setRecentChats(prev => prev.map(c => c.id === selectedChat ? { ...c, unread: false } : c));\r\n\r\n      try {\r\n        const res = await axios.get(`http://localhost:3000/api/messages/${currentUser.id}/${selectedChat}`);\r\n        const history = res.data.map(msg => ({\r\n          id: msg.id,\r\n          text: msg.message,\r\n          sender: msg.sender_id === currentUser.id ? \"me\" : \"other\",\r\n          time: formatTime(msg.created_at),\r\n          status: msg.status,\r\n          is_edited: msg.is_edited,\r\n          is_deleted: msg.is_deleted\r\n        }));\r\n        setConversation(history);\r\n\r\n        // Mark last message from OTHER as read if it isn't already\r\n        const lastMsg = history[history.length - 1];\r\n        if (lastMsg && lastMsg.sender === 'other' && lastMsg.status !== 'read') {\r\n          socket.emit(\"message_read\", { messageId: lastMsg.id, senderId: selectedChat });\r\n        }\r\n\r\n      } catch (err) { console.error(\"Error loading history\", err); }\r\n    };\r\n    fetchHistory();\r\n  }, [selectedChat, currentUser]);\r\n\r\n  const selectedChatData = displayedContacts.find(m => m.id === selectedChat) || allUsers.find(u => u.id === selectedChat);\r\n  // Enhance selected data with current online status\r\n  const activeChatUser = selectedChatData ? {\r\n    ...selectedChatData,\r\n    status: onlineUserIds.has(String(selectedChatData.id)) ? \"online\" : \"offline\"\r\n  } : null;\r\n\r\n  // Listen for incoming messages\r\n\r\n  // Listen for incoming messages\r\n  useEffect(() => {\r\n  const handleReceiveMessage = (data) => {\r\n    console.log(\"üì• Chat: Received Message:\", data);\r\n\r\n    // DEBUG: Log emission\r\n    if (data.id) console.log(\"üì§ Emitting message_delivered for:\", data.id);\r\n    else console.warn(\"‚ö†Ô∏è Received message without ID, cannot emit delivered\");\r\n\r\n    // Update active conversation if applicable\r\n    const isChattingWithSender =\r\n      String(data.senderId) === String(selectedChat) &&\r\n      String(data.receiverId) === String(currentUser?.id);\r\n\r\n    const isChattingWithReceiver =\r\n      String(data.senderId) === String(currentUser?.id) &&\r\n      String(data.receiverId) === String(selectedChat);\r\n\r\n    if (isChattingWithSender || isChattingWithReceiver) {\r\n      setConversation((prev) => [\r\n        ...prev,\r\n        {\r\n          id: data.id || Date.now(),\r\n          text: data.message,\r\n          sender: String(data.senderId) === String(currentUser?.id) ? \"me\" : \"other\",\r\n          time: formatTime(data.created_at),\r\n          status: \"read\", // We are watching it now, so it's read\r\n        },\r\n      ]);\r\n      if (data.id) socket.emit(\"message_read\", { messageId: data.id, senderId: data.senderId });\r\n    }\r\n\r\n    // Always mark as delivered\r\n    if (data.id) socket.emit(\"message_delivered\", { messageId: data.id, senderId: data.senderId });\r\n\r\n    // Toast notification\r\n    if (\r\n      String(data.receiverId) === String(currentUser?.id) &&\r\n      String(data.senderId) !== String(currentUser?.id)\r\n    ) {\r\n      toast.success(`New message from ${data.author || \"User \" + data.senderId}`, {\r\n        icon: \"üí¨\",\r\n        style: {\r\n          borderRadius: \"10px\",\r\n          background: \"#333\",\r\n          color: \"#fff\",\r\n        },\r\n      });\r\n    }\r\n\r\n    // Update Sidebar List (Reorder & Unread)\r\n    setRecentChats((prev) => {\r\n      const senderId =\r\n        String(data.senderId) === String(currentUser?.id) ? data.receiverId : data.senderId;\r\n      const senderIndex = prev.findIndex((c) => String(c.id) === String(senderId));\r\n\r\n      let updatedContacts = [...prev];\r\n      let sender;\r\n\r\n      if (senderIndex !== -1) {\r\n        [sender] = updatedContacts.splice(senderIndex, 1);\r\n      } else {\r\n        const userDetails = allUsers.find((u) => String(u.id) === String(senderId));\r\n        if (!userDetails) {\r\n          console.warn(`Sender ${senderId} not found in allUsers directory. Using fallback.`);\r\n          sender = {\r\n            id: senderId,\r\n            name: \"New Contact\",\r\n            avatar: \"?\",\r\n            role: \"Employee\",\r\n            status: \"online\",\r\n            isRecent: true,\r\n            unread: false,\r\n          };\r\n        } else {\r\n          sender = { ...userDetails, unread: false };\r\n        }\r\n      }\r\n\r\n      const isUnread = String(senderId) !== String(selectedChat);\r\n\r\n      updatedContacts.unshift({\r\n        ...sender,\r\n        unread: isUnread || sender.unread || false,\r\n        message: data.message,\r\n        time: formatTime(data.created_at),\r\n      });\r\n\r\n      return updatedContacts;\r\n    });\r\n  };\r\n\r\n  socket.on(\"receive_message\", handleReceiveMessage);\r\n\r\n  return () => {\r\n    socket.off(\"receive_message\", handleReceiveMessage);\r\n  };\r\n}, [socket, selectedChat, currentUser, allUsers, formatTime]);\r\n\r\n  // --- 5. NEW: Listeners for Status, Edit, Delete ---\r\n  // Ref to store updates that arrive before the message ID is synced\r\n  const pendingUpdates = React.useRef(new Map());\r\n\r\n  // --- 5. NEW: Listeners for Status, Edit, Delete ---\r\n  useEffect(() => {\r\n    // Status update (delivered/read)\r\n    const handleStatusUpdate = (data) => {\r\n      console.log(\"üì• Chat: Status Update Received:\", data);\r\n      setConversation(prev => {\r\n        const exists = prev.some(msg => msg.id === data.id);\r\n        if (!exists) { // Message ID mismatch (still tempId?)\r\n          console.log(\"‚è≥ Message not found yet (race condition?), caching update:\", data.id, data.status);\r\n          pendingUpdates.current.set(String(data.id), data.status);\r\n          return prev;\r\n        }\r\n        return prev.map(msg =>\r\n          msg.id === data.id ? { ...msg, status: data.status } : msg\r\n        );\r\n      });\r\n    };\r\n\r\n    const handleMessageUpdated = (data) => {\r\n      setConversation(prev => prev.map(msg =>\r\n        msg.id === data.id ? { ...msg, text: data.text, is_edited: true } : msg\r\n      ));\r\n    };\r\n\r\n    const handleMessageDeleted = (data) => {\r\n      setConversation(prev => prev.map(msg =>\r\n        msg.id === data.id ? { ...msg, text: \"This message was deleted\", is_deleted: true } : msg\r\n      ));\r\n    };\r\n\r\n    const handleMessageSent = (data) => {\r\n      console.log(\"üì• Chat: Message Sent Confirmed:\", data);\r\n\r\n      setConversation(prev => prev.map(msg => {\r\n        if (String(msg.id) === String(data.tempId)) {\r\n          // Check if we have pending status updates for this ID\r\n          const pendingStatus = pendingUpdates.current.get(String(data.id));\r\n          if (pendingStatus) {\r\n            console.log(\"üîÑ Applying pending status update:\", pendingStatus);\r\n            pendingUpdates.current.delete(String(data.id));\r\n            return { ...msg, id: data.id, status: pendingStatus, time: data.created_at ? formatTime(data.created_at) : msg.time };\r\n          }\r\n          return { ...msg, id: data.id, status: 'sent', time: data.created_at ? formatTime(data.created_at) : msg.time };\r\n        }\r\n        return msg;\r\n      }));\r\n\r\n      // Also update the sidebar/recent chats entry for the receiver so time matches DB\r\n      if (data && data.receiverId) {\r\n        setRecentChats(prev => {\r\n          const idx = prev.findIndex(c => String(c.id) === String(data.receiverId));\r\n          if (idx !== -1) {\r\n            const updated = [...prev];\r\n            updated[idx] = {\r\n              ...updated[idx],\r\n              time: data.created_at ? formatTime(data.created_at) : updated[idx].time\r\n            };\r\n            return updated;\r\n          }\r\n          return prev;\r\n        });\r\n      }\r\n    };\r\n\r\n    socket.on(\"message_status_update\", handleStatusUpdate);\r\n    socket.on(\"message_updated\", handleMessageUpdated);\r\n    socket.on(\"message_deleted\", handleMessageDeleted);\r\n    socket.on(\"message_sent\", handleMessageSent);\r\n\r\n    return () => {\r\n      socket.off(\"message_status_update\", handleStatusUpdate);\r\n      socket.off(\"message_updated\", handleMessageUpdated);\r\n      socket.off(\"message_deleted\", handleMessageDeleted);\r\n      socket.off(\"message_sent\", handleMessageSent);\r\n    };\r\n  }, []);\r\n\r\n  const handleEditMessage = async (msgId, newText, receiverId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.put(`http://localhost:3000/api/messages/${msgId}`, { message: newText }, { headers: { Authorization: `Bearer ${token}` } });\r\n\r\n      setConversation(prev => prev.map(m => m.id === msgId ? { ...m, text: newText, is_edited: true } : m));\r\n      socket.emit(\"edit_message\", { id: msgId, text: newText, receiverId });\r\n      toast.success(\"Message edited\");\r\n    } catch (err) {\r\n      toast.error(\"Failed to edit message\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteMessage = async (msgId, receiverId) => {\r\n    if (!window.confirm(\"Delete this message?\")) return;\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.delete(`http://localhost:3000/api/messages/${msgId}`, { headers: { Authorization: `Bearer ${token}` } });\r\n\r\n      setConversation(prev => prev.map(m => m.id === msgId ? { ...m, text: \"This message was deleted\", is_deleted: true } : m));\r\n      socket.emit(\"delete_message\", { id: msgId, receiverId });\r\n      toast.success(\"Message deleted\");\r\n    } catch (err) {\r\n      toast.error(\"Failed to delete message\");\r\n    }\r\n  };\r\n\r\n\r\n  const handleSendMessage = async () => {\r\n    if (inputMessage.trim() && currentUser && selectedChat) {\r\n      const tempId = Date.now();\r\n      const messageData = {\r\n        id: tempId, // Send temp ID to server\r\n        room: selectedChat,\r\n        senderId: currentUser.id,\r\n        receiverId: selectedChat,\r\n        author: currentUser.fullname,\r\n        message: inputMessage,\r\n        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\r\n      };\r\n\r\n      await socket.emit(\"send_message\", messageData);\r\n\r\n      setConversation(prev => [\r\n        ...prev,\r\n        { id: tempId, text: inputMessage, sender: \"me\", time: messageData.time, status: 'sending' }\r\n      ]);\r\n\r\n      // Optimistic Sidebar Update\r\n      setRecentChats(prev => {\r\n        const receiverIndex = prev.findIndex(c => c.id === selectedChat);\r\n        let newList = [...prev];\r\n        let receiver = null;\r\n\r\n        if (receiverIndex !== -1) {\r\n          [receiver] = newList.splice(receiverIndex, 1);\r\n        } else {\r\n          const found = allUsers.find(u => u.id === selectedChat);\r\n          if (found) receiver = { ...found, isRecent: true };\r\n        }\r\n\r\n        if (receiver) {\r\n          receiver = {\r\n            ...receiver,\r\n            message: \"You: \" + inputMessage,\r\n            time: messageData.time,\r\n            unread: false\r\n          };\r\n          newList.unshift(receiver);\r\n        }\r\n        return newList;\r\n      });\r\n\r\n      setInputMessage('');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-white\">\r\n      {/* --- SIDEBAR --- */}\r\n      <div className={`${chatListOpen ? 'block' : 'hidden'} md:flex flex-col w-full md:w-80 border-r border-gray-200 h-full`}>\r\n        {/* Header */}\r\n        <div className=\"p-5 border-b border-gray-100 flex items-center justify-between shrink-0\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 tracking-tight\">Messages</h2>\r\n          <div className=\"flex gap-2\">\r\n            <button className=\"md:hidden p-2 text-gray-500 hover:bg-gray-100 rounded-full\" onClick={() => setChatListOpen(false)}>\r\n              <ArrowLeft size={20} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Search */}\r\n        <div className=\"px-5 py-4 shrink-0\">\r\n          <div className=\"relative group\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 group-focus-within:text-blue-600 transition-colors\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search contacts...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"w-full bg-gray-50 border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all font-medium text-gray-700 placeholder-gray-400\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* List */}\r\n        <div className=\"flex-1 overflow-y-auto px-3 pb-3 custom-scrollbar\">\r\n          {loading ? (\r\n            <div className=\"p-4 flex justify-center\">\r\n              <div className=\"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\"></div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {displayedContacts.length === 0 && (\r\n                <div className=\"flex flex-col items-center justify-center h-40 text-center\">\r\n                  <div className=\"w-12 h-12 bg-gray-50 rounded-full flex items-center justify-center mb-3\">\r\n                    <Clock className=\"w-6 h-6 text-gray-300\" />\r\n                  </div>\r\n                  <p className=\"text-sm font-medium text-gray-900\">No chats yet</p>\r\n                  <p className=\"text-xs text-gray-500 mt-1 max-w-[150px]\">Search for a colleague to start a conversation.</p>\r\n                </div>\r\n              )}\r\n              {displayedContacts.map(contact => (\r\n                <div\r\n                  key={contact.id}\r\n                  onClick={() => { setSelectedChat(contact.id); setChatListOpen(false); }}\r\n                  className={`group flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all duration-200 mb-1 ${selectedChat === contact.id ? 'bg-blue-50/80 shadow-xs border border-blue-100' : 'hover:bg-gray-50 border border-transparent'}`}\r\n                >\r\n                  {/* Avatar + Status */}\r\n                  <div className=\"relative shrink-0\">\r\n                    <div className=\"w-12 h-12 rounded-full bg-linear-to-b from-gray-100 to-gray-200 border border-gray-300 flex items-center justify-center text-gray-600 font-bold text-sm shadow-sm\">\r\n                      {contact.avatar}\r\n                    </div>\r\n                    {/* Status Dot */}\r\n                    <div className={`absolute bottom-0.5 right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white ${contact.status === 'online' ? 'bg-green-500' : 'bg-gray-400'}`}></div>\r\n                  </div>\r\n\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center justify-between mb-0.5\">\r\n                      <h3 className={`text-sm truncate ${contact.unread ? 'font-bold text-gray-900' : 'font-semibold text-gray-800'}`}>\r\n                        {contact.name}\r\n                      </h3>\r\n                      {contact.time && <span className=\"text-[10px] text-gray-400 font-medium shrink-0 ml-2\">{contact.time}</span>}\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <p className={`text-xs truncate max-w-40 ${contact.unread ? 'text-gray-900 font-medium' : 'text-gray-500'}`}>\r\n                        {contact.message || contact.role}\r\n                      </p>\r\n                      {contact.unread && (\r\n                        <span className=\"shrink-0 w-2 h-2 bg-blue-600 rounded-full ml-2\"></span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </>\r\n          )}\r\n\r\n        </div>\r\n      </div>\r\n\r\n\r\n      {/* --- MESSAGING AREA --- */}\r\n      <div className={`${chatListOpen ? 'hidden md:flex' : 'flex'} flex-1 flex-col bg-slate-50 relative`}>\r\n        {selectedChat ? (\r\n          <>\r\n            {/* Chat Header */}\r\n            <div className=\"h-[76px] bg-white border-b border-gray-200 flex items-center justify-between px-6 sticky top-0 z-10 shadow-xs\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <button className=\"md:hidden text-gray-500\" onClick={() => setChatListOpen(true)}>\r\n                  <ArrowLeft size={24} />\r\n                </button>\r\n                <div className=\"relative\">\r\n                  <div className=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-600\">\r\n                    {activeChatUser?.avatar}\r\n                  </div>\r\n                  <div className={`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${activeChatUser?.status === 'online' ? 'bg-green-500' : 'bg-gray-400'}`}></div>\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"font-bold text-gray-900 text-sm\">{activeChatUser?.name}</h3>\r\n                  <p className=\"text-xs font-medium text-gray-500\">{activeChatUser?.status === 'online' ? 'Active Now' : 'Offline'}</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-4 text-gray-400\">\r\n                <button className=\"hover:text-blue-600 transition-colors p-2 rounded-full hover:bg-blue-50\"><Phone size={20} /></button>\r\n                <button className=\"hover:text-blue-600 transition-colors p-2 rounded-full hover:bg-blue-50\"><Video size={20} /></button>\r\n                <button className=\"hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100\"><MoreVertical size={20} /></button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Chat Messages */}\r\n            <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\r\n              <Toaster />\r\n              {/* <div className=\"text-center my-4\">\r\n                <span className=\"text-xs font-medium text-gray-400 bg-gray-100 px-3 py-1 rounded-full uppercase tracking-wider\">Today</span>\r\n              </div> */}\r\n              {conversation.map(msg => (\r\n                <div key={msg.id} className={`flex ${msg.sender === \"me\" ? \"justify-end\" : \"justify-start\"} group`}>\r\n                  <div className={`relative max-w-[70%] md:max-w-[60%] rounded-2xl px-5 py-3 shadow-sm ${msg.sender === \"me\" ? \"bg-blue-600 text-white rounded-tr-sm\" : \"bg-white text-gray-800 border border-gray-100 rounded-tl-sm\"}`}>\r\n\r\n                    {/* Message Text */}\r\n                    <p className={`text-sm leading-relaxed ${msg.is_deleted ? 'italic opacity-60' : ''}`}>\r\n                      {msg.text}\r\n                      {msg.is_edited && !msg.is_deleted && <span className=\"text-[10px] opacity-60 ml-1\">(edited)</span>}\r\n                    </p>\r\n\r\n                    {/* Metadata: Time + Ticks */}\r\n                    <div className={`flex items-center justify-end gap-1 mt-1.5 ${msg.sender === \"me\" ? \"text-blue-100\" : \"text-gray-400\"}`}>\r\n                      <p className=\"text-[10px] font-medium opacity-70\">{msg.time}</p>\r\n\r\n                      {/* Ticks for My Messages */}\r\n                      {msg.sender === \"me\" && !msg.is_deleted && (\r\n                        <span className=\"flex items-center\">\r\n                          {/* Sending (Clock) */}\r\n                          {msg.status === 'sending' && <Clock size={12} className=\"opacity-70\" />}\r\n                          {/* Single Tick (Sent) */}\r\n                          {msg.status === 'sent' && <Check size={14} className=\"opacity-70\" />}\r\n                          {/* Double Tick (Delivered/Read) */}\r\n                          {(msg.status === 'delivered' || msg.status === 'read') && (\r\n                            <CheckCheck size={14} className={msg.status === 'read' ? 'text-blue-200' : 'opacity-70'} />\r\n                          )}\r\n                          {/* Default fallback if status missing but \"me\" */}\r\n                          {!msg.status && <Check size={14} className=\"opacity-70\" />}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Action Menu (Hover) */}\r\n                    {msg.sender === \"me\" && !msg.is_deleted && (\r\n                      <div className=\"absolute top-2 right-full mr-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 bg-white shadow-md rounded-lg p-1 border border-gray-100\">\r\n                        <button onClick={() => {\r\n                          const newText = prompt(\"Edit message:\", msg.text);\r\n                          if (newText && newText !== msg.text) handleEditMessage(msg.id, newText, selectedChat);\r\n                        }} className=\"p-1.5 hover:bg-gray-100 rounded text-gray-600\" title=\"Edit\">\r\n                          <Edit2 size={14} />\r\n                        </button>\r\n                        <button onClick={() => handleDeleteMessage(msg.id, selectedChat)} className=\"p-1.5 hover:bg-red-50 text-red-500 rounded\" title=\"Delete\">\r\n                          <Trash2 size={14} />\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Input Area */}\r\n            <div className=\"p-4 bg-white border-t border-gray-200\">\r\n              <div className=\"flex items-center gap-3 max-w-4xl mx-auto bg-gray-50 border border-gray-200 rounded-xl p-2 pr-2 shadow-xs focus-within:ring-2 focus-within:ring-blue-100 focus-within:border-blue-400 transition-all\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={inputMessage}\r\n                  onChange={(e) => setInputMessage(e.target.value)}\r\n                  onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\r\n                  placeholder=\"Type your message...\"\r\n                  className=\"flex-1 bg-transparent px-3 py-2 text-sm text-gray-800 outline-none placeholder-gray-400\"\r\n                />\r\n                <button\r\n                  onClick={handleSendMessage}\r\n                  disabled={!inputMessage.trim()}\r\n                  className={`p-2.5 rounded-lg transition-all ${inputMessage.trim() ? 'bg-blue-600 text-white shadow-md hover:bg-blue-700 transform hover:scale-105' : 'bg-gray-200 text-gray-400 cursor-not-allowed'}`}\r\n                >\r\n                  <Send size={18} className={inputMessage.trim() ? 'ml-0.5' : ''} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <div className=\"flex-1 flex flex-col items-center justify-center text-gray-300\">\r\n            <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6\">\r\n              <Info size={40} className=\"text-gray-400\" />\r\n            </div>\r\n            <p className=\"text-lg font-semibold text-gray-600\">No Chat Selected</p>\r\n            <p className=\"text-sm text-gray-400 mt-2 max-w-xs text-center\">Choose a colleague from the sidebar to start messaging.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div >\r\n  )\r\n}\r\n\r\nexport default Chat","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\CookiesPolicy.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  12 |   useEffect(() => {\n  13 |     const savedPrefs = localStorage.getItem('cookies_prefs');\n> 14 |     if (savedPrefs) setPrefs(JSON.parse(savedPrefs));\n     |                     ^^^^^^^^ Avoid calling setState() directly within an effect\n  15 |   }, []);\n  16 |\n  17 |   const toggle = (key) => setPrefs(prev => ({ ...prev, [key]: !prev[key] }));","line":14,"column":21,"nodeType":null,"endLine":14,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { ArrowLeft } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst defaultPrefs = { necessary: true, analytics: false, marketing: false };\r\n\r\nconst CookiesPolicy = () => {\r\n  const navigate = useNavigate();\r\n  const [prefs, setPrefs] = useState(defaultPrefs);\r\n  const [saved, setSaved] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const savedPrefs = localStorage.getItem('cookies_prefs');\r\n    if (savedPrefs) setPrefs(JSON.parse(savedPrefs));\r\n  }, []);\r\n\r\n  const toggle = (key) => setPrefs(prev => ({ ...prev, [key]: !prev[key] }));\r\n\r\n  const save = (acceptAll = false) => {\r\n    const newPrefs = acceptAll\r\n      ? { necessary: true, analytics: true, marketing: true }\r\n      : prefs;\r\n    localStorage.setItem('cookies_prefs', JSON.stringify(newPrefs));\r\n    setPrefs(newPrefs);\r\n    setSaved(true);\r\n    setTimeout(() => setSaved(false), 2000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"flex items-center mb-6 mt-5\">\r\n        <button onClick={() => navigate(-1)} className=\"p-2 mr-4 rounded-md hover:bg-gray-100\">\r\n          <ArrowLeft />\r\n        </button>\r\n        <h1 className=\"text-2xl font-semibold\">Cookies Policy</h1>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow-md border border-gray-200 p-6\">\r\n        <p className=\"text-gray-700 mb-4\">We use cookies to improve your experience. Choose which cookies you allow below.</p>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h3 className=\"font-medium\">Necessary</h3>\r\n              <p className=\"text-sm text-gray-500\">Required for site functionality</p>\r\n            </div>\r\n            <div className=\"text-gray-500\">Required</div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h3 className=\"font-medium\">Analytics</h3>\r\n              <p className=\"text-sm text-gray-500\">Helps us understand usage</p>\r\n            </div>\r\n            <div>\r\n              <label className=\"relative inline-flex items-center cursor-pointer\">\r\n                <input type=\"checkbox\" className=\"sr-only\" checked={prefs.analytics} onChange={() => toggle('analytics')} />\r\n                <div className={`w-12 h-6 rounded-full transition-colors ${prefs.analytics ? 'bg-blue-500' : 'bg-gray-300'}`}>\r\n                  <div className={`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${prefs.analytics ? 'translate-x-6' : 'translate-x-1'}`}></div>\r\n                </div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h3 className=\"font-medium\">Marketing</h3>\r\n              <p className=\"text-sm text-gray-500\">Used for personalized ads</p>\r\n            </div>\r\n            <div>\r\n              <label className=\"relative inline-flex items-center cursor-pointer\">\r\n                <input type=\"checkbox\" className=\"sr-only\" checked={prefs.marketing} onChange={() => toggle('marketing')} />\r\n                <div className={`w-12 h-6 rounded-full transition-colors ${prefs.marketing ? 'bg-blue-500' : 'bg-gray-300'}`}>\r\n                  <div className={`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${prefs.marketing ? 'translate-x-6' : 'translate-x-1'}`}></div>\r\n                </div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 mt-4\">\r\n            <button onClick={() => save(true)} className=\"px-4 py-2 bg-blue-600 text-white rounded-md\">Accept all</button>\r\n            <button onClick={() => { setPrefs({ necessary: true, analytics: false, marketing: false }); save(false); }} className=\"px-4 py-2 border rounded-md\">Reject all</button>\r\n            <button onClick={() => save(false)} className=\"px-4 py-2 border rounded-md\">Save</button>\r\n          </div>\r\n\r\n          {saved && <div className=\"text-sm text-green-600 mt-3\">Preferences saved.</div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CookiesPolicy;\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\Dashboard1.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'count' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"count"},"fix":{"range":[404,409],"text":""},"desc":"Remove unused variable 'count'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setCount' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"setCount"},"fix":{"range":[409,419],"text":""},"desc":"Remove unused variable 'setCount'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setCurrentPage' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"setCurrentPage"},"fix":{"range":[515,531],"text":""},"desc":"Remove unused variable 'setCurrentPage'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  28 |   \n  29 |     useEffect(() => {\n> 30 |       fetchStats();\n     |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  31 |     }, []);\n  32 |\n  33 |   const toggleSidebar = () => setSidebarOpen(!sidebarOpen);","line":30,"column":7,"nodeType":null,"endLine":30,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'toggleSidebar' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":33,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"toggleSidebar"},"fix":{"range":[1179,1236],"text":""},"desc":"Remove unused variable 'toggleSidebar'."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport EmployeesStatistics from \"../components/Dashboard1/EmployeesStatistics.jsx\";\r\nimport StatsCards from \"../components/Dashboard1/StatsCard.jsx\";\r\nimport EmpComposition from \"../components/Dashboard1/Emp_Composition.jsx\";\r\nimport MeetingsUI from \"../components/Dashboard1/MeetingsUI.jsx\";\r\n\r\nfunction Dashboard1() {\r\n  const [count, setCount] = useState(0);\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [currentPage, setCurrentPage] = useState(\"Dashboard\");\r\n  const [stats, setStats] = useState(null);\r\n  \r\n  const fetchStats = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const baseUrl = import.meta.env.VITE_API_BASE || 'http://localhost:3000';\r\n      const res = await axios.get(`${baseUrl}/api/dashboard/overview`, {\r\n        headers: { Authorization: token ? `Bearer ${token}` : '' }\r\n      });\r\n      if (res.data.success) {\r\n        setStats(res.data.data);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch dashboard overview\", err);\r\n    }\r\n  };\r\n  \r\n    useEffect(() => {\r\n      fetchStats();\r\n    }, []);\r\n\r\n  const toggleSidebar = () => setSidebarOpen(!sidebarOpen);\r\n\r\n  return (\r\n    <div className={`transition-all duration-300 ${sidebarOpen ? 'ml-48' : 'ml-0'} min-h-screen dark:bg-slate-800`}>\r\n      {currentPage === \"Dashboard\" && (\r\n        <div className=\"p-6 sm:p-10 max-w-[1600px] mx-auto\">\r\n          <div className=\"mb-8\">\r\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-slate-100 tracking-tight\">Dashboard Overview</h1>\r\n            <p className=\"text-gray-500 dark:text-slate-300 mt-1 text-sm\">Welcome back, here's what's happening today.</p>\r\n          </div>\r\n\r\n          <StatsCards stats={stats} />\r\n\r\n          <div className=\"mt-8\">\r\n            <EmployeesStatistics />\r\n          </div>\r\n\r\n          <div className=\"mt-12 grid grid-cols-1 xl:grid-cols-2 gap-8\">\r\n            <div className=\"w-full h-full\">\r\n              <MeetingsUI />\r\n            </div>\r\n            <div className=\"w-full h-full\">\r\n              <EmpComposition genderStats={stats?.genderComposition} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard1;","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\EmployeesPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isSidebarOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"isSidebarOpen"},"fix":{"range":[404,417],"text":""},"desc":"Remove unused variable 'isSidebarOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":100,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\r\nimport { Plus, Search, Trash2, Edit2, MoreVertical, Mail, Phone, Filter, Download } from 'lucide-react';\r\nimport AddEmployeeModal from '../components/Employee/AddEmployeeModal';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction EmployeesPage() {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Get Current User Logic\r\n    const userStr = localStorage.getItem(\"user\");\r\n    if (userStr) {\r\n      setCurrentUser(JSON.parse(userStr));\r\n    }\r\n\r\n    // Refresh users (and points) when activity updates (e.g., points transfers)\r\n    const onActivity = () => fetchUsers();\r\n    window.addEventListener('activity:updated', onActivity);\r\n\r\n    // Refresh when tasks change so we can update task counts in the list\r\n    const onTasksUpdated = () => fetchUsers();\r\n    window.addEventListener('tasks-updated', onTasksUpdated);\r\n\r\n    // Presence updates from socket are re-emitted as DOM events\r\n    const onPresence = (e) => {\r\n      const d = e.detail;\r\n      setUsers(prev => prev.map(u => {\r\n        if (String(u.id) !== String(d.userId)) return u;\r\n        const currRaw = (u.raw_status || u.status || '').toString().trim().toUpperCase();\r\n        // Do not let ACTIVE/IDLE/INACTIVE overwrite a user explicitly marked RESIGNED\r\n        if (currRaw === 'RESIGNED' && d.status !== 'RESIGNED') {\r\n          return { ...u, last_activity: d.last_activity || u.last_activity };\r\n        }\r\n        return { ...u, status: d.status, last_activity: d.last_activity };\r\n      }));\r\n    };\r\n    // Attach presence listener before the initial fetch so any immediate presence updates during fetch are handled\r\n    window.addEventListener('presence:update', onPresence);\r\n\r\n    // Fetch user list after we are listening for presence updates to avoid missing quick presence events\r\n    fetchUsers();\r\n\r\n    return () => {\r\n      window.removeEventListener('activity:updated', onActivity);\r\n      window.removeEventListener('tasks-updated', onTasksUpdated);\r\n      window.removeEventListener('presence:update', onPresence);\r\n    };\r\n  }, []);\r\n\r\n  const fetchUsers = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) return;\r\n\r\n      const res = await fetch(\"http://localhost:3000/api/users\", {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        const usersList = data.users || data;\r\n        // fetch tasks summary and merge\r\n        try {\r\n          const sres = await fetch('http://localhost:3000/api/tasks/summary', { headers: { Authorization: `Bearer ${token}` } });\r\n          if (sres.ok) {\r\n            const sjson = await sres.json();\r\n            const arr = sjson.data || [];\r\n            const map = {};\r\n            arr.forEach(r => { if (r.user_id) map[r.user_id] = r; });\r\n            const merged = usersList.map(u => ({ ...u, taskSummary: map[u.id] || { total: 0, completed: 0, overdue: 0 } }));\r\n            setUsers(merged);\r\n            return;\r\n          }\r\n        } catch (err) {\r\n          console.warn('Failed to fetch tasks summary', err);\r\n        }\r\n        // Optimistically mark the current client as ACTIVE locally so they don't briefly appear inactive on refresh\r\n        try {\r\n          const selfStr = localStorage.getItem('user');\r\n          if (selfStr) {\r\n            const self = JSON.parse(selfStr);\r\n            const updated = usersList.map(u => {\r\n              if (String(u.id) !== String(self.id)) return u;\r\n              const curr = (u.status || '').toString().trim().toUpperCase();\r\n              // don't overwrite a resigned status\r\n              if (curr === 'RESIGNED') return u;\r\n              return { ...u, status: 'ACTIVE' };\r\n            });\r\n            setUsers(updated);\r\n          } else {\r\n            setUsers(usersList);\r\n          }\r\n        } catch (e) {\r\n          setUsers(usersList);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUserAdded = (newUser) => {\r\n    setUsers(prev => [...prev, newUser]);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this employee? This action cannot be undone.\")) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const res = await fetch(`http://localhost:3000/api/users/${id}`, {\r\n        method: \"DELETE\",\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (res.ok) {\r\n        setUsers(prev => prev.filter(u => u.id !== id));\r\n      } else {\r\n        alert(\"Failed to delete user\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Error deleting user\");\r\n    }\r\n  };\r\n\r\n  // Toggle a user's status (Admin only)\r\n  const handleToggleStatus = async (id, currentStatus) => {\r\n    if (!isAdmin) return;\r\n    const newStatus = (currentStatus === 'ACTIVE') ? 'INACTIVE' : 'ACTIVE';\r\n    if (!window.confirm(`Set user #${id} status to ${newStatus}?`)) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`http://localhost:3000/api/users/${id}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\r\n        body: JSON.stringify({ status: newStatus })\r\n      });\r\n\r\n      if (res.ok) {\r\n        const json = await res.json();\r\n        const updated = json.user;\r\n        setUsers(prev => prev.map(u => u.id === updated.id ? { ...u, ...updated } : u));\r\n      } else {\r\n        const err = await res.json().catch(() => null);\r\n        alert(err?.message || 'Failed to update status');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to update status', err);\r\n      alert('Error updating status');\r\n    }\r\n  };\r\n\r\n  // Admin: mark a user as resigned (archive & delete)\r\n  const handleMarkResigned = async (id) => {\r\n    if (!isAdmin) return;\r\n    if (!window.confirm(`Mark user #${id} as Resigned and archive their data?`)) return;\r\n\r\n    try {\r\n      const reason = prompt('Reason for resignation (optional):');\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`http://localhost:3000/api/users/${id}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\r\n        body: JSON.stringify({ status: 'Resigned', resignation_reason: reason })\r\n      });\r\n\r\n      if (res.ok) {\r\n        // user removed from DB; remove locally\r\n        setUsers(prev => prev.filter(u => u.id !== id));\r\n      } else {\r\n        const err = await res.json().catch(() => null);\r\n        alert(err?.message || 'Failed to mark resigned');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to mark resigned', err);\r\n      alert('Error marking resigned');\r\n    }\r\n  };\r\n\r\n  // Admin: Reinstate a resigned user\r\n  const handleReinstate = async (id) => {\r\n    if (!isAdmin) return;\r\n    if (!window.confirm(`Reinstate user #${id} to Active status?`)) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`http://localhost:3000/api/users/${id}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\r\n        body: JSON.stringify({ status: 'ACTIVE' })\r\n      });\r\n\r\n      if (res.ok) {\r\n        const json = await res.json();\r\n        const updated = json.user;\r\n        setUsers(prev => prev.map(u => u.id === updated.id ? { ...u, ...updated } : u));\r\n      } else {\r\n        const err = await res.json().catch(() => null);\r\n        alert(err?.message || 'Failed to reinstate');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to reinstate', err);\r\n      alert('Error reinstating user');\r\n    }\r\n  };\r\n\r\n  const filteredUsers = users.filter(u =>\r\n    u.fullname?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    u.email?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    u.designation?.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  const isAdmin = currentUser?.role === 'Admin';\r\n\r\n  return (\r\n    <div className=\"flex bg-[#f9fafb] min-h-screen relative font-inter\">\r\n      <div className=\"w-full transition-all duration-300\">\r\n\r\n        {/* Mobile Header */}\r\n        <div className=\"lg:hidden bg-white p-4 shadow-sm flex items-center justify-between sticky top-0 z-30 border-b border-gray-100\">\r\n          <h1 className=\"text-xl font-bold text-gray-900\">HRMS</h1>\r\n          <button onClick={() => setIsSidebarOpen(true)} className=\"p-2 text-gray-600\">\r\n            <i className=\"fas fa-bars text-2xl\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-6 sm:p-10 max-w-[1600px] mx-auto\">\r\n\r\n          {/* Header Section */}\r\n          <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4 mb-8\">\r\n            <div>\r\n              <nav className=\"flex mb-2\" aria-label=\"Breadcrumb\">\r\n                <ol className=\"inline-flex items-center space-x-1 md:space-x-3\">\r\n                  <li className=\"inline-flex items-center\">\r\n                    <span className=\"text-sm font-medium text-gray-500\">Employee Management</span>\r\n                  </li>\r\n                  <li>\r\n                    <div className=\"flex items-center\">\r\n                      <span className=\"mx-2 text-gray-400\">/</span>\r\n                      <span className=\"text-sm font-medium text-gray-900\">Employees</span>\r\n                    </div>\r\n                  </li>\r\n                </ol>\r\n              </nav>\r\n              <h1 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Employees Directory</h1>\r\n              <p className=\"text-sm text-gray-500 mt-1\">Manage and view all employee profiles</p>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n              {isAdmin && (\r\n                <>\r\n                  <button\r\n                    onClick={() => setShowAddModal(true)}\r\n                    className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-xl font-medium shadow-lg shadow-blue-200 transition-all transform hover:-translate-y-0.5\"\r\n                  >\r\n                    <Plus size={18} />\r\n                    Add Employee\r\n                  </button>\r\n\r\n                  <button onClick={() => navigate('/archived-users')} className=\"flex items-center gap-2 bg-orange-50 hover:bg-orange-100 text-orange-700 px-4 py-2.5 rounded-xl font-medium border border-orange-100 transition-all\">Archived</button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Controls Bar */}\r\n          <div className=\"bg-white p-4 rounded-xl border border-gray-200 shadow-sm mb-6 flex flex-col md:flex-row gap-4 justify-between items-center\">\r\n\r\n            {/* Search */}\r\n            <div className=\"relative w-full md:w-96\">\r\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search employees...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none\"\r\n              />\r\n            </div>\r\n\r\n            {/* Filters (Visual Only for now) */}\r\n            <div className=\"flex gap-2 w-full md:w-auto\">\r\n              <button className=\"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 bg-white\">\r\n                <Filter size={16} />\r\n                Filter\r\n              </button>\r\n              <button className=\"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 bg-white\">\r\n                <Download size={16} />\r\n                Export\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Table View */}\r\n          <div className=\"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden\">\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full text-left border-collapse\">\r\n                <thead>\r\n                  <tr className=\"bg-gray-50/50 border-b border-gray-200 text-xs uppercase tracking-wider text-gray-500 font-semibold\">\r\n                    <th className=\"px-6 py-4\">Employee</th>\r\n                    <th className=\"px-6 py-4\">Role & Dept</th>\r\n                    <th className=\"px-6 py-4\">Contact</th>\r\n                    <th className=\"px-6 py-4\">Points</th>\r\n                    <th className=\"px-6 py-4\">Status / Tasks</th>\r\n                    <th className=\"px-6 py-4\">Joined</th>\r\n                    <th className=\"px-6 py-4 text-right\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-100\">\r\n                  {loading ? (\r\n                    <tr><td colSpan=\"6\" className=\"p-8 text-center text-gray-500\">Loading directory...</td></tr>\r\n                  ) : filteredUsers.length === 0 ? (\r\n                    <tr><td colSpan=\"6\" className=\"p-8 text-center text-gray-500\">No employees found.</td></tr>\r\n                  ) : (\r\n                    filteredUsers.map((user) => {\r\n                      const rawStatus = user.status || user.employee_status || user.status_of_employee || user.status_of_employment || '';\r\n                      const status = (rawStatus || '').toString().trim().toUpperCase();\r\n                      const statusLabel = status || 'UNKNOWN';\r\n                      return (\r\n                      <tr key={user.id} className=\"hover:bg-gray-50/80 transition-colors group\">\r\n                        <td className=\"px-6 py-4\">\r\n                          <div className=\"flex items-center gap-4\">\r\n                            <img\r\n                              src={user.profile_picture ? (user.profile_picture.startsWith('http') ? user.profile_picture : `http://localhost:3000${user.profile_picture}`) : \"/pexels-olly-927022.jpg\"}\r\n                              alt=\"\"\r\n                              className=\"w-10 h-10 rounded-full object-cover border border-gray-200\"\r\n                            />\r\n                            <div>\r\n                              <div className=\"font-bold text-gray-900\">{user.fullname}</div>\r\n                              <div className=\"text-xs text-gray-500\">{user.employee_id || `#EMP-${user.id}`}</div>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div className=\"font-medium text-gray-800\">{user.designation || \"N/A\"}</div>\r\n                          <div className=\"text-xs text-gray-500\">{user.department || \"General\"}</div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div className=\"flex flex-col gap-1\">\r\n                            <div className=\"flex items-center gap-2 text-xs text-gray-600\">\r\n                              <Mail size={12} className=\"text-gray-400\" />\r\n                              {user.email}\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 text-xs text-gray-600\">\r\n                              <Phone size={12} className=\"text-gray-400\" />\r\n                              {user.phone || \"N/A\"}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 text-sm font-semibold text-gray-800\">\r\n                          {user.points || 0}\r\n                        </td>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div>\r\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold ${status === 'ACTIVE' ? 'bg-green-50 text-green-700 border border-green-100' :\r\n                              status === 'INACTIVE' ? 'bg-red-50 text-red-700 border border-red-100' : status === 'IDLE' ? 'bg-yellow-50 text-yellow-700 border border-yellow-100' : status === 'RESIGNED' ? 'bg-orange-50 text-orange-700 border border-orange-100' : 'bg-gray-100 text-gray-700'\r\n                            }`}>\r\n                              <span className={`w-1.5 h-1.5 rounded-full mr-1.5 ${status === 'ACTIVE' ? 'bg-green-500' : status === 'INACTIVE' ? 'bg-red-500' : status === 'IDLE' ? 'bg-yellow-500' : status === 'RESIGNED' ? 'bg-orange-500' : 'bg-gray-400'}`}></span>\r\n                              {statusLabel}\r\n                            </span>\r\n                            {isAdmin && (\r\n                              <>\r\n                                {status === 'RESIGNED' ? (\r\n                                  <button onClick={() => handleReinstate(user.id)} className=\"ml-2 text-xs px-2 py-0.5 rounded bg-green-50 border text-green-600 hover:bg-green-100\">Reinstate</button>\r\n                                ) : (\r\n                                  <>\r\n                                    <button onClick={() => handleToggleStatus(user.id, status)} className=\"ml-2 text-xs px-2 py-0.5 rounded bg-gray-50 border text-gray-600 hover:bg-gray-100\">{(status === 'ACTIVE' || status === 'IDLE') ? 'Set Inactive' : 'Set Active'}</button>\r\n                                    <button onClick={() => handleMarkResigned(user.id)} className=\"ml-2 text-xs px-2 py-0.5 rounded bg-red-50 border text-red-600 hover:bg-red-100\">Mark Resigned</button>\r\n                                  </>\r\n                                )}\r\n                              </>\r\n                            )}\r\n                            {user.taskSummary && (\r\n                              (user.taskSummary.total || 0) > 0 ? (\r\n                                <div className=\"flex items-center gap-2 mt-2\">\r\n                                  <span className=\"inline-flex items-center gap-2 px-2 py-0.5 rounded-full text-xs bg-gray-100 text-gray-700\">\r\n                                    <strong className=\"text-sm\">{user.taskSummary.total || 0}</strong>\r\n                                    <span className=\"hidden sm:inline\">tasks</span>\r\n                                  </span>\r\n                                  <span className=\"inline-flex items-center gap-2 px-2 py-0.5 rounded-full text-xs bg-green-50 text-green-700\">\r\n                                    <strong className=\"text-sm\">{user.taskSummary.completed || 0}</strong>\r\n                                    <span className=\"hidden sm:inline\">done</span>\r\n                                  </span>\r\n                                  {user.taskSummary.overdue > 0 && (\r\n                                    <span className=\"inline-flex items-center gap-2 px-2 py-0.5 rounded-full text-xs bg-red-50 text-red-700\">\r\n                                      <strong className=\"text-sm\">{user.taskSummary.overdue}</strong>\r\n                                      <span className=\"hidden sm:inline\">overdue</span>\r\n                                    </span>\r\n                                  )}\r\n                                </div>\r\n                              ) : (\r\n                                <div className=\"text-xs text-gray-400 mt-2\">No open tasks</div>\r\n                              )\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 text-sm text-gray-600\">\r\n                          {user.date_of_joining ? new Date(user.date_of_joining).toLocaleDateString() : (user.created_at ? new Date(user.created_at).toLocaleDateString() : '-')}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 text-right\">\r\n                          <div className=\"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                            <button onClick={() => navigate(`/profile/${user.id}`)} className=\"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\" title=\"View Profile\">\r\n                              <MoreVertical size={16} />\r\n                            </button>\r\n                            {/* Admin Actions */}\r\n                            {isAdmin && (\r\n                              <button\r\n                                onClick={() => handleDelete(user.id)}\r\n                                className=\"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                title=\"Delete User\"\r\n                              >\r\n                                <Trash2 size={16} />\r\n                              </button>\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                    })\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            {/* Pagination Footer (Static for now) */}\r\n            <div className=\"px-6 py-4 border-t border-gray-200 bg-gray-50/50 flex items-center justify-between\">\r\n              <span className=\"text-sm text-gray-500\">Showing {filteredUsers.length} employees</span>\r\n              <div className=\"flex gap-2\">\r\n                <button disabled className=\"px-3 py-1 text-sm border border-gray-200 rounded-md bg-white text-gray-400 cursor-not-allowed\">Previous</button>\r\n                <button disabled className=\"px-3 py-1 text-sm border border-gray-200 rounded-md bg-white text-gray-400 cursor-not-allowed\">Next</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <AddEmployeeModal\r\n        isOpen={showAddModal}\r\n        onClose={() => setShowAddModal(false)}\r\n        onUserAdded={handleUserAdded}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EmployeesPage;","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\Feed.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\Home.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n   9 |\n  10 |   useEffect(() => {\n> 11 |     setIsAuth(isAuthenticated());\n     |     ^^^^^^^^^ Avoid calling setState() directly within an effect\n  12 |   }, []);\n  13 |\n  14 |   const handleLogout = async () => {","line":11,"column":5,"nodeType":null,"endLine":11,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { isAuthenticated, logout } from \"../services/auth.service\";\r\n\r\nconst Home = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const [isAuth, setIsAuth] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    setIsAuth(isAuthenticated());\r\n  }, []);\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    setIsAuth(false);\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"flex flex-row justify-between md:px-6 \">\r\n        <img src=\"image 2.svg\" alt=\"\" className=\"w-[150px] h-auto cursor-pointer\" />\r\n        <ul className=\"md:flex gap-9 justify-around text-[20px] py-5 hidden\">\r\n          <li className=\" hover:text-blue-600 hover:bg-[#D9D9D9] transition-all duration-300 cursor-pointer\">\r\n            <Link to=\"/dashboard\">Dashboard</Link>\r\n          </li>\r\n          <li className=\" hover:text-blue-600 transition-all duration-300 cursor-pointer\">\r\n            <Link to=\"/about\">About</Link>\r\n          </li>\r\n          <li className=\" hover:text-blue-600 transition-all duration-300 cursor-pointer\">\r\n            <Link to=\"/profile\">Profile</Link>\r\n          </li>\r\n          <li className=\" hover:text-blue-600 transition-all duration-300 cursor-pointer\">\r\n            <Link to=\"/event\">Event</Link>\r\n          </li>\r\n          <li className=\" hover:text-blue-600 transition-all duration-300 cursor-pointer\">\r\n            <Link to=\"/chat\">Chat</Link>\r\n          </li>\r\n          <li className=\" hover:text-blue-600 transition-all duration-300 cursor-pointer\">\r\n            {isAuth ? (\r\n              <button onClick={handleLogout}>Logout</button>\r\n            ) : (\r\n              <Link to=\"/login\">Sign-In</Link>\r\n            )}\r\n          </li>\r\n        </ul>\r\n        <div className=\"md:hidden pt-6 text-2xl\" onClick={() => setOpen(!open)}>‚ò∞\r\n          {open &&\r\n            <ul >\r\n              <li><Link to=\"/dashboard\">Dashboard</Link></li>\r\n              <li><Link to=\"/about\">About</Link></li>\r\n              <li><Link to=\"/profile\">Profile</Link></li>\r\n              <li><Link to=\"/event\">Event</Link></li>\r\n              <li><Link to=\"/chat\">Chat</Link></li>\r\n              <li>\r\n                {isAuth ? (\r\n                  <button onClick={handleLogout}>Logout</button>\r\n                ) : (\r\n                  <Link to=\"/login\">Sign-In</Link>\r\n                )}\r\n              </li>\r\n            </ul>\r\n          }\r\n        </div>\r\n      </nav>\r\n      <section className=\"flex md:flex-row justify-around flex-col gap-5\">\r\n        <div className=\"md:max-w-[45%] flex flex-col gap-5 text-[18px]\">\r\n          <div className=\"text-center pb-4 max-w-\">\r\n            <p className=\"text-3xl font-bold text-[#783625]\">HRMS</p>\r\n            <p>(Human Resource Management System)</p>\r\n          </div>\r\n          <div className=\"text-center pb-8\">\r\n            <p className=\"text-3xl font-bold text-[#783625]\">About</p>\r\n            <p>\r\n              Our Human Resource Management System (HRMS) streamlines how\r\n              organizations manage employees and teams. It integrates essential\r\n              functions such as employee profiles, event planning, and internal\r\n              communication, all within a single platform. With an intuitive\r\n              interface and a well-organized layout, the HRMS enhances\r\n              productivity and fosters transparency across the board. Its\r\n              primary aim is to make HR tasks more efficient, faster, and\r\n              dependable for everyone using it.\r\n            </p>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <p className=\"text-3xl font-bold text-[#783625]\">Features</p>\r\n            <p>\r\n              Our HRMS platform offers a comprehensive set of tools that make\r\n              human resource management simpler and more effective. It covers\r\n              everything from maintaining employee profiles to coordinating\r\n              internal events, with every feature crafted for ease of use and\r\n              maximum productivity. By promoting clear communication,\r\n              transparent data management, and seamless workflow coordination,\r\n              the system helps teams and organizations of all sizes handle HR\r\n              processes more quickly and efficiently.\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"md:max-w-[40%]\">\r\n          <div className=\"bg-[#8EA4D0]  rounded-2xl max-w-full cursor-pointer\">\r\n            <img src=\"image 5.svg\" alt=\"\" className=\"p-6 w-full\" />\r\n          </div>\r\n          < p className=\"text-center text-[20px]\">Access our integrated HRMS tools through the download button</p>\r\n          <div className=\"flex md:flex-row md:justify-around gap-1 flex-col justify-center\">\r\n            <button className=\"text-blue-600 cursor-pointer bg-[#D9D9D9] h-auto max-w-[200px] mx-auto px-2 md:my-9 my-4 rounded-2xl\r\n            focus:outline-none hover:text-black \">Click For Download</button>\r\n\r\n            <img src=\"image.svg\" alt=\"\" className=\"p-4 min-w-[200px] my-auto bg-[#D9D9D9] rounded-2xl mx-auto\" />\r\n\r\n          </div>\r\n          <p className=\"text-center text-[20px]\">for extended functionality and seamless management.</p>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\LogPage.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'navigate'. Either include it or remove the dependency array.","line":67,"column":6,"nodeType":"ArrayExpression","endLine":67,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [navigate]","fix":{"range":[2334,2336],"text":"[navigate]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nexport default function LogPage() {\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    // Clear any existing session to prevent stale data\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"user\");\r\n\r\n    const form = document.getElementById(\"loginForm\");\r\n    const emailInput = document.getElementById(\"Iemail\");\r\n    const passwordInput = document.getElementById(\"Ipassword\");\r\n    const togglePassword = document.getElementById(\"togglePassword\");\r\n    const emailError = document.getElementById(\"IemailError\");\r\n    const passwordError = document.getElementById(\"IpasswordError\");\r\n\r\n    togglePassword.addEventListener(\"click\", () => {\r\n      const type =\r\n        passwordInput.getAttribute(\"type\") === \"password\" ? \"text\" : \"password\";\r\n      passwordInput.setAttribute(\"type\", type);\r\n      togglePassword.textContent = type === \"password\" ? \"Show\" : \"Hide\";\r\n    });\r\n\r\n    const submitHandler = async (e) => {\r\n      e.preventDefault();\r\n      let isValid = true;\r\n\r\n      const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n      if (!emailPattern.test(emailInput.value.trim())) {\r\n        emailError.classList.remove(\"hidden\");\r\n        isValid = false;\r\n      } else {\r\n        emailError.classList.add(\"hidden\");\r\n      }\r\n\r\n      const passwordPattern =\r\n        /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/;\r\n\r\n      if (!passwordPattern.test(passwordInput.value.trim())) {\r\n        passwordError.classList.remove(\"hidden\");\r\n        isValid = false;\r\n      } else {\r\n        passwordError.classList.add(\"hidden\");\r\n      }\r\n\r\n      if (isValid) {\r\n        try {\r\n          const { login } = await import(\"../services/auth.service.js\");\r\n          await login(emailInput.value.trim(), passwordInput.value.trim());\r\n          alert(\"Login successful!\");\r\n          form.reset();\r\n          navigate(\"/dashboard\");\r\n        } catch (error) {\r\n          alert(error.message);\r\n        }\r\n      }\r\n    };\r\n\r\n    form.addEventListener(\"submit\", submitHandler);\r\n\r\n    return () => {\r\n      togglePassword.replaceWith(togglePassword.cloneNode(true));\r\n      form.replaceWith(form.cloneNode(true));\r\n      form.removeEventListener(\"submit\", submitHandler);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"relative min-h-screen w-screen flex items-center justify-center font-[Poppins] px-4 md:px-12 lg:px-24 py-12 bg-gray-50 dark:bg-[#020839]\">\r\n      <button\r\n  onClick={() => {\r\n    document.documentElement.classList.toggle(\"dark\");\r\n  }}\r\n  className=\"\r\n    absolute top-4 right-4\r\n    px-4 py-2\r\n    rounded-full\r\n    bg-white text-black\r\n    dark:bg-black dark:text-white\r\n    border border-gray-300 dark:border-gray-500\r\n    shadow-md\r\n    z-50\r\n  \"\r\n>\r\n  toggle theme\r\n</button>\r\n\r\n      <div className=\"relative z-10 w-full max-w-5xl bg-white dark:bg-[#2C50AB] rounded-lg shadow-xl overflow-hidden min-h-[75vh] flex flex-col md:flex-row\">\r\n\r\n\r\n        {/* WATERMARK inside card ‚Äî now moved up */}\r\n        <img\r\n          src=\"flower1.png\"\r\n          alt=\"watermark\"\r\n          className=\"\r\n            absolute left-1/2 \r\n            top-1/3\r\n            -translate-x-1/2\r\n            -translate-y-1/2\r\n            w-3/3 \r\n            object-contain \r\n            opacity-15 \r\n            pointer-events-none \r\n            select-none \r\n            md:hidden\r\n          \"\r\n          aria-hidden=\"true\"\r\n        />\r\n\r\n\r\n        {/* Left side - Login form */}\r\n        <div className=\"w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-center\">\r\n          <h3 className=\"text-3xl md:text-4xl font-bold mb-6 text-black dark:text-white\">\r\n            Login in\r\n          </h3>\r\n\r\n          <div className=\"space-y-4\">\r\n            {/* GOOGLE LOGIN */}\r\n            <button\r\n              className=\"w-full flex items-center justify-center gap-2 py-3 px-4 border border-gray-300 rounded-full bg-white text-gray-700 hover:bg-gray-50 transition-colors\"\r\n              onClick={() =>\r\n                window.open(\"https://google.com\", \"popupWindow\", \"width=600,height=600\")\r\n              }\r\n            >\r\n              <img src=\"googleLogo.png\" alt=\"Google logo\" className=\"w-5 h-5\" />\r\n              <span>Continue With Google</span>\r\n            </button>\r\n\r\n            {/* FACEBOOK LOGIN */}\r\n            <button\r\n              className=\"w-full flex items-center justify-center gap-2 py-3 px-4 border border-gray-300 rounded-full bg-white text-gray-700 hover:bg-gray-50 transition-colors\"\r\n              onClick={() =>\r\n                window.open(\"https://facebook.com\", \"popupWindow\", \"width=600,height=600\")\r\n              }\r\n            >\r\n              <img src=\"facebookLogo.png\" alt=\"Facebook logo\" className=\"w-5 h-5\" />\r\n              <span>Continue With Facebook</span>\r\n            </button>\r\n\r\n            <div className=\"flex items-center my-4\">\r\n              <div className=\"grow h-px bg-gray-300\" />\r\n              <span className=\"mx-4 text-gray-500 dark:text-[#E5E7EB]\">or</span>\r\n              <div className=\"grow h-px bg-gray-300\" />\r\n            </div>\r\n\r\n            {/* FORM */}\r\n            <form id=\"loginForm\" className=\"flex flex-col gap-3\">\r\n              <label className=\"text-xs text-gray-700  dark:text-[#E5E7EB] font-bold\">Email Address</label>\r\n              <input\r\n                type=\"email\"\r\n                id=\"Iemail\"\r\n                className=\"w-full border rounded-lg px-3 py-2 text-sm bg-white dark:bg-[#020839] dark:text-white dark:border-[#88AAFF]\"\r\n                autoComplete=\"email\"\r\n              />\r\n              <p id=\"IemailError\" className=\"hidden text-red-500 text-xs mt-1\">\r\n                Please enter a valid email address.\r\n              </p>\r\n\r\n              <label className=\"text-xs text-gray-700 font-bold\">Password</label>\r\n\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"password\"\r\n                  id=\"Ipassword\"\r\n                  className=\"w-full border rounded-lg px-3 py-2 text-sm bg-white\"\r\n                  autoComplete=\"current-password\"\r\n                />\r\n                <span\r\n                  id=\"togglePassword\"\r\n                  className=\"absolute right-3 top-2 cursor-pointer text-xs text-gray-600\"\r\n                >\r\n                  Show\r\n                </span>\r\n              </div>\r\n              <p id=\"IpasswordError\" className=\"hidden text-red-500 text-xs mt-1\">\r\n                Password must include uppercase, lowercase, number and symbol.\r\n              </p>\r\n\r\n              <div className=\"flex justify-end\">\r\n                <a href=\"/\" className=\"text-xs text-gray-500 hover:underline\">\r\n                  forget password\r\n                </a>\r\n              </div>\r\n\r\n              <button className=\"mt-4 w-full rounded-full bg-blue-600 text-white px-5 py-2 text-sm font-semibold hover:bg-blue-700\">\r\n                Log in\r\n              </button>\r\n\r\n              <div className=\"text-sm text-gray-600\">\r\n                Don't have an account?{\" \"}\r\n                <Link to=\"/Signup\" className=\"text-blue-400\">\r\n                  Create account\r\n                </Link>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right side - Desktop illustration */}\r\n        <div className=\"w-full md:w-1/2 hidden md:flex items-center justify-center p-8\">\r\n          <img\r\n            src=\"flower1.png\"\r\n            alt=\"Flower illustration\"\r\n            className=\"w-full max-w-md object-contain\"\r\n          />\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\PrivacyPolicy.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\ProfessionalEventsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'sidebarOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"sidebarOpen"},"fix":{"range":[312,323],"text":""},"desc":"Remove unused variable 'sidebarOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setSidebarOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"setSidebarOpen"},"fix":{"range":[323,339],"text":""},"desc":"Remove unused variable 'setSidebarOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":127,"column":83,"nodeType":"Identifier","messageId":"unusedVar","endLine":127,"endColumn":84},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":127,"column":86,"nodeType":"BlockStatement","messageId":"unexpected","endLine":127,"endColumn":88,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[4442,4442],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":135,"column":78,"nodeType":"Identifier","messageId":"unusedVar","endLine":135,"endColumn":79},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":135,"column":81,"nodeType":"BlockStatement","messageId":"unexpected","endLine":135,"endColumn":83,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[4857,4857],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":176,"column":78,"nodeType":"Identifier","messageId":"unusedVar","endLine":176,"endColumn":79},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":176,"column":81,"nodeType":"BlockStatement","messageId":"unexpected","endLine":176,"endColumn":83,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[6012,6012],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":196,"column":80,"nodeType":"Identifier","messageId":"unusedVar","endLine":196,"endColumn":81},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":196,"column":83,"nodeType":"BlockStatement","messageId":"unexpected","endLine":196,"endColumn":85,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[6631,6631],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { getAllEvents, createEvent as createEventAPI, registerForEvent, deleteEvent as deleteEventAPI, getUserEvents } from '../services/event.service';\r\n\r\nconst ProfessionalEventsPage = () => {\r\n  const [activeTab, setActiveTab] = useState('all');\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showCreateEventModal, setShowCreateEventModal] = useState(false);\r\n  const [showJoinModal, setShowJoinModal] = useState(false);\r\n  const [selectedEvent, setSelectedEvent] = useState(null);\r\n  const [joinedEvents, setJoinedEvents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [joinForm, setJoinForm] = useState({\r\n    name: '',\r\n    email: '',\r\n    company: '',\r\n    position: ''\r\n  });\r\n\r\n  const [newEvent, setNewEvent] = useState({\r\n    title: '',\r\n    location: '',\r\n    description: '',\r\n    event_date: '',\r\n    start_time: '09:00',\r\n    end_time: '17:00',\r\n    event_type: 'Conference',\r\n    max_attendees: 100\r\n  });\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n\r\n  React.useEffect(() => {\r\n    const userStr = localStorage.getItem(\"user\");\r\n    if (userStr) {\r\n      const user = JSON.parse(userStr);\r\n      setIsAdmin(user.role === 'Admin');\r\n      setCurrentUser(user);\r\n    }\r\n  }, []);\r\n\r\n  // Load events the current user has joined (so registrations persist across refresh)\r\n  const fetchAndMergeUserEvents = async () => {\r\n    try {\r\n      const res = await getUserEvents();\r\n      const evs = Array.isArray(res) ? res : (res.events || res.data || []);\r\n      const ids = (evs || []).map(e => e.id).filter(Boolean);\r\n      // also include any locally stored joined events (fallback if server call misses it)\r\n      const local = JSON.parse(localStorage.getItem('joinedEvents') || '[]');\r\n      const merged = Array.from(new Set([...(ids || []), ...(Array.isArray(local) ? local : [])]));\r\n      setJoinedEvents(merged);\r\n      localStorage.setItem('joinedEvents', JSON.stringify(merged));\r\n    } catch (err) {\r\n      console.warn('Failed to load user events', err);\r\n      // fallback to local storage if server fails\r\n      const local = JSON.parse(localStorage.getItem('joinedEvents') || '[]');\r\n      if (Array.isArray(local) && local.length) setJoinedEvents(local);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (currentUser && currentUser.id) {\r\n      fetchAndMergeUserEvents();\r\n    }\r\n\r\n    const onEventsUpdated = () => {\r\n      if (currentUser && currentUser.id) fetchAndMergeUserEvents();\r\n    };\r\n    window.addEventListener('events:updated', onEventsUpdated);\r\n    return () => window.removeEventListener('events:updated', onEventsUpdated);\r\n  }, [currentUser]);\r\n\r\n  // Fetch events from backend\r\n  const [professionalEvents, setProfessionalEvents] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchEvents();\r\n  }, []);\r\n\r\n  const fetchEvents = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const events = await getAllEvents();\r\n      setProfessionalEvents(events);\r\n    } catch (err) {\r\n      console.error(\"Error fetching events:\", err);\r\n      setError(\"Failed to load events. Please try again.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Determine event category based on date\r\n  const getEventCategory = (eventDate) => {\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    const eventDateObj = new Date(eventDate);\r\n    eventDateObj.setHours(0, 0, 0, 0);\r\n\r\n    return eventDateObj >= today ? 'upcoming' : 'past';\r\n  };\r\n\r\n  const filteredEvents = activeTab === 'all'\r\n    ? professionalEvents\r\n    : professionalEvents.filter(event => getEventCategory(event.event_date) === activeTab);\r\n\r\n  const handleJoinClick = (event) => {\r\n    setSelectedEvent(event);\r\n    setShowJoinModal(true);\r\n  };\r\n\r\n  const handleJoinSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedEvent) return;\r\n\r\n    if (isEventJoined(selectedEvent.id)) {\r\n      alert('You are already registered for this event');\r\n      setShowJoinModal(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await registerForEvent(selectedEvent.id, \"Confirmed\");\r\n      setJoinedEvents(prev => {\r\n        const next = Array.from(new Set([...(prev || []), selectedEvent.id]));\r\n        try { localStorage.setItem('joinedEvents', JSON.stringify(next)); } catch(e) {}\r\n        return next;\r\n      });\r\n      alert(`Successfully registered for: ${selectedEvent.title}\\n\\nWe've sent confirmation to ${joinForm.email}`);\r\n      setShowJoinModal(false);\r\n      setJoinForm({ name: '', email: '', company: '', position: '' });\r\n      // Refresh events to get updated attendee count\r\n      fetchEvents();\r\n      try { window.dispatchEvent(new CustomEvent('events:updated')); } catch(e) {}\r\n    } catch (error) {\r\n      alert(`Failed to register: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleCreateEvent = () => {\r\n    setShowCreateEventModal(true);\r\n  };\r\n\r\n  const handleSubmitEvent = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const eventData = {\r\n        title: newEvent.title,\r\n        description: newEvent.description,\r\n        event_date: newEvent.event_date,\r\n        start_time: newEvent.start_time,\r\n        end_time: newEvent.end_time,\r\n        location: newEvent.location,\r\n        event_type: newEvent.event_type,\r\n        status: 'Upcoming',\r\n        max_attendees: newEvent.max_attendees\r\n      };\r\n\r\n      await createEventAPI(eventData);\r\n\r\n      setNewEvent({\r\n        title: '',\r\n        location: '',\r\n        description: '',\r\n        event_date: '',\r\n        start_time: '09:00',\r\n        end_time: '17:00',\r\n        event_type: 'Conference',\r\n        max_attendees: 100\r\n      });\r\n      setShowCreateEventModal(false);\r\n      alert('Event created successfully!');\r\n      // Refresh events list\r\n      fetchEvents();\r\n      try { window.dispatchEvent(new CustomEvent('events:updated')); } catch(e) {}\r\n    } catch (error) {\r\n      alert(`Failed to create event: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setNewEvent(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleDeleteEvent = async (eventId) => {\r\n    if (window.confirm('Are you sure you want to delete this event? This action cannot be undone.')) {\r\n      try {\r\n        await deleteEventAPI(eventId);\r\n        alert('Event deleted successfully');\r\n        fetchEvents();\r\n        try { window.dispatchEvent(new CustomEvent('events:updated')); } catch(e) {}\r\n      } catch (error) {\r\n        alert(`Failed to delete event: ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleJoinFormChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setJoinForm(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const isEventJoined = (eventId) => {\r\n    return joinedEvents.includes(eventId);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Join Event Modal */}\r\n      {showJoinModal && selectedEvent && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md mx-4\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Join Event</h3>\r\n              <button\r\n                onClick={() => setShowJoinModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"mb-4 p-3 bg-blue-50 rounded-lg\">\r\n              <h4 className=\"font-medium text-gray-900\">{selectedEvent.title}</h4>\r\n              <p className=\"text-sm text-gray-600\">{selectedEvent.date} ‚Ä¢ {selectedEvent.location}</p>\r\n            </div>\r\n\r\n            <form onSubmit={handleJoinSubmit}>\r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Full Name *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    value={joinForm.name}\r\n                    onChange={handleJoinFormChange}\r\n                    required\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                    placeholder=\"Enter your full name\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email *</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    value={joinForm.email}\r\n                    onChange={handleJoinFormChange}\r\n                    required\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                    placeholder=\"Enter your email\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Company</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"company\"\r\n                    value={joinForm.company}\r\n                    onChange={handleJoinFormChange}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                    placeholder=\"Enter your company name\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Position</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"position\"\r\n                    value={joinForm.position}\r\n                    onChange={handleJoinFormChange}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                    placeholder=\"Enter your position\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-6 flex justify-end space-x-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowJoinModal(false)}\r\n                  className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  Confirm Registration\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Create Event Modal */}\r\n      {showCreateEventModal && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md mx-4\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Create New Event</h3>\r\n              <button\r\n                onClick={() => setShowCreateEventModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            <form onSubmit={handleSubmitEvent}>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Event Title</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    value={newEvent.title}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Location</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"location\"\r\n                    value={newEvent.location}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={newEvent.description}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                    rows=\"3\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Event Date</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    name=\"event_date\"\r\n                    value={newEvent.event_date}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                  />\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Start Time</label>\r\n                    <input\r\n                      type=\"time\"\r\n                      name=\"start_time\"\r\n                      value={newEvent.start_time}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">End Time</label>\r\n                    <input\r\n                      type=\"time\"\r\n                      name=\"end_time\"\r\n                      value={newEvent.end_time}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Event Type</label>\r\n                  <select\r\n                    name=\"event_type\"\r\n                    value={newEvent.event_type}\r\n                    onChange={handleInputChange}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                  >\r\n                    <option value=\"Conference\">Conference</option>\r\n                    <option value=\"Workshop\">Workshop</option>\r\n                    <option value=\"Symposium\">Symposium</option>\r\n                    <option value=\"Expo\">Expo</option>\r\n                    <option value=\"Forum\">Forum</option>\r\n                    <option value=\"Team Building\">Team Building</option>\r\n                    <option value=\"Training\">Training</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Max Attendees</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    name=\"max_attendees\"\r\n                    value={newEvent.max_attendees}\r\n                    onChange={handleInputChange}\r\n                    min=\"1\"\r\n                    required\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-6 flex justify-end space-x-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowCreateEventModal(false)}\r\n                  className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  Create Event\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex\">\r\n\r\n\r\n        {/* Main Content */}\r\n        <div className=\"flex flex-col flex-1 w-full\">\r\n          <main className=\"flex-1\">\r\n            <div className=\"py-4\">\r\n              <div className=\"max-w-7xl mx-auto px-3 sm:px-4 md:px-6\">\r\n                {/* Header Section */}\r\n                <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6\">\r\n                  <div>\r\n                    <h1 className=\"text-2xl font-bold text-gray-900\">Events</h1>\r\n                    <p className=\"mt-1 text-sm text-gray-600\">Discover professional HR events and conferences</p>\r\n                  </div>\r\n                  {isAdmin && (\r\n                    <button\r\n                      onClick={handleCreateEvent}\r\n                      className=\"mt-2 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 shadow-sm\"\r\n                    >\r\n                      <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\r\n                      </svg>\r\n                      Create Event\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Tab Navigation (with counts) */}\r\n                <div className=\"mb-6 border-b border-gray-200\">\r\n                  <nav className=\"-mb-px flex space-x-8 overflow-x-auto\">\r\n                    {(() => {\r\n                      const counts = {\r\n                        all: professionalEvents.length,\r\n                        upcoming: professionalEvents.filter(e => getEventCategory(e.event_date) === 'upcoming').length,\r\n                        past: professionalEvents.filter(e => getEventCategory(e.event_date) === 'past').length,\r\n                      };\r\n\r\n                      return ['all', 'upcoming', 'past'].map((tab) => (\r\n                        <button\r\n                          key={tab}\r\n                          onClick={() => setActiveTab(tab)}\r\n                          className={`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${activeTab === tab\r\n                            ? 'border-blue-600 text-blue-600'\r\n                            : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                            }`}\r\n                        >\r\n                          {tab.charAt(0).toUpperCase() + tab.slice(1)}\r\n                          <span className=\"ml-2 bg-gray-100 text-gray-700 py-0.5 px-2 rounded-full text-xs\">\r\n                            {counts[tab]}\r\n                          </span>\r\n                        </button>\r\n                      ));\r\n                    })()}\r\n                  </nav>\r\n                </div>\r\n\r\n                {/* Events Grid */}\r\n                {loading ? (\r\n                  <div className=\"text-center py-12\">\r\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n                    <p className=\"mt-4 text-gray-600\">Loading events...</p>\r\n                  </div>\r\n                ) : error ? (\r\n                  <div className=\"text-center py-12\">\r\n                    <div className=\"bg-red-50 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4\">\r\n                      <svg className=\"h-8 w-8 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Error Loading Events</h3>\r\n                    <p className=\"text-sm text-gray-500 mb-4\">{error}</p>\r\n                    <button\r\n                      onClick={fetchEvents}\r\n                      className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\r\n                    >\r\n                      Retry\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3\">\r\n                    {filteredEvents.map((event) => (\r\n                      <div key={event.id} className=\"bg-white overflow-hidden border border-gray-200 rounded-xl hover:shadow-lg transition-all duration-300 group\">\r\n                        <div className=\"relative h-40 bg-gradient-to-br from-blue-500 to-purple-600 overflow-hidden\">\r\n                          <div className=\"absolute inset-0 bg-black opacity-20\"></div>\r\n                          <div className=\"absolute top-3 left-3\">\r\n                            <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-white bg-opacity-90 text-blue-800\">\r\n                              {event.event_type || 'Event'}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"absolute top-3 right-3\">\r\n                            <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-black bg-opacity-70 text-white\">\r\n                              {event.attendee_count || 0} attending\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4\">\r\n                          <div className=\"flex items-center space-x-1 mb-2\">\r\n                            <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                            </svg>\r\n                            <span className=\"text-sm text-gray-500\">\r\n                              {new Date(event.event_date).toLocaleDateString('en-US', {\r\n                                year: 'numeric',\r\n                                month: 'long',\r\n                                day: 'numeric'\r\n                              })}\r\n                            </span>\r\n                          </div>\r\n\r\n                          <h3 className=\"text-lg font-semibold text-gray-900 mb-2 line-clamp-1\">{event.title}</h3>\r\n\r\n                          <div className=\"flex items-center text-sm text-gray-500 mb-3\">\r\n                            <svg className=\"shrink-0 mr-2 h-4 w-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                            </svg>\r\n                            <span className=\"line-clamp-1\">{event.location || 'TBA'}</span>\r\n                          </div>\r\n\r\n                          <p className=\"text-sm text-gray-600 leading-relaxed mb-4 line-clamp-2\">{event.description}</p>\r\n\r\n                          <div className=\"flex gap-2\">\r\n                            <button\r\n                              onClick={() => isEventJoined(event.id) ? null : handleJoinClick(event)}\r\n                              disabled={isEventJoined(event.id)}\r\n                              className={`flex-1 inline-flex items-center justify-center px-4 py-2.5 border text-sm font-medium rounded-lg transition-all duration-200 ${isEventJoined(event.id)\r\n                                ? 'bg-green-50 text-green-700 border-green-200 cursor-not-allowed'\r\n                                : 'border-transparent text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm'\r\n                                }`}\r\n                            >\r\n                              {isEventJoined(event.id) ? (\r\n                                <>\r\n                                  <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                                  </svg>\r\n                                  Registered\r\n                                </>\r\n                              ) : (\r\n                                'Register Now'\r\n                              )}\r\n                            </button>\r\n\r\n                            {(isAdmin || (currentUser && event.created_by === currentUser.id)) && (\r\n                              <button\r\n                                onClick={() => handleDeleteEvent(event.id)}\r\n                                className=\"p-2.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200\"\r\n                                title=\"Delete Event\"\r\n                              >\r\n                                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                </svg>\r\n                              </button>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Empty State */}\r\n              {filteredEvents.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <div className=\"bg-blue-50 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4\">\r\n                    <svg className=\"h-8 w-8 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                    </svg>\r\n                  </div>\r\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No events found</h3>\r\n                  <p className=\"text-sm text-gray-500 mb-4\">There are no {activeTab} events at the moment.</p>\r\n                  {isAdmin && (\r\n                    <button\r\n                      onClick={handleCreateEvent}\r\n                      className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    >\r\n                      Create First Event\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfessionalEventsPage;\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\Promotion.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'fetchEmployees' and 'fetchPromotions'. Either include them or remove the dependency array.","line":81,"column":6,"nodeType":"ArrayExpression","endLine":81,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchEmployees, fetchPromotions]","fix":{"range":[3278,3280],"text":"[fetchEmployees, fetchPromotions]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Search, Filter, Save, X, ChevronRight, ArrowLeft, Calendar, DollarSign, Users, Briefcase } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Promotion = () => {\r\n  const navigate = useNavigate();\r\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [departmentFilter, setDepartmentFilter] = useState('All');\r\n  const [designationFilter, setDesignationFilter] = useState('All');\r\n\r\n  const [promotions, setPromotions] = useState([]);\r\n  const [newRole, setNewRole] = useState('');\r\n  const [newSalary, setNewSalary] = useState('');\r\n  const [reason, setReason] = useState('');\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [loadingPromotions, setLoadingPromotions] = useState(false);\r\n  \r\n\r\n  const [employees, setEmployees] = useState([]);\r\n\r\n  const fetchEmployees = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`${apiBase}/api/users`, {\r\n        headers: { Authorization: token ? `Bearer ${token}` : '' }\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        const list = data.users || data;\r\n        const normalized = list.map(u => ({\r\n          id: u.id,\r\n          name: u.fullname || u.name || `${u.first_name || ''} ${u.last_name || ''}`.trim() || `User ${u.id}`,\r\n          dept: u.department || u.dept || 'General',\r\n          tenure: u.date_of_joining ? `${Math.max(0, new Date().getFullYear() - new Date(u.date_of_joining).getFullYear())} Years` : (u.tenure || 'N/A'),\r\n          currentRole: u.designation || u.currentRole || 'N/A',\r\n          currentSalary: u.salary || u.currentSalary || '0.00 to 6.00',\r\n          employeeId: u.employee_id || u.employeeId || `EMP-${u.id}`,\r\n          original: u\r\n        }));\r\n        setEmployees(normalized);\r\n        if (!selectedEmployee && normalized.length) setSelectedEmployee(normalized[0]);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch employees', err);\r\n    }\r\n  };\r\n\r\n  const filteredEmployees = employees.filter(emp => \r\n    emp.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    emp.employeeId.toLowerCase().includes(searchTerm.toLowerCase())\r\n  ).filter(emp => \r\n    departmentFilter === 'All' || emp.dept === departmentFilter\r\n  ).filter(emp =>\r\n    designationFilter === 'All' || emp.currentRole.includes(designationFilter)\r\n  );\r\n\r\n  const apiBase = import.meta.env.VITE_API_BASE || 'http://localhost:3000';\r\n\r\n  const fetchPromotions = async () => {\r\n    setLoadingPromotions(true);\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`${apiBase}/api/promotions`, { headers: { Authorization: token ? `Bearer ${token}` : '' } });\r\n      if (res.ok) {\r\n        const json = await res.json();\r\n        setPromotions(json.promotions || []);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch promotions', err);\r\n    } finally {\r\n      setLoadingPromotions(false);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    fetchPromotions();\r\n    fetchEmployees();\r\n    const u = JSON.parse(localStorage.getItem('user') || '{}');\r\n    setIsAdmin(u.role === 'Admin');\r\n  }, []);\r\n\r\n  const savePromotion = async () => {\r\n    if (!isAdmin) {\r\n      alert('Only admins can save promotions');\r\n      return;\r\n    }\r\n    if (!selectedEmployee) {\r\n      alert('Please select an employee');\r\n      return;\r\n    }\r\n    if (!newRole) {\r\n      alert('Please select a new role');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`${apiBase}/api/promotions`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json', Authorization: token ? `Bearer ${token}` : '' },\r\n        body: JSON.stringify({ employee_id: selectedEmployee.id, new_role: newRole, new_salary: newSalary, reason })\r\n      });\r\n\r\n      const json = await res.json();\r\n      if (!res.ok) {\r\n        alert(json.message || 'Failed to save promotion');\r\n        return;\r\n      }\r\n\r\n      alert('Promotion saved');\r\n      setNewRole(''); setNewSalary(''); setReason('');\r\n      fetchPromotions();\r\n    } catch (err) {\r\n      console.error('Save promotion failed', err);\r\n      alert('Failed to save promotion');\r\n    }\r\n  };\r\n\r\n  const applyToPromotion = async (promotionId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) { alert('Please login'); return; }\r\n      const cover = prompt('Enter a short cover note (optional)') || '';\r\n      const res = await fetch(`${apiBase}/api/promotions/${promotionId}/apply`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\r\n        body: JSON.stringify({ cover_letter: cover })\r\n      });\r\n      const json = await res.json();\r\n      if (!res.ok) { alert(json.message || 'Apply failed'); return; }\r\n      alert('Application submitted');\r\n    } catch (err) {\r\n      console.error('Apply failed', err);\r\n      alert('Apply failed');\r\n    }\r\n  };\r\n\r\n  // Admin: fetch applications for a promotion\r\n  const [applications, setApplications] = useState([]);\r\n  const [appsLoading, setAppsLoading] = useState(false);\r\n  const [viewingPromotionId, setViewingPromotionId] = useState(null);\r\n\r\n  const fetchApplications = async (promotionId) => {\r\n    setAppsLoading(true);\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`${apiBase}/api/promotions/${promotionId}/applications`, { headers: { Authorization: token ? `Bearer ${token}` : '' } });\r\n      if (res.ok) {\r\n        const json = await res.json();\r\n        setApplications(json.applications || []);\r\n        setViewingPromotionId(promotionId);\r\n      } else {\r\n        const json = await res.json();\r\n        alert(json.message || 'Failed to fetch applications');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch applications', err);\r\n    } finally {\r\n      setAppsLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateApplicationStatus = async (promotionId, appId, status) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) { alert('Please login'); return; }\r\n      const res = await fetch(`${apiBase}/api/promotions/${promotionId}/applications/${appId}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\r\n        body: JSON.stringify({ status })\r\n      });\r\n      const json = await res.json();\r\n      if (!res.ok) { alert(json.message || 'Failed to update'); return; }\r\n      alert('Application updated');\r\n      // Refresh apps, promotions and employee data\r\n      fetchApplications(promotionId);\r\n      fetchPromotions();\r\n      fetchEmployees();\r\n    } catch (err) {\r\n      console.error('Failed to update application', err);\r\n      alert('Failed to update application');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-6\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header Section */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"mb-4\">\r\n            <button onClick={() => navigate(-1)} className=\"inline-flex items-center gap-2 text-gray-600 hover:text-gray-800 px-3 py-2 rounded-md border border-gray-200 hover:bg-gray-50\">\r\n              <ArrowLeft size={16} />\r\n              <span className=\"text-sm font-medium\">Back</span>\r\n            </button>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-8 h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full\"></div>\r\n            <h2 className=\"text-3xl font-bold text-gray-900\">HRMS</h2>\r\n            <ChevronRight className=\"text-gray-400\" size={20} />\r\n            <h3 className=\"text-xl font-semibold text-blue-600\">Employee Promotion</h3>\r\n          </div>\r\n          <p className=\"text-gray-600 mt-2\">Review and update employee promotion details</p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n          {/* Left Section - Employee List */}\r\n          <div className=\"lg:col-span-2\">\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden\">\r\n              <div className=\"p-6 bg-gradient-to-r from-blue-600 to-indigo-600 text-white\">\r\n                <h2 className=\"text-xl font-bold\">Employee Promotion</h2>\r\n                <p className=\"text-blue-100\">Review and update employee promotion details</p>\r\n              </div>\r\n              \r\n              {/* Search and Filter Section */}\r\n              <div className=\"p-6 border-b border-gray-200\">\r\n                <div className=\"flex flex-col md:flex-row gap-4 mb-4\">\r\n                  <div className=\"flex-1 relative\">\r\n                    <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400\" size={18} />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Search by Name / ID\"\r\n                      value={searchTerm}\r\n                      onChange={(e) => setSearchTerm(e.target.value)}\r\n                      className=\"w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex gap-3\">\r\n                    <div className=\"relative\">\r\n                      <Filter className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={18} />\r\n                      <select\r\n                        value={departmentFilter}\r\n                        onChange={(e) => setDepartmentFilter(e.target.value)}\r\n                        className=\"pl-10 pr-8 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none\"\r\n                      >\r\n                        <option value=\"All\">Filter by Department</option>\r\n                        <option value=\"IT\">IT</option>\r\n                        <option value=\"Sales\">Sales</option>\r\n                        <option value=\"HR\">HR</option>\r\n                        <option value=\"Finance\">Finance</option>\r\n                      </select>\r\n                    </div>\r\n                    <div className=\"relative\">\r\n                      <Briefcase className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={18} />\r\n                      <select\r\n                        value={designationFilter}\r\n                        onChange={(e) => setDesignationFilter(e.target.value)}\r\n                        className=\"pl-10 pr-8 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none\"\r\n                      >\r\n                        <option value=\"All\">Filter by Designation</option>\r\n                        <option value=\"Software\">Software Engineer</option>\r\n                        <option value=\"Sales\">Sales Executive</option>\r\n                        <option value=\"HR\">HR Manager</option>\r\n                        <option value=\"Finance\">Finance Analyst</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                  {/* Promotions List */}\r\n                  <div className=\"mb-4\">\r\n                    <h4 className=\"text-sm font-semibold text-gray-700 mb-2\">Recent Promotions</h4>\r\n                    <div className=\"space-y-2\">\r\n                      {loadingPromotions ? (\r\n                        <div className=\"text-sm text-gray-500\">Loading promotions‚Ä¶</div>\r\n                      ) : promotions.length === 0 ? (\r\n                        <div className=\"text-sm text-gray-500\">No promotions yet</div>\r\n                      ) : promotions.map(p => (\r\n                        <div key={p.id} className=\"p-3 bg-gray-50 rounded-lg border\">\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                              <div className=\"font-medium text-gray-900\">{p.employee_name} ‚Üí <span className=\"text-green-600\">{p.new_role}</span></div>\r\n                              <div className=\"text-xs text-gray-500\">{new Date(p.created_at).toLocaleDateString()}</div>\r\n                            </div>\r\n                            <div>\r\n                              {isAdmin && (\r\n                                <div className=\"flex items-center gap-3\">\r\n                                  <button onClick={() => fetchApplications(p.id)} className=\"text-sm text-blue-600\">View Applications</button>\r\n                                  <button onClick={() => applyToPromotion(p.id)} className=\"text-sm text-blue-600\">Create Application</button>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Applications panel for admins */}\r\n                          {isAdmin && viewingPromotionId === p.id && (\r\n                            <div className=\"mt-3 bg-white border rounded p-3\">\r\n                              {appsLoading ? (\r\n                                <div className=\"text-sm text-gray-500\">Loading applications‚Ä¶</div>\r\n                              ) : applications.length === 0 ? (\r\n                                <div className=\"text-sm text-gray-500\">No applications yet</div>\r\n                              ) : (\r\n                                <div className=\"space-y-2\">\r\n                                  {applications.map(app => (\r\n                                    <div key={app.id} className=\"flex items-center justify-between p-2 border rounded\">\r\n                                      <div>\r\n                                        <div className=\"font-medium text-gray-900\">{app.applicant_name} <span className=\"text-xs text-gray-500\">({app.applicant_email})</span></div>\r\n                                        <div className=\"text-sm text-gray-500\">{app.cover_letter}</div>\r\n                                        <div className=\"text-xs mt-1\">Status: <span className=\"font-semibold\">{app.status}</span></div>\r\n                                      </div>\r\n                                      <div className=\"flex items-center gap-2\">\r\n                                        <button onClick={() => updateApplicationStatus(p.id, app.id, 'accepted')} className=\"px-3 py-1 bg-green-100 text-green-700 rounded\">Accept</button>\r\n                                        <button onClick={() => updateApplicationStatus(p.id, app.id, 'rejected')} className=\"px-3 py-1 bg-red-100 text-red-700 rounded\">Reject</button>\r\n                                        <button onClick={() => updateApplicationStatus(p.id, app.id, 'cancelled')} className=\"px-3 py-1 bg-yellow-100 text-yellow-700 rounded\">Cancel</button>\r\n                                      </div>\r\n                                    </div>\r\n                                  ))}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Employee Table */}\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                      <thead>\r\n                        <tr className=\"bg-gray-50\">\r\n                          <th className=\"text-left py-4 px-6 font-semibold text-gray-700\">Name</th>\r\n                          <th className=\"text-left py-4 px-6 font-semibold text-gray-700\">CurrentRole</th>\r\n                          <th className=\"text-left py-4 px-6 font-semibold text-gray-700\">Department</th>\r\n                          <th className=\"text-left py-4 px-6 font-semibold text-gray-700\">Experience</th>\r\n                          <th className=\"text-left py-4 px-6 font-semibold text-gray-700\">Action</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"divide-y divide-gray-200\">\r\n                        {filteredEmployees.map((emp) => (\r\n                          <tr \r\n                            key={emp.id}\r\n                            onClick={() => setSelectedEmployee(emp)}\r\n                            className={`cursor-pointer transition-all duration-200 ${\r\n                              selectedEmployee?.id === emp.id \r\n                                ? 'bg-blue-50 border-l-4 border-blue-500' \r\n                                : 'hover:bg-gray-50'\r\n                            }`}\r\n                          >\r\n                            <td className=\"py-4 px-6\">\r\n                              <div className=\"font-semibold text-gray-900\">{emp.name}</div>\r\n                            </td>\r\n                            <td className=\"py-4 px-6\">\r\n                              <span className=\"text-gray-700\">{emp.currentRole}</span>\r\n                            </td>\r\n                            <td className=\"py-4 px-6\">\r\n                              <span className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                                emp.dept === 'IT' ? 'bg-blue-100 text-blue-800' :\r\n                                emp.dept === 'Sales' ? 'bg-purple-100 text-purple-800' :\r\n                                emp.dept === 'HR' ? 'bg-green-100 text-green-800' :\r\n                                'bg-yellow-100 text-yellow-800'\r\n                              }`}>\r\n                                {emp.dept}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"py-4 px-6\">\r\n                              <div className=\"flex items-center gap-2 text-gray-700\">\r\n                                <Calendar size={16} className=\"text-gray-400\" />\r\n                                {emp.tenure}\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"py-4 px-6\">\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <span className=\"text-blue-600 font-semibold\">1.00/10.15</span>\r\n                                {emp.name === 'Emilly' && (\r\n                                  <span className=\"text-green-600 font-semibold\">7.00/10.15</span>\r\n                                )}\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n\r\n              {/* Divider */}\r\n              <div className=\"border-t border-dashed border-gray-300 mx-6\"></div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Section - Promotion Form (admin only) */}\r\n          {isAdmin && (\r\n            <div className=\"lg:col-span-1\">\r\n              <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden h-full\">\r\n                <div className=\"p-6 bg-gradient-to-r from-green-500 to-emerald-600 text-white\">\r\n                  <h2 className=\"text-xl font-bold\">Promotion Form</h2>\r\n                </div>\r\n                \r\n                <div className=\"p-6 space-y-6\">\r\n                  {/* Current Details */}\r\n                  <div>\r\n                    <div className=\"flex items-center gap-2 mb-4\">\r\n                      <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\r\n                      <h3 className=\"text-lg font-bold text-gray-900\">Current Details</h3>\r\n                    </div>\r\n                    \r\n                    <div className=\"space-y-4 bg-blue-50 p-5 rounded-xl border border-blue-100\">\r\n                      <div className=\"space-y-1\">\r\n                        <div className=\"text-xs font-semibold text-gray-600 flex items-center gap-2\">\r\n                          <Users size={14} />\r\n                          Employee Name\r\n                        </div>\r\n                        <div className=\"text-lg font-semibold text-gray-900\">\r\n                          {selectedEmployee?.name || 'Emilly'}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"space-y-1\">\r\n                        <div className=\"text-xs font-semibold text-gray-600\">Employee ID</div>\r\n                        <div className=\"text-lg font-semibold text-gray-900\">\r\n                          {selectedEmployee?.employeeId || 'EMP-987'}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"space-y-1\">\r\n                        <div className=\"text-xs font-semibold text-gray-600\">Current Role</div>\r\n                        <div className=\"text-lg font-semibold text-gray-900\">\r\n                          {selectedEmployee?.currentRole || 'Sales Executive'}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"space-y-1\">\r\n                        <div className=\"text-xs font-semibold text-gray-600\">Department</div>\r\n                        <div className=\"text-lg font-semibold text-gray-900\">\r\n                          {selectedEmployee?.dept || 'Sales'}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"space-y-1\">\r\n                        <div className=\"text-xs font-semibold text-gray-600 flex items-center gap-2\">\r\n                          <DollarSign size={14} />\r\n                          Current Salary\r\n                        </div>\r\n                        <div className=\"text-lg font-semibold text-gray-900\">\r\n                          {selectedEmployee?.currentSalary || '0.00 to 6.00'}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* New Promotion Details */}\r\n                  <div>\r\n                    <div className=\"flex items-center gap-2 mb-4\">\r\n                      <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\r\n                      <h3 className=\"text-lg font-bold text-gray-900\">New Promotion Details</h3>\r\n                    </div>\r\n                    \r\n                    <div className=\"space-y-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                          New Role\r\n                        </label>\r\n                        <select value={newRole} onChange={(e)=>setNewRole(e.target.value)} className=\"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\">\r\n                          <option value=\"\">Select Role</option>\r\n                          <option>Senior Software Engineer</option>\r\n                          <option>Senior Sales Executive</option>\r\n                          <option>Senior HR Manager</option>\r\n                          <option>Senior Finance Analyst</option>\r\n                        </select>\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                          New Salary\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={newSalary}\r\n                          onChange={(e)=>setNewSalary(e.target.value)}\r\n                          className=\"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                          placeholder=\"--Enter salary--\"\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                          Promotion Reason\r\n                        </label>\r\n                        <textarea\r\n                          value={reason}\r\n                          onChange={(e)=>setReason(e.target.value)}\r\n                          className=\"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none\"\r\n                          rows=\"4\"\r\n                          placeholder=\"Enter Reason for Promotion......\"\r\n                        />\r\n                      </div>\r\n                      \r\n                      {/* Action Buttons */}\r\n                      <div className=\"flex gap-3 pt-4\">\r\n                        <button onClick={savePromotion} className={`flex-1 ${isAdmin ? 'bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700' : 'bg-gray-200 text-gray-500 cursor-not-allowed'} px-6 py-3 rounded-xl transition-all duration-300 font-semibold flex items-center justify-center gap-2 shadow-lg hover:shadow-xl`}>\r\n                          <Save size={18} />\r\n                          Save Promotion\r\n                        </button>\r\n                        <button onClick={()=>{ setNewRole(''); setNewSalary(''); setReason(''); }} className=\"flex-1 bg-gradient-to-r from-gray-200 to-gray-300 text-gray-800 px-6 py-3 rounded-xl hover:from-gray-300 hover:to-gray-400 transition-all duration-300 font-semibold flex items-center justify-center gap-2 shadow-lg hover:shadow-xl\">\r\n                          <X size={18} />\r\n                          Cancel\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Promotion;","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\RateApp.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\Recognition.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'leaderboard' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"leaderboard"},"fix":{"range":[482,493],"text":""},"desc":"Remove unused variable 'leaderboard'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setIsAdmin' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":427,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":427,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"setIsAdmin"},"fix":{"range":[14527,14539],"text":""},"desc":"Remove unused variable 'setIsAdmin'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":442,"column":81,"nodeType":"Identifier","messageId":"unusedVar","endLine":442,"endColumn":82},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":442,"column":84,"nodeType":"BlockStatement","messageId":"unexpected","endLine":442,"endColumn":87,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[15147,15148],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":609,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":609,"endColumn":31}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\r\nimport coin from \"../assets/coin.png\";\r\nimport medal from \"../assets/medal.png\";\r\nimport trophy from \"../assets/trophy.png\";\r\n\r\nexport default function RecognitionPage() {\r\n  const [selectedSection, setSelectedSection] = useState(\"recipient\");\r\n  const [selectedRecipientId, setSelectedRecipientId] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [filteredUsers, setFilteredUsers] = useState([]);\r\n  const [leaderboard, setLeaderboard] = useState([]);\r\n  const [recognitions, setRecognitions] = useState([]);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      // Fetch Users\r\n      const userRes = await fetch(\"http://localhost:3000/api/users\", {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` }\r\n      });\r\n      const userData = await userRes.json();\r\n      setUsers(userData.users || []);\r\n\r\n      // Fetch Leaderboard\r\n      const leaderboardRes = await fetch(\"http://localhost:3000/api/appreciations/leaderboard\", {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` }\r\n      });\r\n      const leaderboardData = await leaderboardRes.json();\r\n      const loggedInUser = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n      if (leaderboardData.success) {\r\n        const mappedLeaderboard = leaderboardData.data.map(user => {\r\n          const colors = [\"bg-yellow-100 text-yellow-800\", \"bg-blue-100 text-blue-800\", \"bg-purple-200 text-purple-800\", \"bg-gray-100 text-gray-800\", \"bg-green-100 text-green-800\"];\r\n          const colorClass = colors[user.id % colors.length];\r\n          const [avatarColor, textColor] = colorClass.split(\" text-\");\r\n\r\n          return {\r\n            ...user,\r\n            isCurrentUser: loggedInUser && user.id === loggedInUser.id,\r\n            avatarColor: avatarColor.trim(),\r\n            textColor: `text-${textColor.trim()}`\r\n          };\r\n        });\r\n        setLeaderboard(mappedLeaderboard);\r\n      }\r\n\r\n      // Fetch Recent Recognitions\r\n      const appRes = await fetch(\"http://localhost:3000/api/appreciations?source=recognition\", {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` }\r\n      });\r\n      const appData = await appRes.json();\r\n      if (appData.success) {\r\n        const mappedRecognitions = appData.data.map(item => ({\r\n          id: item.id,\r\n          name: item.recipient_name, // Display Recipient Name\r\n          time: new Date(item.created_at).toLocaleDateString(undefined, { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' }),\r\n          message: item.message,\r\n          points: `+${item.points} points`,\r\n          badge: item.category,\r\n          avatar: item.recipient_profile_picture || `https://ui-avatars.com/api/?name=${encodeURIComponent(item.recipient_name)}&background=random`,\r\n\r\n          // Extra fields for recent recognition card\r\n          created_at: item.created_at,\r\n          sender_name: item.sender_name,\r\n          user_liked: item.user_liked,\r\n          likes_count: item.likes_count,\r\n          recipient_name: item.recipient_name,\r\n        }));\r\n        setRecognitions(mappedRecognitions);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n\r\n\r\n  const [formData, setFormData] = useState({\r\n    recipientName: \"\",\r\n    department: \"IT & Systems\",\r\n    employeeId: \"\",\r\n    jobTitle: \"\",\r\n\r\n    appreciationType: \"\",\r\n    achievement: \"\",\r\n    appreciationDate: \"\",\r\n\r\n    contextMessage: \"\",\r\n    visibility: \"\",\r\n    approval: \"manager\"\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!selectedRecipientId) {\r\n      alert(\"Please select a valid recipient from the list\");\r\n      return;\r\n    }\r\n\r\n\r\n    const loggedInUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (loggedInUser && selectedRecipientId === loggedInUser.id) {\r\n      alert(\"You cannot appreciate yourself\");\r\n      return;\r\n    }\r\n    try {\r\n      const payload = {\r\n        recipient_id: Number(selectedRecipientId), // MUST be number\r\n        title: `${formData.appreciationType} Appreciation`,\r\n        category: formData.appreciationType,\r\n        message: `${formData.achievement}${formData.contextMessage ? \"\\n\\n\" + formData.contextMessage : \"\"}`,\r\n        emoji: \"üéâ\",\r\n        points: 0, // You might want to assign points based on type later\r\n        source: \"recognition\"\r\n      };\r\n\r\n      console.log(\"Submitting payload:\", payload);\r\n\r\n      const res = await fetch(\"http://localhost:3000/api/appreciations\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}` // REQUIRED\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      if (res.status === 401) {\r\n        alert(\"Session expired. Please login again.\");\r\n        localStorage.removeItem(\"token\");\r\n        return;\r\n      }\r\n      const data = await res.json();\r\n      console.log(\"RESPONSE:\", data);\r\n      if (!res.ok) {\r\n        throw new Error(data.message || \"Backend error\");\r\n      }\r\n\r\n      alert(\"Appreciation sent successfully\");\r\n\r\n      // Refresh the data to show the new appreciation and updated leaderboard\r\n      fetchData();\r\n\r\n      // Reset relevant form fields\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        recipientName: \"\",\r\n        employeeId: \"\",\r\n        appreciationType: \"\",\r\n        achievement: \"\",\r\n        contextMessage: \"\"\r\n      }));\r\n      setSelectedRecipientId(null);\r\n\r\n    } catch (err) {\r\n      console.error(\"FULL ERROR:\", err);\r\n      alert(err.message || \"Something went wrong\");\r\n    }\r\n  };\r\n\r\n\r\n  const renderRecipientForm = () => (\r\n    <>\r\n\r\n      <h2 className=\"text-lg font-semibold text-purple-700\">\r\n        Select the Recipient\r\n      </h2>\r\n      <p className=\"text-gray-500 mb-6\">\r\n        Choose a colleague you'd like to appreciate\r\n      </p>\r\n\r\n      {/* Recipient Name */}\r\n      <div className=\"mb-5\">\r\n        <label className=\"block text-sm font-semibold mb-1\">\r\n          Recipient\r\n        </label>\r\n\r\n        <input\r\n          type=\"text\"\r\n          value={formData.recipientName}\r\n          onChange={(e) => {\r\n            const value = e.target.value;\r\n            setFormData(prev => ({ ...prev, recipientName: value }));\r\n\r\n            const matches = users.filter(user =>\r\n              user.fullname.toLowerCase().includes(value.toLowerCase())\r\n            );\r\n\r\n            setFilteredUsers(matches);\r\n          }}\r\n          placeholder=\"Enter recipient name\"\r\n          className=\"w-full p-3 border rounded-lg\"\r\n        />\r\n        {filteredUsers.length > 0 && (\r\n          <ul className=\"border rounded-lg mt-1 bg-white max-h-40 overflow-y-auto\">\r\n            {filteredUsers.map(user => (\r\n              <li\r\n                key={user.id}\r\n                onClick={() => {\r\n                  setFormData(prev => ({ ...prev, recipientName: user.fullname }));\r\n                  setSelectedRecipientId(user.id);\r\n                  setFilteredUsers([]);\r\n                }}\r\n                className=\"p-2 hover:bg-gray-100 cursor-pointer\"\r\n              >\r\n                {user.fullname}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n\r\n      </div>\r\n\r\n\r\n      {/* Department */}\r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-sm font-semibold mb-1\">\r\n          Department/Team\r\n        </label>\r\n        <select\r\n          name=\"department\"\r\n          value={formData.department}\r\n          onChange={handleChange}\r\n          className=\"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-400\"\r\n        >\r\n          <option value=\"IT & Systems\">IT & Systems</option>\r\n          <option value=\"HR\">HR</option>\r\n          <option value=\"Finance\">Finance</option>\r\n          <option value=\"Marketing\">Marketing</option>\r\n          <option value=\"Operations\">Operations</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Employee ID + Job Title */}\r\n      <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n        <div>\r\n          <label className=\"block text-sm font-semibold mb-1\">\r\n            Employee ID\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"employeeId\"\r\n            value={formData.employeeId}\r\n            onChange={handleChange}\r\n            placeholder=\"Enter ID\"\r\n            className=\"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-400\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-semibold mb-1\">\r\n            Job Title\r\n          </label>\r\n          <select\r\n            name=\"jobTitle\"\r\n            value={formData.jobTitle}\r\n            onChange={handleChange}\r\n            className=\"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-400\"\r\n          >\r\n            <option value=\"\">Select</option>\r\n            <option value=\"Software Engineer\">Software Engineer</option>\r\n            <option value=\"Senior Developer\">Senior Developer</option>\r\n            <option value=\"Team Lead\">Team Lead</option>\r\n            <option value=\"Manager\">Manager</option>\r\n            <option value=\"Director\">Director</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n\r\n\r\n    </>\r\n  );\r\n\r\n  const renderAppreciationForm = () => (\r\n    <>\r\n      <h2 className=\"text-lg font-semibold text-purple-700\">\r\n        Reason for Appreciation\r\n      </h2>\r\n      <p className=\"text-gray-500 mb-6\">\r\n        Tell us why your colleague deserves appreciation\r\n      </p>\r\n\r\n      {/* Type of Appreciation */}\r\n      <div className=\"mb-5\">\r\n        <label className=\"block text-sm font-semibold mb-1\">\r\n          Type of Appreciation\r\n        </label>\r\n        <select\r\n          name=\"appreciationType\"\r\n          value={formData.appreciationType}\r\n          onChange={handleChange}\r\n          className=\"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-400\"\r\n        >\r\n          <option value=\"\">Select</option>\r\n          <option value=\"Teamwork\">Teamwork</option>\r\n          <option value=\"Leadership\">Leadership</option>\r\n          <option value=\"Innovation\">Innovation</option>\r\n          <option value=\"Outstanding Performance\">Outstanding Performance</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Specific Achievement */}\r\n      <div className=\"mb-5\">\r\n        <label className=\"block text-sm font-semibold mb-1\">\r\n          Specific Achievement\r\n        </label>\r\n        <textarea\r\n          name=\"achievement\"\r\n          value={formData.achievement}\r\n          onChange={handleChange}\r\n          rows=\"3\"\r\n          className=\"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-400\"\r\n          placeholder=\"Describe the action\"\r\n        />\r\n      </div>\r\n\r\n      {/* Date + Attachment */}\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div>\r\n          <label className=\"block text-sm font-semibold mb-1\">\r\n            Date\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            className=\"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-400\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-semibold mb-1\">\r\n            Attachments (Optional)\r\n          </label>\r\n          <label className=\"flex items-center justify-center gap-2 w-full p-3 border border-dashed border-purple-400 rounded-lg cursor-pointer text-purple-600 font-medium hover:bg-purple-50\">\r\n            Choose a File\r\n            <input type=\"file\" className=\"hidden\" />\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n\r\n\r\n  const renderDetailsForm = () => (\r\n    <>\r\n      <h2 className=\"text-lg font-semibold text-purple-700\">\r\n        Add Context (Optional)\r\n      </h2>\r\n      <p className=\"text-gray-500 mb-6\">\r\n        Share any additional details or a personal message\r\n      </p>\r\n\r\n      {/* Message */}\r\n      <div className=\"mb-5\">\r\n        <label className=\"block text-sm font-semibold mb-1\">\r\n          Message\r\n        </label>\r\n        <textarea\r\n          name=\"contextMessage\"\r\n          value={formData.contextMessage}\r\n          onChange={handleChange}\r\n          maxLength={150}\r\n          rows=\"4\"\r\n          className=\"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-400\"\r\n          placeholder=\"Describe the action\"\r\n        />\r\n        <div className=\"text-xs text-gray-400 text-right mt-1\">\r\n          0/150\r\n        </div>\r\n      </div>\r\n\r\n      {/* Visibility */}\r\n      <div className=\"mb-5\">\r\n        <label className=\"block text-sm font-semibold mb-1\">\r\n          Choose who can see the appreciation\r\n        </label>\r\n        <select\r\n          name=\"visibility\"\r\n          className=\"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-400\"\r\n        >\r\n          <option value=\"\">Select</option>\r\n          <option value=\"public\">Public</option>\r\n          <option value=\"team\">Team Only</option>\r\n          <option value=\"private\">Private</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Approval options */}\r\n      <div className=\"space-y-2 text-sm\">\r\n        <label className=\"flex items-center gap-2\">\r\n          <input\r\n            type=\"radio\"\r\n            name=\"approval\"\r\n            value=\"manager\"\r\n            defaultChecked\r\n          />\r\n          This post will be sent to admin/manager for approval\r\n        </label>\r\n\r\n        <label className=\"flex items-center gap-2\">\r\n          <input type=\"radio\" name=\"approval\" value=\"notify\" />\r\n          Send notification to the recipient\r\n        </label>\r\n\r\n        <label className=\"flex items-center gap-2\">\r\n          <input type=\"radio\" name=\"approval\" value=\"comments\" />\r\n          Allow others to comment or add to the appreciation\r\n        </label>\r\n      </div>\r\n    </>\r\n  );\r\n\r\n  // const [appreciations, setAppreciations] = useState([]); // Removed duplicate state\r\n  // const [isAdmin, setIsAdmin] = useState(false); // Declared above if needed? Wait, let's check.\r\n  // Actually isAdmin is used later, let's just keep isAdmin if it wasn't duplicated. \r\n  // I need to check where isAdmin is first declared. It is NOT declared at top.\r\n  // So I should keep isAdmin but remove appreciations.\r\n\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  const base = import.meta.env.VITE_API_BASE || 'http://localhost:3000';\r\n\r\n  const toggleLike = async (id) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`${base}/api/appreciations/${id}/like`, { method: 'POST', headers: { Authorization: token ? `Bearer ${token}` : '' } });\r\n      if (!res.ok) {\r\n        console.error('like failed', res.status);\r\n        return;\r\n      }\r\n      // Refresh list\r\n      fetchData();\r\n      // Notify other pages\r\n      try { window.dispatchEvent(new CustomEvent('activity:updated')); } catch (e) { }\r\n    } catch (err) {\r\n      console.error('Error toggling like', err);\r\n    }\r\n  };\r\n\r\n  const grantPoints = async (userId) => {\r\n    const amt = parseInt(prompt('Enter points to grant (positive integer)'), 10);\r\n    if (!amt || isNaN(amt)) return;\r\n    const reason = prompt('Optional reason for points') || '';\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`${base}/api/admin/users/${userId}/points`, { method: 'POST', headers: { 'Content-Type': 'application/json', Authorization: token ? `Bearer ${token}` : '' }, body: JSON.stringify({ amount: amt, reason }) });\r\n      if (!res.ok) { alert('Failed to grant points'); return; }\r\n      fetchData();\r\n      window.dispatchEvent(new CustomEvent('activity:updated'));\r\n      alert('Points granted');\r\n    } catch (err) { console.error('Grant points failed', err); alert('Failed to grant points'); }\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"p-6\">\r\n        {/* MAIN GRID */}\r\n        <div className=\"grid grid-cols-[340px_1fr] gap-8\">\r\n          {/* LEFT SIDEBAR */}\r\n          <div className=\"space-y-4 min-h-screen\">\r\n            {/* Recipient */}\r\n            {[\"recipient\", \"appreciation\", \"details\"].map((section) => (\r\n              <div\r\n                key={section}\r\n                onClick={() => setSelectedSection(section)}\r\n                className={`p-4 rounded-xl cursor-pointer border transition ${selectedSection === section\r\n                  ? \"border-purple-500 bg-white shadow-sm\"\r\n                  : \"border-gray-200 bg-gray-50\"\r\n                  }`}\r\n              >\r\n                <h3\r\n                  className={`text-sm font-semibold ${selectedSection === section\r\n                    ? \"text-purple-600\"\r\n                    : \"text-gray-900\"\r\n                    }`}\r\n                >\r\n                  {section === \"recipient\"\r\n                    ? \"Recipient\"\r\n                    : section === \"details\"\r\n                      ? \"Other Details\"\r\n                      : \"Appreciation For\"}\r\n                </h3>\r\n\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  {section === \"recipient\" &&\r\n                    \"Who would you like to appreciate? Enter their name or select from colleagues.\"}\r\n                  {section === \"appreciation\" &&\r\n                    \"What's the reason for appreciation? Mention specific achievement.\"}\r\n                  {section === \"details\" &&\r\n                    \"Visibility, notifications, comments, and more options.\"}\r\n                </p>\r\n              </div>\r\n            ))}\r\n\r\n            {/* Leaderboard */}\r\n            <div className=\"bg-white border border-gray-200 rounded-xl p-4 shadow-sm\">\r\n              <h3 className=\"text-sm font-semibold text-gray-900 mb-3\">\r\n                Leaderboard\r\n              </h3>\r\n\r\n              <div className=\"space-y-2\">\r\n                {users.slice(0, 5).map((user, idx) => {\r\n                  const rowClasses = user.id === JSON.parse(localStorage.getItem('user') || '{}').id\r\n                    ? \"border border-purple-500 bg-purple-50\"\r\n                    : \"border border-transparent bg-gray-50 hover:bg-gray-100\";\r\n\r\n                  return (\r\n                    <div\r\n                      key={user.id}\r\n                      className={`flex items-center justify-between rounded-xl px-3 py-2 text-sm transition ${rowClasses}`}\r\n                    >\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"h-7 w-7 flex items-center justify-center rounded-full bg-gray-200 text-xs font-semibold text-gray-800\">\r\n                          {idx + 1}\r\n                        </div>\r\n\r\n                        <div\r\n                          className={`h-9 w-9 flex items-center justify-center rounded-full text-xs font-semibold bg-gray-100 text-gray-800`}\r\n                        >\r\n                          {user.fullname\r\n                            .split(\" \")\r\n                            .map((n) => n[0])\r\n                            .join(\"\")}\r\n                        </div>\r\n\r\n                        <div>\r\n                          <p\r\n                            className={`text-xs font-semibold ${user.id === JSON.parse(localStorage.getItem('user') || '{}').id\r\n                              ? \"text-purple-700\"\r\n                              : \"text-gray-900\"\r\n                              }`}\r\n                          >\r\n                            {user.fullname}\r\n                          </p>\r\n                          <p className=\"text-[11px] text-gray-500\">\r\n                            {user.points?.toLocaleString() || 0} points\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center gap-2\">\r\n                        {idx === 0 && <span className=\"text-lg\">üëë</span>}\r\n                        {user.id === JSON.parse(localStorage.getItem('user') || '{}').id ? (\r\n                          <span className=\"rounded-full bg-purple-600 px-2 py-1 text-[10px] font-semibold text-white\">\r\n                            You\r\n                          </span>\r\n                        ) : (\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-[11px] text-gray-500 font-medium\">#{idx + 1}</span>\r\n                            {isAdmin && (\r\n                              <button onClick={() => grantPoints(user.id)} className=\"ml-2 text-sm bg-blue-600 text-white px-2 py-1 rounded-md\">Grant</button>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* RIGHT CONTENT */}\r\n          <div className=\"space-y-6\">\r\n            {/* TOP CARDS */}\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              {/* 1 ‚Äî Total Points */}\r\n              <div className=\"flex items-center justify-between h-24 rounded-2xl px-5 bg-linear-to-r from-blue-900 to-blue-700 text-white shadow\">\r\n                <div className=\"flex flex-col\">\r\n                  <span className=\"text-sm opacity-90\">Total Points</span>\r\n                  <span className=\"text-2xl font-semibold\">{(JSON.parse(localStorage.getItem('user') || '{}').points || 0).toLocaleString()}</span>\r\n                </div>\r\n                <div className=\"w-12 h-12 rounded-xl bg-white/20 backdrop-blur flex items-center justify-center\">\r\n                  <img src={coin} alt=\"Coin Icon\" className=\"w-12 h-12\" />\r\n                </div>\r\n              </div>\r\n\r\n              {/* 2 ‚Äî Badges Earned */}\r\n              <div className=\"flex items-center justify-between h-24 rounded-2xl px-5 bg-gray-100 text-gray-800 shadow\">\r\n                <div>\r\n                  <span className=\"text-sm text-gray-600\">Badges Earned</span>\r\n                  <span className=\"text-2xl font-semibold block\">12</span>\r\n                </div>\r\n                <div className=\"w-12 h-12 rounded-xl bg-yellow-300 flex items-center justify-center\">\r\n                  <img src={medal} alt=\"Medal Icon\" className=\"w-12 h-12\" />\r\n                </div>\r\n              </div>\r\n\r\n              {/* 3 ‚Äî Current Rank */}\r\n              <div className=\"flex items-center justify-between h-24 rounded-2xl px-5 bg-gray-100 text-gray-800 shadow\">\r\n                <div>\r\n                  <span className=\"text-sm text-gray-600\">Current Rank</span>\r\n                  <span className=\"text-2xl font-semibold block\">{(() => {\r\n                    try {\r\n                      const localUser = JSON.parse(localStorage.getItem('user') || '{}');\r\n                      if (!localUser || !localUser.id || !users || users.length === 0) return '#-';\r\n                      const idx = users.findIndex(u => u.id === localUser.id);\r\n                      return idx >= 0 ? `#${idx + 1}` : '#-';\r\n                    } catch (e) { return '#-'; }\r\n                  })()}</span>\r\n                </div>\r\n                <div className=\"w-12 h-12 rounded-xl bg-green-200 flex items-center justify-center\">\r\n                  <img src={trophy} alt=\"Trophy Icon\" className=\"w-12 h-12\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* FORM CARD */}\r\n            <div className=\"bg-gray-100 rounded-2xl p-6 shadow transition-all\">\r\n              {selectedSection === \"recipient\" && renderRecipientForm()}\r\n              {selectedSection === \"appreciation\" && renderAppreciationForm()}\r\n              {selectedSection === \"details\" && renderDetailsForm()}\r\n\r\n              {/* FOOTER BUTTONS */}\r\n              <div className=\"flex justify-end mt-6\">\r\n                <button\r\n                  onClick={() => {\r\n                    if (selectedSection === \"recipient\") {\r\n                      setSelectedSection(\"appreciation\");\r\n                      return;\r\n                    }\r\n\r\n                    if (selectedSection === \"appreciation\") {\r\n                      setSelectedSection(\"details\");\r\n                      return;\r\n                    }\r\n\r\n                    // details step\r\n                    handleSubmit();\r\n                  }}\r\n                  className=\"bg-blue-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-800 transition\"\r\n                >\r\n                  {selectedSection === \"details\" ? \"Send Appreciation\" : \"Next step\"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n\r\n            {/* RECENT RECOGNITION */}\r\n            <div className=\"bg-white rounded-lg p-4 border border-gray-200 shadow-sm\">\r\n              <h3 className=\"text-lg font-bold text-blue-900 mb-3\">\r\n                Recent Recognition\r\n              </h3>\r\n\r\n              <div className=\"space-y-3\">\r\n                {recognitions.length === 0 ? (\r\n                  <p className=\"text-sm text-gray-500\">No appreciations yet.</p>\r\n                ) : (\r\n                  recognitions.map((a) => (\r\n                    <div key={a.id} className=\"border border-gray-200 rounded-lg p-3 shadow-sm\">\r\n                      <div className=\"flex items-center mb-2\">\r\n                        <div className=\"w-9 h-9 rounded-full mr-2.5 bg-gray-200 flex items-center justify-center\">{a.sender_name?.split(' ').map(n => n[0]).join('')}</div>\r\n                        <div>\r\n                          <h4 className=\"text-sm font-semibold text-gray-800\">{a.sender_name}</h4>\r\n                          <span className=\"text-xs text-gray-500\">{new Date(a.created_at).toLocaleString()}</span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <p className=\"text-sm text-gray-600 mb-2.5\">{a.message}</p>\r\n\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <button onClick={() => toggleLike(a.id)} className={`px-3 py-1 rounded-md ${a.user_liked ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 hover:bg-gray-200'}`}>\r\n                          {a.user_liked ? 'Liked' : 'Like'} ‚Ä¢ {a.likes_count}\r\n                        </button>\r\n                        <span className=\"text-sm text-gray-500\">{a.recipient_name}</span>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div >\r\n\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\Redeem.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useState' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"useState"},"fix":{"range":[12,26],"text":""},"desc":"Remove unused variable 'useState'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":72,"column":6,"nodeType":"ArrayExpression","endLine":72,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[2829,2831],"text":"[fetchData]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":95,"column":80,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":81},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":95,"column":82,"nodeType":"BlockStatement","messageId":"unexpected","endLine":95,"endColumn":84,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[3691,3691],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Gift, ShoppingCart, History, Coffee, Ticket, Heart, Home, Laptop, Calendar, Award, ExternalLink, Filter, ArrowLeft } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst RedemptionPage = () => {\r\n  const [availablePoints, setAvailablePoints] = React.useState(0);\r\n  const [rewards, setRewards] = React.useState([]);\r\n  const [history, setHistory] = React.useState([]);\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  // Derived quick-stats from redemption history\r\n  const totalRedeemed = React.useMemo(() => {\r\n    return history.reduce((sum, item) => sum + (item.cost || 0), 0);\r\n  }, [history]);\r\n\r\n  const savingsValue = React.useMemo(() => {\r\n    // Convert points to dollar-equivalent assuming 100 pts = $1\r\n    return totalRedeemed / 100;\r\n  }, [totalRedeemed]);\r\n\r\n  const avgMonthly = React.useMemo(() => {\r\n    if (!history || history.length === 0) return 0;\r\n    // compute number of months covered by history (inclusive)\r\n    const dates = history.map(h => new Date(h.created_at)).filter(d => !isNaN(d));\r\n    if (dates.length === 0) return 0;\r\n    const min = new Date(Math.min(...dates));\r\n    const max = new Date(Math.max(...dates));\r\n    const months = (max.getFullYear() - min.getFullYear()) * 12 + (max.getMonth() - min.getMonth()) + 1;\r\n    return Math.round(totalRedeemed / Math.max(1, months));\r\n  }, [history, totalRedeemed]);\r\n\r\n  const base = import.meta.env.VITE_API_BASE || 'http://localhost:3000';\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n      const token = localStorage.getItem('token');\r\n\r\n      // Fetch items\r\n      const itemsRes = await fetch(`${base}/api/redeem/items`);\r\n      const itemsJson = await itemsRes.json();\r\n      setRewards(itemsJson.items || []);\r\n\r\n      // Fetch user points\r\n      if (user && user.id) {\r\n        const ures = await fetch(`${base}/api/users/${user.id}`, { headers: { Authorization: token ? `Bearer ${token}` : '' } });\r\n        if (ures.ok) {\r\n          const udata = await ures.json();\r\n          const u = udata.user || {};\r\n          setAvailablePoints(u.points || 0);\r\n          // persist local copy\r\n          localStorage.setItem('user', JSON.stringify(u));\r\n        }\r\n\r\n        // Fetch user history\r\n        const hres = await fetch(`${base}/api/redeem/user/${user.id}`, { headers: { Authorization: token ? `Bearer ${token}` : '' } });\r\n        if (hres.ok) {\r\n          const hjson = await hres.json();\r\n          setHistory(hjson.history || []);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to load redemption data', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleRedeem = async (item) => {\r\n    if (!confirm(`Redeem ${item.title} for ${item.cost.toLocaleString()} pts?`)) return;\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`${base}/api/redeem/purchase`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json', Authorization: token ? `Bearer ${token}` : '' },\r\n        body: JSON.stringify({ item_id: item.id })\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (!res.ok) {\r\n        alert(data.message || 'Failed to redeem');\r\n        return;\r\n      }\r\n\r\n      // update local UI\r\n      setAvailablePoints(data.user?.points || (availablePoints - item.cost));\r\n      // refresh lists\r\n      fetchData();\r\n      // notify other pages\r\n      try { window.dispatchEvent(new CustomEvent('activity:updated')); } catch(e){}\r\n\r\n      alert('Redemption successful!');\r\n    } catch (err) {\r\n      console.error('Redeem failed', err);\r\n      alert('Redeem failed');\r\n    }\r\n  };\r\n\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const goBack = () => {\r\n    if (window.history.length > 1) navigate(-1);\r\n    else navigate('/feed');\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div>\r\n        <button onClick={goBack} className=\"inline-flex items-center gap-2 text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md border border-gray-200 hover:bg-gray-50 mb-4\">\r\n          <ArrowLeft size={16} /> Back\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900\">Redemption Center</h1>\r\n        <p className=\"text-gray-600\">Redeem your points for amazing rewards</p>\r\n      </div>\r\n\r\n      {/* Points Display */}\r\n      <div className=\"bg-linear-to-br from-blue-600 to-indigo-700 rounded-2xl shadow-xl p-8 text-white relative overflow-hidden\">\r\n        <div className=\"absolute right-6 top-6 opacity-20\">\r\n          <Award size={120} />\r\n        </div>\r\n        <p className=\"text-blue-100 mb-2 text-lg\">Available Points Balance</p>\r\n        <h2 className=\"text-6xl font-bold mb-4\">{availablePoints.toLocaleString()}</h2>\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"w-full bg-blue-500/30 rounded-full h-3\">\r\n            <div \r\n              className=\"bg-linear-to-r from-yellow-400 to-orange-400 h-full rounded-full\" \r\n              style={{ width: `${(availablePoints / 20000) * 100}%` }}\r\n            ></div>\r\n          </div>\r\n          <span className=\"text-blue-100 whitespace-nowrap\">\r\n            {((availablePoints / 20000) * 100).toFixed(0)}% to next tier\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Featured Rewards */}\r\n      <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 p-6\">\r\n        <div className=\"flex flex-col md:flex-row justify-between items-center mb-8\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Featured Rewards</h2>\r\n            <p className=\"text-gray-600\">Exchange your points for exclusive rewards</p>\r\n          </div>\r\n          <div className=\"flex items-center gap-3 mt-4 md:mt-0\">\r\n            <Filter size={20} className=\"text-gray-500\" />\r\n            <select className=\"px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent font-medium\">\r\n              <option>Soft Points (Low to High)</option>\r\n              <option>Points (High to Low)</option>\r\n              <option>Most Popular</option>\r\n              <option>Recently Added</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {loading ? (\r\n            <div className=\"col-span-3 text-center py-12\">Loading rewards‚Ä¶</div>\r\n          ) : rewards.length === 0 ? (\r\n            <div className=\"col-span-3 text-center py-12\">No rewards available.</div>\r\n          ) : (\r\n            rewards.map((reward) => (\r\n              <div \r\n                key={reward.id} \r\n                className={`bg-linear-to-br ${reward.color || 'from-gray-50 to-gray-100'} rounded-xl p-6 border-2 ${reward.borderColor || 'border-gray-200'} hover:shadow-xl transition-all duration-300 hover:-translate-y-1`}\r\n              >\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                  <div className=\"p-3 bg-white rounded-xl shadow-sm\">\r\n                    {/* if icon exists use it */}\r\n                    {reward.icon || <div className=\"w-7 h-7 bg-gray-200 rounded\" />}\r\n                  </div>\r\n                  <span className=\"bg-linear-to-r from-gray-800 to-gray-900 text-white px-4 py-2 rounded-full text-sm font-bold shadow-md\">\r\n                    {reward.cost?.toLocaleString() || reward.points?.toLocaleString() || 0} pts\r\n                  </span>\r\n                </div>\r\n                \r\n                <h3 className=\"font-bold text-gray-900 text-xl mb-2\">{reward.title}</h3>\r\n                <p className=\"text-sm text-gray-600 mb-6 capitalize\">{reward.category || reward.description}</p>\r\n                \r\n                <button onClick={() => handleRedeem(reward)} disabled={availablePoints < (reward.cost || reward.points || 0)} className={`w-full text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all duration-300 font-semibold flex items-center justify-center gap-3 ${\r\n                  availablePoints < (reward.cost || reward.points || 0) ? 'bg-gray-300 cursor-not-allowed text-gray-600' : (\r\n                    reward.category === 'benefits' ? 'bg-linear-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800' :\r\n                    reward.category === 'charity' ? 'bg-linear-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800' :\r\n                    reward.category === 'shopping' ? 'bg-linear-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700' :\r\n                    reward.category === 'entertainment' ? 'bg-linear-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800' :\r\n                    reward.category === 'dining' ? 'bg-linear-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800' :\r\n                    'bg-linear-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800'\r\n                  )\r\n                }`}>\r\n                  <ShoppingCart size={18} />\r\n                  {availablePoints < (reward.cost || reward.points || 0) ? 'Insufficient points' : 'Redeem Now'}\r\n                  <ExternalLink size={16} />\r\n                </button>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Redemption History */}\r\n      <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 p-6\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-blue-100 rounded-lg\">\r\n              <History className=\"text-blue-600\" size={24} />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold text-gray-900\">Redemption History</h2>\r\n              <p className=\"text-gray-600\">Track your past redemptions</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"overflow-x-auto rounded-xl border border-gray-200\">\r\n          <table className=\"w-full\">\r\n            <thead>\r\n              <tr className=\"bg-linear-to-r from-gray-50 to-gray-100\">\r\n                <th className=\"text-left px-6 py-4 font-semibold text-gray-900\">Reward</th>\r\n                <th className=\"text-left px-6 py-4 font-semibold text-gray-900\">Value</th>\r\n                <th className=\"text-left px-6 py-4 font-semibold text-gray-900\">Date</th>\r\n                <th className=\"text-left px-6 py-4 font-semibold text-gray-900\">Points</th>\r\n                <th className=\"text-left px-6 py-4 font-semibold text-gray-900\">Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {history.map((item) => (\r\n                <tr key={item.id} className=\"border-t border-gray-200 hover:bg-gray-50 transition\">\r\n                  <td className=\"px-6 py-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center\">\r\n                        <span className=\"text-gray-800 font-bold text-sm\">{(item.item_title || '').slice(0,1)}</span>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"font-semibold text-gray-900\">{item.item_title || 'Redeem'}</div>\r\n                        <div className=\"text-xs text-gray-500\">Redemption ID: #{item.id}000{item.id}</div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <span className=\"font-bold text-gray-900\">{item.cost ? `$${(item.cost/100).toFixed(2)}` : '-'}</span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-gray-700\">{new Date(item.created_at).toLocaleDateString()}</td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <span className=\"font-bold text-red-600\">{(item.cost || 0).toLocaleString()} pts</span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <span className=\"px-3 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded-full\">\r\n                      {item.status || 'Completed'}\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <button className=\"mt-8 w-full bg-linear-to-r from-gray-100 to-gray-200 text-gray-800 px-6 py-4 rounded-xl hover:from-gray-200 hover:to-gray-300 transition-all duration-300 font-semibold flex items-center justify-center gap-2 shadow-md hover:shadow-lg\">\r\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16m-7 6h7\" />\r\n          </svg>\r\n          View Complete Transaction History\r\n        </button>\r\n      </div>\r\n\r\n      {/* Quick Stats */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n        <div className=\"bg-linear-to-br from-purple-50 to-purple-100 rounded-2xl p-6 border border-purple-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-purple-700 font-medium\">Total Redeemed</p>\r\n              <h3 className=\"text-3xl font-bold text-gray-900\">{totalRedeemed.toLocaleString()} pts</h3>\r\n            </div>\r\n            <Gift className=\"text-purple-600\" size={32} />\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-linear-to-br from-blue-50 to-blue-100 rounded-2xl p-6 border border-blue-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-blue-700 font-medium\">Avg. Monthly</p>\r\n              <h3 className=\"text-3xl font-bold text-gray-900\">{avgMonthly.toLocaleString()} pts</h3>\r\n            </div>\r\n            <Calendar className=\"text-blue-600\" size={32} />\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-linear-to-br from-green-50 to-green-100 rounded-2xl p-6 border border-green-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-green-700 font-medium\">Savings Value</p>\r\n              <h3 className=\"text-3xl font-bold text-gray-900\">{savingsValue.toLocaleString(undefined, {style: 'currency', currency: 'USD', minimumFractionDigits: 2})}</h3>\r\n            </div>\r\n            <ShoppingCart className=\"text-green-600\" size={32} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RedemptionPage;","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\Redemption.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\Settings.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":73,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"e"},"fix":{"range":[3097,3098],"text":""},"desc":"Remove unused variable 'e'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { \r\n  Bell, Moon, Star, Link as LinkIcon, \r\n  Shield, FileText, Cookie, \r\n  Phone, MessageSquare, LogOut,\r\n  ChevronRight\r\n} from 'lucide-react';\r\n\r\nconst SettingsPage = () => {\r\n  const navigate = useNavigate();\r\n  const [notifications, setNotifications] = useState(true);\r\n\r\n  // ‚úÖ Initialize state based on LocalStorage\r\n  const [darkMode, setDarkMode] = useState(() => {\r\n    return localStorage.getItem(\"theme\") === \"dark\";\r\n  });\r\n\r\n  // ‚úÖ Toggle Function: Updates State, LocalStorage, and HTML Class\r\n  const handleThemeToggle = () => {\r\n    const newMode = !darkMode;\r\n    setDarkMode(newMode);\r\n\r\n    if (newMode) {\r\n      document.documentElement.classList.add(\"dark\");\r\n      localStorage.setItem(\"theme\", \"dark\");\r\n    } else {\r\n      document.documentElement.classList.remove(\"dark\");\r\n      localStorage.setItem(\"theme\", \"light\");\r\n    }\r\n    \r\n    // Dispatch a custom event so other tabs/components know immediately\r\n    window.dispatchEvent(new Event(\"storage\"));\r\n  };\r\n\r\n  // ‚úÖ Ensure class is applied on initial load\r\n  useEffect(() => {\r\n    if (darkMode) {\r\n      document.documentElement.classList.add(\"dark\");\r\n    } else {\r\n      document.documentElement.classList.remove(\"dark\");\r\n    }\r\n  }, [darkMode]);\r\n\r\n  const settingsItems = [\r\n    { icon: <Bell size={22} />, label: 'Notification', hasToggle: true, toggleState: notifications, onToggle: () => setNotifications(!notifications) },\r\n    // Updated the Dark Mode item to use our new handler\r\n    { icon: <Moon size={22} />, label: 'Dark Mode', hasToggle: true, toggleState: darkMode, onToggle: handleThemeToggle },\r\n    { icon: <Star size={22} />, label: 'Rate App', path: '/settings/rate' },\r\n    { icon: <LinkIcon size={22} />, label: 'Share Link' },\r\n    { icon: <Shield size={22} />, label: 'Privacy Policy', path: '/settings/privacy' },\r\n    { icon: <FileText size={22} />, label: 'Terms and Conditions', path: '/settings/terms' },\r\n    { icon: <Cookie size={22} />, label: 'Cookies Policy', path: '/settings/cookies' },\r\n    { icon: <Phone size={22} />, label: 'Contact', path: '/settings/contact' },\r\n    { icon: <MessageSquare size={22} />, label: 'Feedback', path: '/settings/feedback' },\r\n    { icon: <LogOut size={22} />, label: 'Logout', isLogout: true },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"mb-8 mt-5\">\r\n        <h1 className=\"text-3xl font-bold text-gray-800\">Settings</h1>\r\n        <p className=\"text-gray-500 mt-1\">Manage your application preferences</p>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden\">\r\n        {settingsItems.map((item, index) => (\r\n          <div\r\n            key={index}\r\n            className={`flex items-center justify-between px-6 py-4 ${\r\n              index !== settingsItems.length - 1 ? 'border-b border-gray-100' : ''\r\n            } ${item.isLogout ? 'hover:bg-red-50 cursor-pointer' : 'hover:bg-gray-50 cursor-pointer'}`}\r\n            onClick={async (e) => {\r\n              if (item.hasToggle || item.onToggle) return;\r\n              if (item.path) return navigate(item.path);\r\n              if (item.isLogout) {\r\n                // ... logout logic ...\r\n              }\r\n            }}\r\n          >\r\n            <div className=\"flex items-center\">\r\n              <div className={`p-2 rounded-lg mr-4 ${item.isLogout ? 'bg-red-100 text-red-600' : 'bg-gray-100 text-gray-600'}`}>\r\n                {item.icon}\r\n              </div>\r\n              <span className={`font-medium ${item.isLogout ? 'text-red-600' : 'text-gray-700'}`}>\r\n                {item.label}\r\n              </span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center\">\r\n              {item.hasToggle ? (\r\n                <div\r\n                  className={`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${item.toggleState ? 'bg-blue-500' : 'bg-gray-300'}`}\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    item.onToggle();\r\n                  }}\r\n                >\r\n                  <div className={`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${item.toggleState ? 'left-7' : 'left-1'}`}></div>\r\n                </div>\r\n              ) : (\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsPage;","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\SignUp.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'setProfilePicture' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":15,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"setProfilePicture"},"fix":{"range":[634,653],"text":""},"desc":"Remove unused variable 'setProfilePicture'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'uploading' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":17,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"uploading"},"fix":{"range":[738,747],"text":""},"desc":"Remove unused variable 'uploading'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst SignUp = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [designation, setDesignation] = useState(\"\");\r\n  const [jobTitle, setJobTitle] = useState(\"\");\r\n  const [department, setDepartment] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [dateOfJoining, setDateOfJoining] = useState(\"\");\r\n  const [employeeId, setEmployeeId] = useState(\"\");\r\n  const [gender, setGender] = useState('');\r\n  const [profilePicture, setProfilePicture] = useState(\"\");\r\n  const [profileFile, setProfileFile] = useState(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [errors, setErrors] = useState({ name: \"\", email: \"\", password: \"\", designation: \"\", phone: \"\" });\r\n\r\n  useEffect(() => {\r\n    const previous = document.body.style.backgroundColor;\r\n    document.body.style.backgroundColor = '#E8E8F0';\r\n    return () => {\r\n      document.body.style.backgroundColor = previous;\r\n    };\r\n  }, []);\r\n\r\n  const validate = () => {\r\n    const newErrors = { name: \"\", email: \"\", password: \"\", designation: \"\", phone: \"\" };\r\n    if (name.trim().length < 3) newErrors.name = \"Name must be at least 3 characters long.\";\r\n    const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailPattern.test(email.trim())) newErrors.email = \"Please enter a valid email address.\";\r\n    if (password.trim().length < 8) newErrors.password = \"Password must be at least 8 characters long.\";\r\n    if (designation.trim() === \"\") newErrors.designation = \"Please select your designation.\";\r\n    const phonePattern = /^[0-9+\\-()\\s]{7,20}$/;\r\n    if (phone && !phonePattern.test(phone.trim())) newErrors.phone = \"Please enter a valid phone number.\";\r\n    setErrors(newErrors);\r\n    return !newErrors.name && !newErrors.email && !newErrors.password && !newErrors.designation && !newErrors.phone;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const robot = document.getElementById(\"robot\");\r\n    const isValid = validate();\r\n    if (!robot || !robot.checked) {\r\n      alert(\"Please confirm you are not a robot.\");\r\n      return;\r\n    }\r\n    if (isValid) {\r\n      try {\r\n        // upload profile file first if present\r\n        let uploadedPath = profilePicture;\r\n        if (profileFile) {\r\n          setUploading(true);\r\n          try {\r\n            const form = new FormData();\r\n            form.append('profile', profileFile);\r\n            const upRes = await fetch('http://localhost:3000/api/users/upload-profile', {\r\n              method: 'POST',\r\n              body: form,\r\n            });\r\n            const upData = await upRes.json();\r\n            if (upRes.ok && upData.path) {\r\n              uploadedPath = upData.path;\r\n            } else {\r\n              console.warn('Upload failed, continuing without profile image');\r\n            }\r\n          } catch (err) {\r\n            console.error('Upload failed', err);\r\n          } finally {\r\n            setUploading(false);\r\n          }\r\n        }\r\n\r\n        const response = await fetch(\"http://localhost:3000/api/users/signup\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            fullname: name,\r\n            email: email,\r\n            password: password,\r\n            designation: designation,\r\n            job_title: jobTitle,\r\n            department: department,\r\n            phone: phone,\r\n            date_of_joining: dateOfJoining || null,\r\n            employee_id: employeeId,\r\n            profile_picture: uploadedPath,            gender: gender || 'Not Specified',            status: \"ACTIVE\"\r\n          }),\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (response.ok) {\r\n          // Success - status 201\r\n          alert(\"‚úÖ Account created successfully!\");\r\n\r\n          // Auto-login logic\r\n          localStorage.setItem(\"token\", data.token);\r\n          localStorage.setItem(\"user\", JSON.stringify(data.user));\r\n\r\n          setName(\"\");\r\n          setEmail(\"\");\r\n          setPassword(\"\");\r\n          setDesignation(\"\");\r\n          setErrors({ name: \"\", email: \"\", password: \"\", designation: \"\" });\r\n          if (typeof robot !== \"undefined\") robot.checked = false;\r\n\r\n          // Redirect to dashboard\r\n          window.location.href = \"/dashboard\";\r\n        } else {\r\n          // Error - status 400 or 500\r\n          if (response.status === 400 && data.message === \"User already exists\") {\r\n            // Duplicate email\r\n            setErrors({ ...errors, email: \"This email is already registered. Please use a different email or log in.\" });\r\n            alert(\"‚ùå This email is already registered!\");\r\n          } else {\r\n            // Other errors\r\n            alert(`‚ùå Error: ${data.message || \"Failed to create account\"}`);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Signup error:\", error);\r\n        alert(\"‚ùå Network error. Please check if the backend server is running.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen w-screen flex items-center justify-center font-[Poppins] px-4 md:px-12 lg:px-24 py-12\">\r\n      <div className=\"w-full max-w-5xl bg-white rounded-lg shadow-xl overflow-hidden min-h-[75vh]\">\r\n        <div className=\"flex flex-col md:flex-row\">\r\n          <div className=\"w-full md:w-2/3 p-6 sm:p-8 md:p-16 relative\">\r\n            <img\r\n              src=\"flower.png\"\r\n              alt=\"flower background\"\r\n              className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 opacity-20 pointer-events-none md:hidden w-[75%]\"\r\n            />\r\n            <h2 className=\"text-2xl sm:text-3xl md:text-4xl font-extrabold mb-1 lowercase text-black relative z-10\">\r\n              create an account\r\n            </h2>\r\n            <p className=\"mb-4 text-sm sm:text-base text-gray-700 relative z-10\">\r\n              already have an account?{' '}\r\n              <Link to=\"/login\" className=\"text-black font-bold\">\r\n                log in\r\n              </Link>\r\n            </p>\r\n\r\n            <form id=\"createAccountForm\" className=\"space-y-4 relative z-10\" onSubmit={handleSubmit}>\r\n              <div>\r\n                <label htmlFor=\"name\" className=\"block text-sm font-semibold mb-1 text-black\">Name</label>\r\n                <input id=\"name\" name=\"name\" type=\"text\" value={name} onChange={(e) => setName(e.target.value)} className=\"w-full max-w-[400px] border border-gray-300 rounded-md p-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base\" placeholder=\"Your name\" />\r\n                {errors.name && <p className=\"text-red-500 text-xs mt-1\">{errors.name}</p>}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"jobTitle\" className=\"block text-sm font-semibold mb-1 text-black\">Job title</label>\r\n                <input id=\"jobTitle\" name=\"jobTitle\" type=\"text\" value={jobTitle} onChange={(e) => setJobTitle(e.target.value)} className=\"w-full max-w-[400px] border border-gray-300 rounded-md p-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base\" placeholder=\"e.g. Senior Engineer\" />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"department\" className=\"block text-sm font-semibold mb-1 text-black\">Department</label>\r\n                <input id=\"department\" name=\"department\" type=\"text\" value={department} onChange={(e) => setDepartment(e.target.value)} className=\"w-full max-w-[400px] border border-gray-300 rounded-md p-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base\" placeholder=\"e.g. Engineering\" />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"phone\" className=\"block text-sm font-semibold mb-1 text-black\">Phone</label>\r\n                <input id=\"phone\" name=\"phone\" type=\"tel\" value={phone} onChange={(e) => setPhone(e.target.value)} className=\"w-full max-w-[400px] border border-gray-300 rounded-md p-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base\" placeholder=\"Optional\" />\r\n                {errors.phone && <p className=\"text-red-500 text-xs mt-1\">{errors.phone}</p>}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"dateOfJoining\" className=\"block text-sm font-semibold mb-1 text-black\">Date of joining</label>\r\n                <input id=\"dateOfJoining\" name=\"dateOfJoining\" type=\"date\" value={dateOfJoining} onChange={(e) => setDateOfJoining(e.target.value)} className=\"w-full max-w-[400px] border border-gray-300 rounded-md p-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base\" />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"employeeId\" className=\"block text-sm font-semibold mb-1 text-black\">Employee ID</label>\r\n                <input id=\"employeeId\" name=\"employeeId\" type=\"text\" value={employeeId} onChange={(e) => setEmployeeId(e.target.value)} className=\"w-full max-w-[400px] border border-gray-300 rounded-md p-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base\" placeholder=\"Optional\" />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"gender\" className=\"block text-sm font-semibold mb-1 text-black\">Gender</label>\r\n                <select id=\"gender\" name=\"gender\" value={gender} onChange={(e) => setGender(e.target.value)} className=\"w-full max-w-[400px] border border-gray-300 rounded-md p-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base\">\r\n                  <option value=\"\">Prefer not to say</option>\r\n                  <option value=\"Male\">Male</option>\r\n                  <option value=\"Female\">Female</option>\r\n                  <option value=\"Other\">Other</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"profilePicture\" className=\"block text-sm font-semibold mb-1 text-black\">Profile picture (optional)</label>\r\n                <input id=\"profilePicture\" name=\"profilePicture\" type=\"file\" accept=\"image/*\" onChange={(e) => setProfileFile(e.target.files && e.target.files[0])} className=\"w-full max-w-[400px]\" />\r\n                {profileFile && <p className=\"text-xs text-gray-700 mt-1\">Selected: {profileFile.name}</p>}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"email\" className=\"block text-sm font-semibold mb-1 text-black\">Email address</label>\r\n                <input id=\"email\" name=\"email\" type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} className=\"w-full max-w-[400px] border border-gray-300 rounded-md p-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base\" placeholder=\"you@example.com\" />\r\n                {errors.email && <p className=\"text-red-500 text-xs mt-1\">{errors.email}</p>}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"designation\" className=\"block text-sm font-semibold mb-1 text-black\">Designation</label>\r\n                <select id=\"designation\" name=\"designation\" value={designation} onChange={(e) => setDesignation(e.target.value)} className=\"w-full max-w-[400px] border border-gray-300 rounded-md p-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base\">\r\n                  <option value=\"\">Select designation</option>\r\n                  <option value=\"HR\">HR</option>\r\n                  <option value=\"Developer\">Developer</option>\r\n                  <option value=\"Manager\">Manager</option>\r\n                  <option value=\"Designer\">Designer</option>\r\n                  <option value=\"Intern\">Intern</option>\r\n                  <option value=\"Other\">Other</option>\r\n                </select>\r\n                {errors.designation && <p className=\"text-red-500 text-xs mt-1\">{errors.designation}</p>}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"password\" className=\"block text-sm font-semibold mb-1 text-black\">Password</label>\r\n                <div className=\"relative w-full max-w-[400px]\">\r\n                  <input\r\n                    id=\"password\"\r\n                    name=\"password\"\r\n                    type={showPassword ? \"text\" : \"password\"}\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    className=\"w-full border border-gray-300 rounded-md p-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base\"\r\n                    placeholder=\"Create a password\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPassword((s) => !s)}\r\n                    className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-600 text-xs sm:text-sm cursor-pointer select-none\"\r\n                  >\r\n                    {showPassword ? 'Hide' : 'Show'}\r\n                  </button>\r\n                </div>\r\n                {errors.password && <p className=\"text-red-500 text-xs mt-1\">{errors.password}</p>}\r\n                <p className=\"text-xs text-gray-600 mt-1\">use 8 or more characters with a mix of letters, numbers, and symbols</p>\r\n              </div>\r\n\r\n              <p className=\"text-sm text-gray-700\">by creating an account, you agree to our <span className=\"font-semibold\">terms of use</span> and <span className=\"font-semibold\">privacy policy</span></p>\r\n\r\n              <div className=\"flex items-center space-x-2\">\r\n                <input id=\"robot\" type=\"checkbox\" className=\"h-4 w-4 accent-green-500\" />\r\n                <label htmlFor=\"robot\" className=\"text-sm text-black font-medium cursor-pointer\">i am not a robot</label>\r\n              </div>\r\n\r\n              <button type=\"submit\" className=\"w-full max-w-[400px] bg-[#4a2cf0] text-white py-2 rounded-md font-medium hover:bg-[#3a20d1] transition-all text-sm sm:text-base\">create account</button>\r\n\r\n              <p className=\"text-sm text-gray-800 text-center w-full max-w-[400px]\">already have an account? <Link to=\"/login\" className=\"font-bold text-black\">log in</Link></p>\r\n            </form>\r\n          </div>\r\n\r\n          <div className=\"w-full md:w-1/2 flex items-center justify-end p-6 md:p-10 bg-transparent\">\r\n            <img\r\n              src=\"flower.png\"\r\n              alt=\"flower illustration\"\r\n              className=\"hidden md:block w-full md:max-w-[2800px] lg:max-w-[3200px] xl:max-w-[3800px] object-contain mr-0 scale-[1.4]\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignUp","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\Terms.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\admin\\Tasks.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isLoadingTasks' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":35,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"isLoadingTasks"},"fix":{"range":[1392,1406],"text":""},"desc":"Remove unused variable 'isLoadingTasks'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":80,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":80,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'loadTasks' and 'loadUsers'. Either include them or remove the dependency array.","line":86,"column":6,"nodeType":"ArrayExpression","endLine":86,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadTasks, loadUsers]","fix":{"range":[2809,2811],"text":"[loadTasks, loadUsers]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getAllUsers } from '../../services/appreciationService.js';\r\nimport { createTask, getTasks, deleteTask, updateTask } from '../../services/taskService.js';\r\n\r\nconst TasksAdmin = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [tasks, setTasks] = useState([]);\r\n  const [form, setForm] = useState({ title: '', description: '', assigned_to: '', due_date: '' });\r\n  const [q, setQ] = useState('');\r\n\r\n  // Handle authentication related errors (token expired / invalid)\r\n  const [error, setError] = useState(null);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  const handleAuthError = (err) => {\r\n    const msg = (err && (err.message || err.error || err)) || '';\r\n    const text = typeof msg === 'string' ? msg : (msg.message || JSON.stringify(msg));\r\n\r\n    if (/token expired|expired/i.test(text) || /invalid or expired token/i.test(text) || (err && err.status === 401)) {\r\n      // clear local auth and prompt user to re-login\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      setIsAdmin(false);\r\n      setUsers([]);\r\n      setTasks([]);\r\n      setError('Session expired. Please login again.');\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  const [isLoadingUsers, setIsLoadingUsers] = useState(false);\r\n  const [isLoadingTasks, setIsLoadingTasks] = useState(false);\r\n\r\n  const loadUsers = async () => {\r\n    try {\r\n      setIsLoadingUsers(true);\r\n      const res = await getAllUsers();\r\n      setUsers(res.users || res.data?.users || []);\r\n    } catch (err) {\r\n      console.error('Failed to load users', err);\r\n      if (!handleAuthError(err)) {\r\n        setUsers([]);\r\n        setError(err?.message || JSON.stringify(err));\r\n      }\r\n    } finally {\r\n      setIsLoadingUsers(false);\r\n    }\r\n  };\r\n\r\n  const loadTasks = async () => {\r\n    try {\r\n      setError(null);\r\n      setIsLoadingTasks(true);\r\n      const res = await getTasks();\r\n      setTasks(res.data || []);\r\n    } catch (err) {\r\n      console.error('Failed to load tasks', err);\r\n      if (!handleAuthError(err)) {\r\n        const msg = (err && err.message) || err;\r\n        setError(msg?.error || msg || 'Failed to load tasks');\r\n      }\r\n    } finally {\r\n      setIsLoadingTasks(false);\r\n    }\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    loadUsers();\r\n    loadTasks();\r\n\r\n    // check local user role and token\r\n    try {\r\n      const u = JSON.parse(localStorage.getItem('user') || 'null');\r\n      setIsAdmin(!!(u && u.role === 'Admin'));\r\n    } catch (e) {\r\n      setIsAdmin(false);\r\n    }\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) setError('Not authenticated. Please login to access admin features.');\r\n  }, []);\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    if (!isAdmin) return alert('Only admins can create tasks');\r\n    if (!form.title.trim()) return alert('Title is required');\r\n    try {\r\n      await createTask(form);\r\n      setForm({ title: '', description: '', assigned_to: '', due_date: '' });\r\n      await loadTasks();\r\n      // notify sidebar and other parts\r\n      window.dispatchEvent(new Event('tasks-updated'));\r\n    } catch (err) {\r\n      console.error('Create task failed', err);\r\n      if (handleAuthError(err)) {\r\n        alert('Session expired. Please login again.');\r\n        return;\r\n      }\r\n      const msg = (err && (err.message || err.error)) || err || 'Failed to create task';\r\n      alert(msg.error || msg);\r\n    }\r\n  };\r\n\r\n  const filtered = tasks.filter(t => t.title.toLowerCase().includes(q.toLowerCase()));\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-2xl font-semibold mb-4\">Admin: Tasks</h2>\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        <div className=\"col-span-1 bg-white p-4 rounded shadow\">\r\n          <h3 className=\"font-semibold mb-2\">Create Task</h3>\r\n\r\n          {!isAdmin ? (\r\n            <div className=\"p-4 bg-red-50 text-red-600 rounded\">Only Admins can create tasks. Your account does not have permissions to perform this action.</div>\r\n          ) : (\r\n            <form onSubmit={submit} className=\"space-y-2\">\r\n              <input disabled={isLoadingUsers || !isAdmin} value={form.title} onChange={(e) => setForm({ ...form, title: e.target.value })} className=\"w-full p-2 border rounded\" placeholder=\"Title\" />\r\n              <textarea disabled={isLoadingUsers || !isAdmin} value={form.description} onChange={(e) => setForm({ ...form, description: e.target.value })} className=\"w-full p-2 border rounded\" placeholder=\"Description\" />\r\n              <select disabled={isLoadingUsers || !isAdmin} value={form.assigned_to} onChange={(e) => setForm({ ...form, assigned_to: e.target.value })} className=\"w-full p-2 border rounded\">\r\n                <option value=\"\">Assign to</option>\r\n                {isLoadingUsers ? (\r\n                  <option value=\"\">Loading users...</option>\r\n                ) : users.length === 0 ? (\r\n                  <option value=\"\">No users available</option>\r\n                ) : (\r\n                  users.map(u => (\r\n                    <option key={u.id} value={u.id}>{u.fullname} ({u.email})</option>\r\n                  ))\r\n                )}\r\n              </select>\r\n              <input disabled={isLoadingUsers || !isAdmin} type=\"date\" value={form.due_date} onChange={(e) => setForm({ ...form, due_date: e.target.value })} className=\"w-full p-2 border rounded\" />\r\n              <button disabled={isLoadingUsers || !isAdmin} className=\"bg-blue-600 text-white px-4 py-2 rounded flex items-center gap-2\">\r\n                {isLoadingUsers ? <div className=\"w-4 h-4 border-2 border-t-transparent rounded-full animate-spin\" /> : null}\r\n                Create\r\n              </button>\r\n            </form>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"col-span-2 bg-white p-4 rounded shadow\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"font-semibold\">Tasks</h3>\r\n            <input value={q} onChange={(e) => setQ(e.target.value)} placeholder=\"Search\" className=\"p-2 border rounded\" />\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"mb-3 p-3 bg-yellow-50 text-yellow-800 rounded flex items-center justify-between\">\r\n              <div>{error}</div>\r\n              {error.includes('login') && (\r\n                <button onClick={() => navigate('/login')} className=\"text-sm px-3 py-1 bg-blue-600 text-white rounded\">Go to Login</button>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"space-y-6\">\r\n            {/* Group tasks: Due (overdue & not completed), In Progress / Pending, Completed */}\r\n            {filtered.length === 0 && <div className=\"text-gray-600\">No tasks</div>}\r\n\r\n            {(() => {\r\n              const now = new Date();\r\n              const due = filtered.filter(t => t.status !== 'completed' && t.due_date && new Date(t.due_date) <= now);\r\n              const inProgress = filtered.filter(t => t.status !== 'completed' && (!t.due_date || new Date(t.due_date) > now));\r\n              const completed = filtered.filter(t => t.status === 'completed');\r\n\r\n              return (\r\n                <>\r\n                  {/* DUE */}\r\n                  <div>\r\n                    <h4 className=\"text-sm font-semibold mb-2\">Due ({due.length})</h4>\r\n                    {due.length === 0 ? <div className=\"text-gray-500 mb-3\">No due tasks</div> : (\r\n                      <div className=\"space-y-2 mb-4\">\r\n                        {due.map(task => (\r\n                          <div className=\"p-3 bg-red-50 rounded flex justify-between items-center\" key={task.id}>\r\n                            <div>\r\n                              <div className=\"font-semibold\">{task.title}</div>\r\n                              <div className=\"text-sm text-gray-500\">Assigned: {task.assigned_to_name || '‚Äî'}</div>\r\n                              <div className=\"text-sm text-gray-500\">Due: {task.due_date ? new Date(task.due_date).toLocaleDateString() : '‚Äî'}</div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <button onClick={async () => { try { await updateTask(task.id, { status: 'completed', percent_completed: 100 }); await loadTasks(); window.dispatchEvent(new Event('tasks-updated')); } catch (err) { if (handleAuthError(err)) { alert('Session expired. Please login again.'); return; } if (err && err.message) { alert(err.message); } else { alert('Failed to update task'); } } }} className=\"px-3 py-1 rounded bg-green-600 text-white text-sm\">Certify & Mark done</button>\r\n                              <button onClick={async () => { if (!confirm('Delete task?')) return; try { await deleteTask(task.id); await loadTasks(); window.dispatchEvent(new Event('tasks-updated')); } catch (err) { if (handleAuthError(err)) { alert('Session expired. Please login again.'); return; } if (err && err.message) { alert(err.message); } else { alert('Failed to delete task'); } } }} className=\"px-3 py-1 rounded bg-red-100 text-red-600 text-sm\">Delete</button>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* IN PROGRESS */}\r\n                  <div>\r\n                    <h4 className=\"text-sm font-semibold mb-2\">In Progress / Pending ({inProgress.length})</h4>\r\n                    {inProgress.length === 0 ? <div className=\"text-gray-500 mb-3\">No pending or in-progress tasks</div> : (\r\n                      <div className=\"space-y-2 mb-4\">\r\n                        {inProgress.map(task => (\r\n                          <div className=\"p-3 bg-yellow-50 rounded flex justify-between items-center\" key={task.id}>\r\n                            <div>\r\n                              <div className=\"font-semibold\">{task.title}</div>\r\n                              <div className=\"text-sm text-gray-500\">Assigned: {task.assigned_to_name || '‚Äî'}</div>\r\n                              <div className=\"text-sm text-gray-500\">Due: {task.due_date ? new Date(task.due_date).toLocaleDateString() : '‚Äî'}</div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <button onClick={async () => { try { await updateTask(task.id, { status: 'completed', percent_completed: 100 }); await loadTasks(); window.dispatchEvent(new Event('tasks-updated')); } catch (err) { if (handleAuthError(err)) { alert('Session expired. Please login again.'); return; } if (err && err.message) { alert(err.message); } else { alert('Failed to update task'); } } }} className=\"px-3 py-1 rounded bg-green-600 text-white text-sm\">Certify & Mark done</button>\r\n                              <button onClick={async () => { if (!confirm('Delete task?')) return; try { await deleteTask(task.id); await loadTasks(); window.dispatchEvent(new Event('tasks-updated')); } catch (err) { if (handleAuthError(err)) { alert('Session expired. Please login again.'); return; } if (err && err.message) { alert(err.message); } else { alert('Failed to delete task'); } } }} className=\"px-3 py-1 rounded bg-red-100 text-red-600 text-sm\">Delete</button>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* COMPLETED */}\r\n                  <div>\r\n                    <h4 className=\"text-sm font-semibold mb-2\">Completed ({completed.length})</h4>\r\n                    {completed.length === 0 ? <div className=\"text-gray-500 mb-3\">No completed tasks</div> : (\r\n                      <div className=\"space-y-2\">\r\n                        {completed.map(task => (\r\n                          <div className=\"p-3 bg-green-50 rounded flex justify-between items-center\" key={task.id}>\r\n                            <div>\r\n                              <div className=\"font-semibold\">{task.title}</div>\r\n                              <div className=\"text-sm text-gray-500\">Assigned: {task.assigned_to_name || '‚Äî'}</div>\r\n                              <div className=\"text-sm text-gray-500\">Completed: {task.certified_at ? new Date(task.certified_at).toLocaleString() : (task.updated_at ? new Date(task.updated_at).toLocaleString() : '‚Äî')}</div>\r\n                              {task.certified_by_name && <div className=\"text-sm text-gray-500\">Certified by: {task.certified_by_name}</div>}\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <button onClick={async () => { if (!confirm('Re-open this task?')) return; try { await updateTask(task.id, { status: 'in_progress', percent_completed: 0, certified_by: null, certified_at: null }); await loadTasks(); window.dispatchEvent(new Event('tasks-updated')); } catch (err) { if (handleAuthError(err)) { alert('Session expired. Please login again.'); return; } if (err && err.message) { alert(err.message); } else { alert('Failed to update task'); } } }} className=\"px-3 py-1 rounded bg-yellow-100 text-yellow-700 text-sm\">Re-open</button>\r\n                              <button onClick={async () => { if (!confirm('Delete task?')) return; try { await deleteTask(task.id); await loadTasks(); window.dispatchEvent(new Event('tasks-updated')); } catch (err) { if (handleAuthError(err)) { alert('Session expired. Please login again.'); return; } if (err && err.message) { alert(err.message); } else { alert('Failed to delete task'); } } }} className=\"px-3 py-1 rounded bg-red-100 text-red-600 text-sm\">Delete</button>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </>\r\n              );\r\n            })()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TasksAdmin;\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\Profile.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileClearHistory.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileDeleted.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'initialDeleted' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":5,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"initialDeleted"},"fix":{"range":[144,252],"text":""},"desc":"Remove unused variable 'initialDeleted'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'fetchDeleted'. Either include it or remove the dependency array.","line":21,"column":46,"nodeType":"ArrayExpression","endLine":21,"endColumn":48,"suggestions":[{"desc":"Update the dependencies array to be: [fetchDeleted]","fix":{"range":[651,653],"text":"[fetchDeleted]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { ArrowLeft, Trash2 } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst initialDeleted = [\r\n  { id: 'd1', name: 'old_cv.pdf' },\r\n  { id: 'd2', name: 'draft_notes.docx' },\r\n];\r\n\r\nconst ProfileDeleted = () => {\r\n  const navigate = useNavigate();\r\n  const [items, setItems] = useState([]);\r\n  const base = import.meta.env.VITE_API_BASE || 'http://localhost:3000';\r\n\r\n  const fetchDeleted = async () => {\r\n    const res = await fetch(`${base}/api/uploads/deleted`);\r\n    const data = await res.json();\r\n    setItems(data);\r\n  };\r\n\r\n  React.useEffect(() => { fetchDeleted(); }, []);\r\n\r\n  const restore = async (filename) => {\r\n    const res = await fetch(`${base}/api/uploads/restore/${encodeURIComponent(filename)}`, { method: 'POST' });\r\n    if (res.ok) await fetchDeleted();\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"flex items-center mb-6 mt-5\">\r\n        <button onClick={() => navigate(-1)} className=\"p-2 mr-4 rounded-md hover:bg-gray-100\">\r\n          <ArrowLeft />\r\n        </button>\r\n        <h1 className=\"text-2xl font-semibold\">Recently Deleted</h1>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow-md border border-gray-200 p-6\">\r\n        {items.length === 0 ? <p className=\"text-gray-600\">No recently deleted items.</p> : (\r\n          items.map(it => (\r\n            <div key={it.filename} className=\"flex items-center justify-between py-3 border-b last:border-b-0\">\r\n              <div className=\"text-gray-800\">{it.filename}</div>\r\n              <div>\r\n                <button onClick={() => restore(it.filename)} className=\"px-3 py-1 bg-blue-600 text-white rounded-md\">Restore</button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileDeleted;\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileDisplay.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileExit.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileFeed.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'fetchActivities'. Either include it or remove the dependency array.","line":23,"column":214,"nodeType":"ArrayExpression","endLine":23,"endColumn":216,"suggestions":[{"desc":"Update the dependencies array to be: [fetchActivities]","fix":{"range":[952,954],"text":"[fetchActivities]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { ArrowLeft } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst ProfileFeed = () => {\r\n  const navigate = useNavigate();\r\n  const [activities, setActivities] = React.useState([]);\r\n  const base = import.meta.env.VITE_API_BASE || 'http://localhost:3000';\r\n\r\n  const fetchActivities = async () => {\r\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n    if (!user || !user.id) return;\r\n    try {\r\n      const res = await fetch(`${base}/api/activities/likes/${user.id}`);\r\n      if (!res.ok) return;\r\n      const data = await res.json();\r\n      setActivities(data);\r\n    } catch (err) {\r\n      console.error('Failed to fetch activities', err);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => { fetchActivities(); const handler = () => fetchActivities(); window.addEventListener('activity:updated', handler); return () => window.removeEventListener('activity:updated', handler); }, []);\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"flex items-center mb-6 mt-5\">\r\n        <button onClick={() => navigate(-1)} className=\"p-2 mr-4 rounded-md hover:bg-gray-100\">\r\n          <ArrowLeft />\r\n        </button>\r\n        <h1 className=\"text-2xl font-semibold\">Latest Feed</h1>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow-md border border-gray-200 p-6\">\r\n        {activities.length === 0 ? (\r\n          <p className=\"text-gray-600\">No recent activity.</p>\r\n        ) : (\r\n          activities.map(item => (\r\n            <div key={item.id} className=\"border-b last:border-b-0 py-3\">\r\n              <p className=\"text-gray-800\">You liked \"{item.title}\" by {item.recipient_name}</p>\r\n              <div className=\"text-sm text-gray-500\">{new Date(item.created_at).toLocaleString()}</div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileFeed;\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileFiles.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileLanguages.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileLocation.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileReferrals.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileTasks.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\profile\\ProfileUploads.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'fetchFiles'. Either include it or remove the dependency array.","line":19,"column":44,"nodeType":"ArrayExpression","endLine":19,"endColumn":46,"suggestions":[{"desc":"Update the dependencies array to be: [fetchFiles]","fix":{"range":[644,646],"text":"[fetchFiles]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { ArrowLeft, Trash2, Download } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst ProfileUploads = () => {\r\n  const navigate = useNavigate();\r\n  const [files, setFiles] = useState([]);\r\n  const [selected, setSelected] = useState(null);\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  const base = import.meta.env.VITE_API_BASE || 'http://localhost:3000';\r\n\r\n  const fetchFiles = async () => {\r\n    const res = await fetch(`${base}/api/uploads`);\r\n    const data = await res.json();\r\n    setFiles(data);\r\n  };\r\n\r\n  React.useEffect(() => { fetchFiles(); }, []);\r\n\r\n  const onChange = (e) => setSelected(e.target.files[0]);\r\n\r\n  const upload = async () => {\r\n    if (!selected) return;\r\n    setUploading(true);\r\n    const fd = new FormData();\r\n    fd.append('file', selected);\r\n    const res = await fetch(`${base}/api/uploads`, { method: 'POST', body: fd });\r\n    if (res.ok) {\r\n      setSelected(null);\r\n      await fetchFiles();\r\n    }\r\n    setUploading(false);\r\n  };\r\n\r\n  const remove = async (filename) => {\r\n    const res = await fetch(`${base}/api/uploads/${encodeURIComponent(filename)}`, { method: 'DELETE' });\r\n    if (res.ok) await fetchFiles();\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"flex items-center mb-6 mt-5\">\r\n        <button onClick={() => navigate(-1)} className=\"p-2 mr-4 rounded-md hover:bg-gray-100\">\r\n          <ArrowLeft />\r\n        </button>\r\n        <h1 className=\"text-2xl font-semibold\">My Uploads</h1>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow-md border border-gray-200 p-6\">\r\n        <div className=\"flex gap-2 items-center mb-4\">\r\n          <input type=\"file\" onChange={onChange} />\r\n          <button onClick={upload} disabled={!selected || uploading} className=\"px-4 py-2 bg-blue-600 text-white rounded-md\">{uploading ? 'Uploading...' : 'Upload'}</button>\r\n        </div>\r\n\r\n        {files.length === 0 ? (\r\n          <p className=\"text-gray-600\">No files uploaded yet.</p>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {files.map(f => (\r\n              <div key={f.filename} className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <div className=\"font-medium\">{f.filename}</div>\r\n                  <div className=\"text-sm text-gray-500\">{Math.round(f.size/1024)} KB</div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <a href={`${base}/assets/uploads/${encodeURIComponent(f.filename)}`} target=\"_blank\" rel=\"noreferrer\" className=\"p-2 hover:bg-gray-100 rounded-md\"><Download /></a>\r\n                  <button className=\"p-2 hover:bg-red-50 text-red-600 rounded-md\" onClick={() => remove(f.filename)}><Trash2 /></button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileUploads;\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\recruitment\\Applications.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":14,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":15},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  18 |\n  19 |   useEffect(() => {\n> 20 |     fetchApplications();\n     |     ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  21 |   }, []);\n  22 |\n  23 |   const updateStatus = async (id, status) => {","line":20,"column":5,"nodeType":null,"endLine":20,"endColumn":22}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Applications() {\r\n  const [applications, setApplications] = useState([]);\r\n  const user = JSON.parse(localStorage.getItem('user') || 'null');\r\n  const token = localStorage.getItem('token');\r\n\r\n  const fetchApplications = async () => {\r\n    // Mocking response for demo if API fails, otherwise use your API\r\n    try {\r\n      const res = await axios.get(\"http://localhost:3000/api/applications\");\r\n      setApplications(res.data);\r\n    } catch (e) {\r\n      console.log(\"API not ready yet\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchApplications();\r\n  }, []);\r\n\r\n  const updateStatus = async (id, status) => {\r\n    try {\r\n      await axios.patch(`http://localhost:3000/api/applications/${id}/status`, { status }, {\r\n        headers: { Authorization: token ? `Bearer ${token}` : '' }\r\n      });\r\n      fetchApplications();\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    switch (status) {\r\n      case \"SELECTED\":\r\n        return \"bg-green-100 text-green-800 border-green-200\";\r\n      case \"REJECTED\":\r\n        return \"bg-red-100 text-red-800 border-red-200\";\r\n      case \"INTERVIEW\":\r\n        return \"bg-blue-100 text-blue-800 border-blue-200\";\r\n      default:\r\n        return \"bg-gray-100 text-gray-800 border-gray-200\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"px-8 pb-8 mt-20\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h1 className=\"text-2xl font-bold text-[#020839]\">Applications</h1>\r\n          <span className=\"text-gray-500 text-sm\">\r\n            Total: {applications.length}\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50 border-b\">\r\n              <tr>\r\n                <th className=\"p-4 text-left text-sm font-semibold text-gray-600\">\r\n                  Candidate\r\n                </th>\r\n                <th className=\"p-4 text-left text-sm font-semibold text-gray-600\">\r\n                  Job ID\r\n                </th>\r\n                <th className=\"p-4 text-left text-sm font-semibold text-gray-600\">\r\n                  Status\r\n                </th>\r\n                <th className=\"p-4 text-left text-sm font-semibold text-gray-600\">\r\n                  Action\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {applications.map((app) => (\r\n                <tr\r\n                  key={app.id}\r\n                  className=\"border-b hover:bg-gray-50 transition\"\r\n                >\r\n                  <td className=\"p-4\">\r\n                    <div className=\"font-medium text-[#020839]\">{app.name}</div>\r\n                    <div className=\"text-xs text-gray-500\">{app.email}</div>\r\n                  </td>\r\n                  <td className=\"p-4 text-gray-600\">#{app.job_id}</td>\r\n                  <td className=\"p-4\">\r\n                    <span\r\n                      className={`px-3 py-1 rounded-full text-xs font-medium border ${getStatusBadge(\r\n                        app.status\r\n                      )}`}\r\n                    >\r\n                      {app.status}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    {user && user.role === 'Admin' ? (\r\n                      <select\r\n                        value={app.status}\r\n                        onChange={(e) => updateStatus(app.id, e.target.value)}\r\n                        className=\"border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:border-[#020839]\"\r\n                      >\r\n                        <option value=\"APPLIED\">Applied</option>\r\n                        <option value=\"INTERVIEW\">Interview</option>\r\n                        <option value=\"SELECTED\">Selected</option>\r\n                        <option value=\"REJECTED\">Rejected</option>\r\n                      </select>\r\n                    ) : (\r\n                      <div className=\"text-sm text-gray-600\">{app.status}</div>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {applications.length === 0 && (\r\n                <tr>\r\n                  <td colSpan=\"4\" className=\"p-4 text-center text-gray-400\">\r\n                    No applications found\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\recruitment\\Interviews.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  35 |\n  36 |   useEffect(() => {\n> 37 |     fetchData();\n     |     ^^^^^^^^^ Avoid calling setState() directly within an effect\n  38 |   }, []);\n  39 |\n  40 |   // Schedule interview","line":37,"column":5,"nodeType":null,"endLine":37,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Interviews() {\r\n  const [applications, setApplications] = useState([]);\r\n  const [interviews, setInterviews] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n  const user = JSON.parse(localStorage.getItem('user') || 'null');\r\n  const token = localStorage.getItem('token');\r\n\r\n  const [form, setForm] = useState({\r\n    application_id: \"\",\r\n    interview_date: \"\",\r\n    interview_time: \"\",\r\n    interviewer: \"\",\r\n    mode: \"Online\",\r\n  });\r\n\r\n  // Fetch applications & interviews\r\n  const fetchData = async () => {\r\n    try {\r\n      const appRes = await axios.get(\"http://localhost:3000/api/applications\");\r\n      setApplications(\r\n        appRes.data.filter((a) =>\r\n          [\"APPLIED\", \"INTERVIEW\"].includes(a.status)\r\n        )\r\n      );\r\n\r\n      const intRes = await axios.get(\"http://localhost:3000/api/interviews\");\r\n      setInterviews(intRes.data);\r\n    } catch (e) {\r\n      console.log(\"API Error\", e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Schedule interview\r\n  const scheduleInterview = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!user || user.role !== 'Admin') {\r\n      alert('Only admins can schedule interviews');\r\n      return;\r\n    }\r\n\r\n    // ‚ùå Block temporary candidates\r\n    if (isNaN(Number(form.application_id))) {\r\n      setError(\"Temporary candidate selected. Please select a real candidate.\");\r\n      return;\r\n    }\r\n\r\n    setError(\"\");\r\n\r\n    try {\r\n      await axios.post(\"http://localhost:3000/api/interviews\", {\r\n        ...form,\r\n        application_id: Number(form.application_id),\r\n      }, { headers: { Authorization: token ? `Bearer ${token}` : '' } });\r\n\r\n      alert(\"Interview Scheduled Successfully\");\r\n\r\n      setForm({\r\n        application_id: \"\",\r\n        interview_date: \"\",\r\n        interview_time: \"\",\r\n        interviewer: \"\",\r\n        mode: \"Online\",\r\n      });\r\n\r\n      fetchData();\r\n    } catch (err) {\r\n      console.error(err.response?.data || err.message);\r\n      alert(\"Interview scheduling failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* CONTENT */}\r\n      <div className=\"px-8 mt-10 pb-8 grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n        {/* LEFT: FORM */}\r\n        <div className=\"lg:col-span-1\">\r\n          <h2 className=\"text-xl font-bold mb-6 text-[#020839]\">\r\n            Schedule Interview\r\n          </h2>\r\n\r\n          {user && user.role === 'Admin' ? (\r\n            <form\r\n              onSubmit={scheduleInterview}\r\n              className=\"bg-white p-6 rounded-lg shadow-sm border\"\r\n            >\r\n            <div className=\"space-y-4\">\r\n              {/* Candidate */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">\r\n                  Candidate\r\n                </label>\r\n                <select\r\n                  value={form.application_id}\r\n                  onChange={(e) =>\r\n                    setForm({ ...form, application_id: e.target.value })\r\n                  }\r\n                  className=\"w-full border p-2 rounded\"\r\n                  required\r\n                >\r\n                  <option value=\"\" >\r\n                    -- Select Candidate --\r\n                  </option>\r\n\r\n                  {/* Real DB candidates */}\r\n                  {applications.map((app) => (\r\n                    <option key={app.id} value={app.id}>\r\n                      {app.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n\r\n                {error && (\r\n                  <p className=\"text-red-500 text-sm mt-1\">{error}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Date & Time */}\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Date</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={form.interview_date}\r\n                    onChange={(e) =>\r\n                      setForm({ ...form, interview_date: e.target.value })\r\n                    }\r\n                    className=\"w-full border p-2 rounded\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Time</label>\r\n                  <input\r\n                    type=\"time\"\r\n                    value={form.interview_time}\r\n                    onChange={(e) =>\r\n                      setForm({ ...form, interview_time: e.target.value })\r\n                    }\r\n                    className=\"w-full border p-2 rounded\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Interviewer */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">\r\n                  Interviewer\r\n                </label>\r\n                <input\r\n                  value={form.interviewer}\r\n                  onChange={(e) =>\r\n                    setForm({ ...form, interviewer: e.target.value })\r\n                  }\r\n                  placeholder=\"John Doe\"\r\n                  className=\"w-full border p-2 rounded\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {/* Mode */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Mode</label>\r\n                <select\r\n                  value={form.mode}\r\n                  onChange={(e) =>\r\n                    setForm({ ...form, mode: e.target.value })\r\n                  }\r\n                  className=\"w-full border p-2 rounded\"\r\n                >\r\n                  <option>Online</option>\r\n                  <option>Offline</option>\r\n                </select>\r\n              </div>\r\n\r\n              <button className=\"w-full bg-[#020839] text-white py-2 rounded hover:bg-[#1a2363] transition\">\r\n                Schedule Interview\r\n              </button>\r\n            </div>\r\n            </form>\r\n          ) : (\r\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border text-gray-600\">Only Admins can schedule interviews. You can view upcoming interviews here.</div>\r\n          )}\r\n        </div>\r\n        {/* RIGHT: INTERVIEW LIST */}\r\n        <div className=\"lg:col-span-2\">\r\n          <h2 className=\"text-xl font-bold mb-6 text-[#020839]\">\r\n            Upcoming Interviews\r\n          </h2>\r\n\r\n          <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\r\n            {interviews.length === 0 ? (\r\n              <div className=\"p-6 text-center text-gray-500\">\r\n                No interviews scheduled yet\r\n              </div>\r\n            ) : (\r\n              <table className=\"w-full\">\r\n                <thead className=\"bg-gray-50 border-b\">\r\n                  <tr>\r\n                    <th className=\"p-3 text-left\">Candidate</th>\r\n                    <th className=\"p-3 text-left\">Date</th>\r\n                    <th className=\"p-3 text-left\">Time</th>\r\n                    <th className=\"p-3 text-left\">Interviewer</th>\r\n                    <th className=\"p-3 text-left\">Mode</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {interviews.map((intv, i) => (\r\n                    <tr key={i} className=\"border-b hover:bg-gray-50\">\r\n                      <td className=\"p-3 font-medium\">\r\n                        {intv.candidate_name ||\r\n                          `Candidate #${intv.application_id}`}\r\n                      </td>\r\n                      <td className=\"p-3\">{intv.interview_date}</td>\r\n                      <td className=\"p-3\">{intv.interview_time}</td>\r\n                      <td className=\"p-3\">{intv.interviewer}</td>\r\n                      <td className=\"p-3\">\r\n                        <span className=\"bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs\">\r\n                          {intv.mode}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\recruitment\\Jobs.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'search'. Either include it or remove the dependency array.","line":46,"column":6,"nodeType":"ArrayExpression","endLine":46,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [search]","fix":{"range":[1563,1565],"text":"[search]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":85,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":123,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Card from \"../../components/ui/Card\";\r\nimport Button from \"../../components/ui/Button\";\r\nimport { Table, TableHeader, TableRow, TableHead, TableCell } from \"../../components/ui/Table\";\r\nimport Skeleton from \"../../components/ui/Skeleton\";\r\nimport EmptyState from \"../../components/ui/EmptyState\";\r\nimport { Fragment } from \"react\";\r\n\r\nexport default function Jobs() {\r\n  const [jobs, setJobs] = useState([]);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [form, setForm] = useState({\r\n    title: \"\",\r\n    location: \"\",\r\n    experience: \"\",\r\n    salary: \"\",\r\n  });\r\n  const [search, setSearch] = useState(\"\");\r\n  const [showApply, setShowApply] = useState(false);\r\n  const [selectedJob, setSelectedJob] = useState(null);\r\n  const [applicant, setApplicant] = useState({ name: \"\", email: \"\", coverLetter: \"\" });\r\n  const [resumeFile, setResumeFile] = useState(null);\r\n  const [resumePreview, setResumePreview] = useState(null);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchJobs = async (opts = {}) => {\r\n    try {\r\n      const res = await axios.get(\"http://localhost:3000/api/jobs\", { params: opts });\r\n      setJobs(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const userStr = localStorage.getItem(\"user\");\r\n    if (userStr) {\r\n      const user = JSON.parse(userStr);\r\n      setIsAdmin(user.role === 'Admin');\r\n    }\r\n    fetchJobs({ search });\r\n  }, []);\r\n\r\n  // debounce search\r\n  useEffect(() => {\r\n    const t = setTimeout(() => {\r\n      setLoading(true);\r\n      fetchJobs({ search });\r\n    }, 350);\r\n\r\n    return () => clearTimeout(t);\r\n  }, [search]);\r\n\r\n  const submitJob = async (e) => {\r\n    e.preventDefault();\r\n    await axios.post(\"http://localhost:3000/api/jobs\", form);\r\n    setForm({ title: \"\", location: \"\", experience: \"\", salary: \"\" });\r\n    fetchJobs();\r\n  };\r\n\r\n  const openApply = (job) => {\r\n    setSelectedJob(job);\r\n    setShowApply(true);\r\n  };\r\n\r\n  const closeApply = () => {\r\n    setShowApply(false);\r\n    setSelectedJob(null);\r\n    setApplicant({ name: \"\", email: \"\", coverLetter: \"\" });\r\n    setResumeFile(null);\r\n    setResumePreview(null);\r\n  };\r\n\r\n  const onResumeChange = (e) => {\r\n    const f = e.target.files[0];\r\n    if (!f) return;\r\n    setResumeFile(f);\r\n    try {\r\n      const url = URL.createObjectURL(f);\r\n      setResumePreview(url);\r\n    } catch (e) {\r\n      setResumePreview(null);\r\n    }\r\n  };\r\n\r\n  const submitApplication = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedJob) return;\r\n    const fd = new FormData();\r\n    fd.append('name', applicant.name);\r\n    fd.append('email', applicant.email);\r\n    fd.append('coverLetter', applicant.coverLetter);\r\n    if (resumeFile) fd.append('resume', resumeFile);\r\n\r\n    try {\r\n      await axios.post(`http://localhost:3000/api/jobs/${selectedJob.id}/apply`, fd, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n      closeApply();\r\n      alert('Application submitted');\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Failed to submit application');\r\n    }\r\n  };\r\n\r\n  // ‚úÖ DELETE JOB\r\n  const deleteJob = async (id) => {\r\n    if (!isAdmin) return;\r\n    const confirmDelete = window.confirm(\r\n      \"Are you sure you want to delete this job?\"\r\n    );\r\n\r\n    if (!confirmDelete) return;\r\n\r\n    try {\r\n      await axios.delete(`http://localhost:3000/api/jobs/${id}`);\r\n      fetchJobs();\r\n    } catch (err) {\r\n      alert(\"Failed to delete job\");\r\n    }\r\n  };\r\n\r\n  if (!jobs) return null;\r\n\r\n  return (\r\n    <div className=\"p-8 max-w-7xl mx-auto space-y-8 animate-fadeIn\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Recruitment</h1>\r\n        <div className=\"ml-4\">\r\n          <input\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            placeholder=\"Search jobs...\"\r\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create Job */}\r\n      {isAdmin && (\r\n        <Card>\r\n          <h2 className=\"text-lg font-semibold mb-6 text-gray-900\">Post a New Job</h2>\r\n          <form onSubmit={submitJob}>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium text-gray-700\">Job Title</label>\r\n                <input\r\n                  placeholder=\"e.g. Senior Developer\"\r\n                  value={form.title}\r\n                  onChange={(e) => setForm({ ...form, title: e.target.value })}\r\n                  className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#020839] focus:border-transparent outline-none transition-all\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium text-gray-700\">Location</label>\r\n                <input\r\n                  placeholder=\"e.g. Remote\"\r\n                  value={form.location}\r\n                  onChange={(e) => setForm({ ...form, location: e.target.value })}\r\n                  className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#020839] focus:border-transparent outline-none transition-all\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium text-gray-700\">Experience</label>\r\n                <input\r\n                  placeholder=\"e.g. 3-5 Years\"\r\n                  value={form.experience}\r\n                  onChange={(e) => setForm({ ...form, experience: e.target.value })}\r\n                  className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#020839] focus:border-transparent outline-none transition-all\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium text-gray-700\">Salary Range</label>\r\n                <input\r\n                  placeholder=\"e.g. $80k - $120k\"\r\n                  value={form.salary}\r\n                  onChange={(e) => setForm({ ...form, salary: e.target.value })}\r\n                  className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#020839] focus:border-transparent outline-none transition-all\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-6 flex justify-end\">\r\n              <Button type=\"submit\">\r\n                Create Job Posting\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Job List */}\r\n      <div className=\"space-y-4\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900\">Active Listings</h2>\r\n\r\n        {loading ? (\r\n          <Card className=\"p-0 overflow-hidden\">\r\n            <div className=\"p-4 border-b border-gray-200 bg-gray-50 flex justify-between\">\r\n              <Skeleton className=\"h-6 w-32\" />\r\n              <Skeleton className=\"h-6 w-24\" />\r\n            </div>\r\n            <div className=\"p-4 space-y-4\">\r\n              {[1, 2, 3].map((i) => (\r\n                <div key={i} className=\"flex justify-between items-center\">\r\n                  <div className=\"space-y-2\">\r\n                    <Skeleton className=\"h-5 w-48\" />\r\n                    <Skeleton className=\"h-4 w-32\" />\r\n                  </div>\r\n                  <Skeleton className=\"h-8 w-20\" />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </Card>\r\n        ) : jobs.length === 0 ? (\r\n          <Card>\r\n            <EmptyState\r\n              title=\"No active job listings\"\r\n              description=\"Get started by creating a new job position above.\"\r\n            />\r\n          </Card>\r\n        ) : (\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Job Title</TableHead>\r\n                <TableHead>Location</TableHead>\r\n                <TableHead>Experience</TableHead>\r\n                <TableHead>Salary</TableHead>\r\n                {isAdmin && <TableHead className=\"text-right\">Actions</TableHead>}\r\n              </TableRow>\r\n            </TableHeader>\r\n            <tbody>\r\n              {jobs.map((job) => (\r\n                <TableRow key={job.id}>\r\n                  <TableCell className=\"font-medium text-gray-900\">{job.title}</TableCell>\r\n                  <TableCell>{job.location}</TableCell>\r\n                  <TableCell>{job.experience}</TableCell>\r\n                  <TableCell>{job.salary}</TableCell>\r\n                  <TableCell className=\"text-right\">\r\n                    {isAdmin ? (\r\n                      <button\r\n                        onClick={() => deleteJob(job.id)}\r\n                        className=\"text-red-500 hover:text-red-700 font-medium text-sm transition-colors\"\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    ) : (\r\n                      <button\r\n                        onClick={() => openApply(job)}\r\n                        className=\"text-indigo-600 hover:text-indigo-800 font-medium text-sm transition-colors\"\r\n                      >\r\n                        Apply\r\n                      </button>\r\n                    )}\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        )}\r\n      </div>\r\n\r\n      {/* Apply Modal */}\r\n      {showApply && selectedJob && (\r\n        <div className=\"fixed inset-0 z-40 flex items-center justify-center bg-black/40\">\r\n          <div className=\"bg-white rounded-lg shadow-lg w-full max-w-2xl p-6\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h3 className=\"text-lg font-semibold\">Apply for {selectedJob.title}</h3>\r\n              <button onClick={closeApply} className=\"text-gray-500\">Close</button>\r\n            </div>\r\n\r\n            <form onSubmit={submitApplication} className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <input required placeholder=\"Full name\" value={applicant.name} onChange={(e)=>setApplicant({...applicant,name:e.target.value})} className=\"px-3 py-2 border rounded\" />\r\n                <input required placeholder=\"Email\" value={applicant.email} onChange={(e)=>setApplicant({...applicant,email:e.target.value})} className=\"px-3 py-2 border rounded\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-sm font-medium\">Resume (PDF/DOC)</label>\r\n                <input type=\"file\" accept=\"application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\" onChange={onResumeChange} className=\"block mt-2\" />\r\n                {resumePreview && (\r\n                  <div className=\"mt-3 border p-2\">\r\n                    <iframe title=\"resume-preview\" src={resumePreview} className=\"w-full h-64\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label className=\"text-sm font-medium\">Cover Letter</label>\r\n                <textarea value={applicant.coverLetter} onChange={(e)=>setApplicant({...applicant,coverLetter:e.target.value})} className=\"w-full mt-2 border rounded p-2\" rows={4} />\r\n              </div>\r\n\r\n              <div className=\"flex justify-end\">\r\n                <button type=\"submit\" className=\"px-4 py-2 bg-[#020839] text-white rounded\">Submit Application</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n      </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\recruitment\\Offers.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":24,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":14},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  26 |\n  27 |   useEffect(() => {\n> 28 |     fetchData();\n     |     ^^^^^^^^^ Avoid calling setState() directly within an effect\n  29 |   }, []);\n  30 |\n  31 |   const createOffer = async (e) => {","line":28,"column":5,"nodeType":null,"endLine":28,"endColumn":14}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nexport default function Offers() {\r\n  const [candidates, setCandidates] = useState([]);\r\n  const [offers, setOffers] = useState([]);\r\n  const user = JSON.parse(localStorage.getItem('user') || 'null');\r\n  const token = localStorage.getItem('token');\r\n  const [form, setForm] = useState({\r\n    application_id: \"\",\r\n    position: \"\",\r\n    ctc: \"\",\r\n    joining_date: \"\"\r\n  });\r\n  \r\n\r\n  const fetchData = async () => {\r\n    try {\r\n        const appRes = await axios.get(\"http://localhost:3000/api/applications\");\r\n        // Only show candidates who are SELECTED\r\n        setCandidates(appRes.data.filter(a => a.status === \"SELECTED\"));\r\n        \r\n        const offerRes = await axios.get(\"http://localhost:3000/api/offers\");\r\n        setOffers(offerRes.data);\r\n    } catch(e) { console.log(\"API Error\") }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const createOffer = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!user || user.role !== 'Admin') {\r\n      alert('Only admins can create offers');\r\n      return;\r\n    }\r\n\r\n    await axios.post(\"http://localhost:3000/api/offers\", {\r\n        ...form,\r\n        status: \"Pending\" \r\n    }, { headers: { Authorization: token ? `Bearer ${token}` : '' } });\r\n    setForm({ application_id: \"\", position: \"\", ctc: \"\", joining_date: \"\" });\r\n    fetchData();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n    <div className=\"px-8 mt-10 pb-8\">\r\n      <h1 className=\"text-2xl font-bold mb-6 text-[#020839]\">Offer Management</h1>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n        {/* Create Offer */}\r\n        <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\r\n                <h2 className=\"font-semibold text-lg mb-4 text-gray-800\">Generate Offer</h2>\r\n                {user && user.role === 'Admin' ? (\r\n                  <form onSubmit={createOffer} className=\"space-y-4\">\r\n                    <div>\r\n                        <label className=\"block text-sm text-gray-600 mb-1\">Select Candidate</label>\r\n                        <select \r\n                            className=\"w-full border p-2 rounded focus:border-[#020839] outline-none\"\r\n                            value={form.application_id}\r\n                            onChange={e => setForm({...form, application_id: e.target.value})}\r\n                            required\r\n                        >\r\n                            <option value=\"\">-- Only Selected Candidates --</option>\r\n                            {candidates.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                        </select>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-sm text-gray-600 mb-1\">Position / Title</label>\r\n                        <input className=\"w-full border p-2 rounded focus:border-[#020839] outline-none\" \r\n                            value={form.position} onChange={e => setForm({...form, position: e.target.value})} required />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-sm text-gray-600 mb-1\">Annual CTC</label>\r\n                        <input className=\"w-full border p-2 rounded focus:border-[#020839] outline-none\" \r\n                            placeholder=\"e.g. 12 LPA\"\r\n                            value={form.ctc} onChange={e => setForm({...form, ctc: e.target.value})} required />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-sm text-gray-600 mb-1\">Joining Date</label>\r\n                        <input type=\"date\" className=\"w-full border p-2 rounded focus:border-[#020839] outline-none\" \r\n                            value={form.joining_date} onChange={e => setForm({...form, joining_date: e.target.value})} required />\r\n                    </div>\r\n                    <button className=\"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded shadow-sm transition\">Generate & Send Offer</button>\r\n                  </form>\r\n                ) : (\r\n                  <div className=\"text-gray-600\">Only Admins can create offers. You can view offers below.</div>\r\n                )}\r\n            </div>\r\n        </div>\r\n\r\n        {/* Offer List */}\r\n        <div className=\"lg:col-span-2\">\r\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\r\n                <table className=\"w-full\">\r\n                    <thead className=\"bg-gray-50 border-b\">\r\n                        <tr>\r\n                            <th className=\"p-3 text-left\">Candidate ID</th>\r\n                            <th className=\"p-3 text-left\">Position</th>\r\n                            <th className=\"p-3 text-left\">CTC</th>\r\n                            <th className=\"p-3 text-left\">Joining</th>\r\n                            <th className=\"p-3 text-left\">Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {offers.map((offer, i) => (\r\n                            <tr key={i} className=\"border-b\">\r\n                                <td className=\"p-3 font-medium\">#{offer.application_id}</td>\r\n                                <td className=\"p-3\">{offer.position}</td>\r\n                                <td className=\"p-3\">{offer.ctc}</td>\r\n                                <td className=\"p-3\">{offer.joining_date}</td>\r\n                                <td className=\"p-3\"><span className=\"text-yellow-600 bg-yellow-100 px-2 py-1 rounded text-xs font-bold\">Pending</span></td>\r\n                            </tr>\r\n                        ))}\r\n                         {offers.length === 0 && (\r\n                            <tr><td colSpan=\"5\" className=\"p-4 text-center text-gray-400\">No offers released yet</td></tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n   </div>\r\n  )\r\n}","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\recruitment\\RecruitmentLayout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\settings\\Contact.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[145,184],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":108,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":108,"endColumn":15}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { ArrowLeft } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst STORAGE_PREFIX = 'settings:contact:';\r\nconst contactInfo = [\r\n    {\r\n      title: 'Email',\r\n      text: 'xyz@example.com',\r\n      svg: (\r\n        <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"M3 6.5C3 5.67 3.67 5 4.5 5h15c.83 0 1.5.67 1.5 1.5v11c0 .83-.67 1.5-1.5 1.5h-15A1.5 1.5 0 013 17.5v-11z\" stroke=\"#2563EB\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n          <path d=\"M21 6l-9 6L3 6\" stroke=\"#2563EB\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    {\r\n      title: 'Phone',\r\n      text: '+91 6234567890',\r\n      svg: (\r\n        <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"> \r\n          <path d=\"M22 16.92v3a2 2 0 01-2.18 2 19.86 19.86 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.86 19.86 0 01-3.07-8.63A2 2 0 014.11 2h3a2 2 0 012 1.72c.12 1.2.38 2.37.78 3.47a2 2 0 01-.45 2.11L9.91 11.09a16 16 0 006 6l1.79-1.79a2 2 0 012.11-.45c1.1.4 2.27.66 3.47.78A2 2 0 0122 16.92z\" stroke=\"#2563EB\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    {\r\n      title: 'LinkedIn',\r\n      text: 'uptoskills/profile',\r\n      svg: (\r\n        <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"> \r\n          <path d=\"M16 8a6 6 0 016 6v6h-4v-6a2 2 0 00-4 0v6h-4v-12h4v2\" stroke=\"#2563EB\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n          <path d=\"M2 9h4v12H2z\" stroke=\"#2563EB\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n          <circle cx=\"4\" cy=\"4\" r=\"2\" stroke=\"#2563EB\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    {\r\n      title: 'Location',\r\n      text: 'New Delhi, India',\r\n      svg: (\r\n        <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1118 0z\" stroke=\"#2563EB\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n          <circle cx=\"12\" cy=\"10\" r=\"2.5\" stroke=\"#2563EB\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    {\r\n      title: 'Industry',\r\n      text: 'Technology, information and internet',\r\n      svg: (\r\n        <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"M3 6h18M3 12h18M3 18h18\" stroke=\"#2563EB\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n        </svg>\r\n      )\r\n    }\r\n  ];\r\n\r\nconst Contact = () => {\r\n  const navigate = useNavigate();\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [subject, setSubject] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [status, setStatus] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setName(localStorage.getItem(STORAGE_PREFIX + 'name') || '');\r\n    setEmail(localStorage.getItem(STORAGE_PREFIX + 'email') || '');\r\n    setSubject(localStorage.getItem(STORAGE_PREFIX + 'subject') || '');\r\n    setMessage(localStorage.getItem(STORAGE_PREFIX + 'message') || '');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(STORAGE_PREFIX + 'name', name);\r\n    localStorage.setItem(STORAGE_PREFIX + 'email', email);\r\n    localStorage.setItem(STORAGE_PREFIX + 'subject', subject);\r\n    localStorage.setItem(STORAGE_PREFIX + 'message', message);\r\n  }, [name, email, subject, message]);\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    if (!name || !email || !subject || !message) {\r\n      setStatus({ type: 'error', text: 'Please fill all fields.' });\r\n      return;\r\n    }\r\n\r\n    setStatus({ type: 'loading', text: 'Sending...' });\r\n\r\n    try {\r\n      const base = import.meta.env.VITE_API_BASE || 'http://localhost:3000';\r\n      const res = await fetch(`${base}/api/contact`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name, email, subject, message }),\r\n      });\r\n\r\n      if (!res.ok) throw new Error('Network error');\r\n\r\n      setStatus({ type: 'success', text: 'Message sent ‚Äî we will get back to you soon.' });\r\n      setName(''); setEmail(''); setSubject(''); setMessage('');\r\n      localStorage.removeItem(STORAGE_PREFIX + 'name');\r\n      localStorage.removeItem(STORAGE_PREFIX + 'email');\r\n      localStorage.removeItem(STORAGE_PREFIX + 'subject');\r\n      localStorage.removeItem(STORAGE_PREFIX + 'message');\r\n      setTimeout(() => setStatus(null), 3000);\r\n    } \r\n    catch (err) {\r\n      setStatus({ type: 'error', text: 'Failed to send. Please try again later.' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mx-auto  max-w-4xl \">\r\n      <div className=\"flex items-center mb-6 mt-5\">\r\n              <button onClick={() => navigate(-1)} className=\"p-2 mr-4 rounded-md hover:bg-gray-100\">\r\n                <ArrowLeft />\r\n              </button>\r\n              <h1 className=\"text-2xl font-semibold\">Get In Touch</h1>\r\n            </div>\r\n      <p className=\"text-[#666]  text-center mb-6\">\r\n          If you have any questions or need assistance? We're here to help you on your journey to success.\r\n        </p>\r\n\r\n      <div className=\" bg-[#E8E8F1] max-w-[1200px] w-full mx-auto p-6 lg:p-9  grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-10 rounded-2xl\">\r\n\r\n  \r\n \r\n        {/* Block 1: Contact Information */}\r\n        <div className=\"shrink-0 w-full bg-[#ECEEF3] p-6 rounded-[10px] shadow-[0_4px_10px_rgba(0,0,0,0.05)]\">\r\n          <h2 className=\"text-xl font-semibold mb-9\">Contact Information</h2>\r\n          {contactInfo.map((item, i) => (\r\n            <div key={i} className=\"flex gap-4 mb-7 items-start\">\r\n              <div className=\"w-7 h-7 flex items-center justify-center\">\r\n                {item.svg}\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-semibold text-[19px] mb-1.5\">{item.title}</h3>\r\n                <p className=\"m-0 text-[#666] text-[17px]\">{item.text}</p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Block 2: Send Us a Message section */}\r\n        <div className=\"grow w-full p-[30px] bg-[#ECEEF3] rounded-xl shadow-[0_2px_10px_rgba(0,0,0,0.08)]\">\r\n          <h2 className=\"text-2xl font-semibold mb-5 text-[#333]\">\r\n            Send Us a Message\r\n          </h2>\r\n          <motion.div initial={{ opacity: 0, y: 8 }} animate={{ opacity: 1, y: 0 }} className=\"bg-white rounded-xl shadow-md border border-gray-200 p-6\">\r\n\r\n            <form onSubmit={submit} className=\" flex flex-col gap-[18px]\" aria-labelledby=\"contact-form\">\r\n              <label className=\"sr-only\" id=\"contact-form\">Contact form</label>\r\n\r\n              <div>\r\n                <input value={name} onChange={(e) => setName(e.target.value)} className=\"w-full  p-2 rounded-lg border border-[#D0D5DD] text-[15px] focus:outline-none focus:border-[#4A66F7]\" placeholder=\"Your full name\" aria-required=\"true\" />\r\n              </div>\r\n\r\n              <div>\r\n                <input value={email} onChange={(e) => setEmail(e.target.value)} className=\"w-full  p-2 rounded-lg border border-[#D0D5DD] text-[15px] focus:outline-none focus:border-[#4A66F7]\" placeholder=\"Your email\" type=\"email\" aria-required=\"true\" />\r\n              </div>\r\n              \r\n              <div>\r\n                <input value={subject} onChange={(e) => setSubject(e.target.value)} className=\"w-full  p-2 rounded-lg border border-[#D0D5DD] text-[15px] focus:outline-none focus:border-[#4A66F7]\" placeholder=\"Subject\" type=\"text\" aria-required=\"true\" />\r\n              </div>\r\n\r\n              <div>\r\n                <textarea value={message} onChange={(e) => setMessage(e.target.value)} className=\"w-full p-3 rounded-lg border border-[#D0D5DD] text-[15px] resize-none focus:outline-none focus:border-[#4A66F7]\" placeholder=\"Message\" rows={5} aria-required=\"true\" />\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <motion.button whileTap={{ scale: 0.98 }} type=\"submit\" className=\"px-4 py-2 bg-blue-600 text-white rounded-md\" aria-busy={status?.type === 'loading'}>\r\n                  Send\r\n                </motion.button>\r\n                <div role=\"status\" aria-live=\"polite\" className={`text-sm ${status?.type === 'error' ? 'text-red-600' : 'text-green-600'}`}>\r\n                  {status?.text}\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </motion.div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Contact;\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\pages\\settings\\Feedback.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\services\\appreciationService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\services\\auth.service.js","messages":[],"suppressedMessages":[{"ruleId":"no-useless-catch","severity":2,"message":"Unnecessary try/catch wrapper.","line":5,"column":5,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":25,"endColumn":6,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\services\\employeeOfMonthService.js","messages":[{"ruleId":"no-useless-catch","severity":2,"message":"Unnecessary try/catch wrapper.","line":31,"column":5,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":50,"endColumn":6},{"ruleId":"no-useless-catch","severity":2,"message":"Unnecessary try/catch wrapper.","line":55,"column":5,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":72,"endColumn":6},{"ruleId":"no-useless-catch","severity":2,"message":"Unnecessary try/catch wrapper.","line":77,"column":5,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":87,"endColumn":6},{"ruleId":"no-useless-catch","severity":2,"message":"Unnecessary try/catch wrapper.","line":92,"column":5,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":102,"endColumn":6},{"ruleId":"no-useless-catch","severity":2,"message":"Unnecessary try/catch wrapper.","line":107,"column":5,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":117,"endColumn":6}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:3000/api/employee-of-month';\r\n\r\n// Get auth token from localStorage\r\nconst getAuthToken = () => {\r\n    const token = localStorage.getItem('token');\r\n    return token;\r\n};\r\n\r\n// Get current employee of the month with team\r\nexport const getCurrentEmployeeOfMonth = async () => {\r\n    try {\r\n        const token = getAuthToken();\r\n        const response = await axios.get(`${API_URL}/current`, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n        return response.data;\r\n    } catch (error) {\r\n        if (error.response?.status === 404) {\r\n            return { success: false, message: 'No employee of the month found' };\r\n        }\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Create new employee of the month with team members\r\nexport const createEmployeeOfMonth = async (userId, description, month, teamMembers) => {\r\n    try {\r\n        const token = getAuthToken();\r\n        const response = await axios.post(\r\n            API_URL,\r\n            {\r\n                userId,\r\n                description,\r\n                month,\r\n                teamMembers, // Array of { userId, role }\r\n            },\r\n            {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            }\r\n        );\r\n        return response.data;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Add team member to existing employee of the month\r\nexport const addTeamMember = async (employeeOfMonthId, userId, role) => {\r\n    try {\r\n        const token = getAuthToken();\r\n        const response = await axios.post(\r\n            `${API_URL}/${employeeOfMonthId}/team`,\r\n            {\r\n                userId,\r\n                role,\r\n            },\r\n            {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            }\r\n        );\r\n        return response.data;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Delete team member\r\nexport const deleteTeamMember = async (teamMemberId) => {\r\n    try {\r\n        const token = getAuthToken();\r\n        const response = await axios.delete(`${API_URL}/team/${teamMemberId}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n        return response.data;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Get all users for dropdown selection\r\nexport const getAllUsers = async () => {\r\n    try {\r\n        const token = getAuthToken();\r\n        const response = await axios.get('http://localhost:3000/api/users', {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n        return response.data;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Delete employee of the month\r\nexport const deleteEmployeeOfMonth = async (id) => {\r\n    try {\r\n        const token = getAuthToken();\r\n        const response = await axios.delete(`${API_URL}/${id}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n        return response.data;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\services\\event.service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\services\\meetingService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\services\\task.service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\services\\taskService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\src\\utils\\presence.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"d:\\Pradnya\\UpToSkills internship projects\\HRMS_GROUP_PRJ\\Hr\\vite.config.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'mode' is defined but never used.","line":6,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"mode"},"fix":{"range":[184,190],"text":""},"desc":"Remove unused variable 'mode'."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":7,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { defineConfig } from 'vite'\r\nimport react from '@vitejs/plugin-react'\r\nimport tailwindcss from '@tailwindcss/vite'\r\n\r\n// https://vite.dev/config/\r\nexport default defineConfig(({mode}) => {\r\n  const target = process.env.VITE_API_PROXY_TARGET || 'http://localhost:3001';\r\n  return {\r\n    plugins: [react(), tailwindcss()],\r\n    server: {\r\n      proxy: {\r\n        '/api': {\r\n          target,\r\n          changeOrigin: true,\r\n          secure: false,\r\n        }\r\n      }\r\n    }\r\n  };\r\n})\r\n","usedDeprecatedRules":[]}]